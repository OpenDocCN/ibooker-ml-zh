<html><head></head><body><div id="book-content"><div id="sbo-rt-content"><div class="readable-text" id="p1"> 
   <h1 class="readable-text-h1"><span class="chapter-title-numbering"><span class="num-string">16</span> </span> <span class="chapter-title-text">Ownership and maintenance</span></h1> 
  </div> 
  <div class="introduction-summary"> 
   <h3 class="introduction-header sigil_not_in_toc">This chapter covers</h3> 
   <ul> 
    <li class="readable-text" id="p2">The importance of proper system maintenance</li> 
    <li class="readable-text" id="p3">Accountability as one of the key factors in building and maintaining a healthy machine learning system</li> 
    <li class="readable-text" id="p4">The “bus factor” and the tradeoff between teams’ efficiency and redundancy</li> 
    <li class="readable-text" id="p5">The fundamental importance of properly arranged documentation</li> 
    <li class="readable-text" id="p6">The deceptive appeal of complexity</li> 
   </ul> 
  </div> 
  <div class="readable-text" id="p7"> 
   <blockquote>
    <div>
     The competent programmer is fully aware of the limited size of his own skull. He therefore approaches his task with full humility and avoids clever tricks like the plague. 
     <div class=" quote-cite">
       — Edsger Dijkstra 
     </div>
    </div>
   </blockquote> 
  </div> 
  <div class="readable-text" id="p8"> 
   <p>Throughout the last 15 chapters, we have tried to keep this book organized as an extended, in-depth checklist that you can always refer to at any stage in the design of your machine learning (ML) system. But these seemingly obvious recommendations are harder to follow than you may think.</p> 
  </div> 
  <div class="readable-text intended-text" id="p9"> 
   <p>Building an ML system from scratch and especially operating an existing solution is a process so complex and all-demanding, we’re guaranteed to stumble, blunder, hit a few bumps, and compromise some of the principles on our road to bringing value to a business. Being imperfect humans, we are also aware that sometimes we may allow ourselves to ignore some of our own tips. </p> 
  </div> 
  <div class="readable-text intended-text" id="p10"> 
   <p>Indeed, sometimes you may see or end up with a system that is not following the principles we advocate in the book, and reasons for that may vary in a vast number of ways: some details could have been missed, the company may have changed priorities and constraints, the system really needs some refresh because its original assumptions are not valid anymore, and so on. </p> 
  </div> 
  <div class="readable-text intended-text" id="p11"> 
   <p>Usually, it’s even more mundane, as the people who originally designed and built the systems tend to change jobs. More than that, they may leave the company before they finish building the system; this is the nature of things. With that in mind, ownership and maintenance is not something we only need to think about later but rather is the cornerstone of the whole system to be ingrained from the very beginning. In this process, however, there is the possibility and risk of becoming too attached to your creation, and this is something that should be avoided. The system should not be viewed as part of its author, and you should detach yourself and your ego from your design to deliver the best possible solution. </p> 
  </div> 
  <div class="readable-text intended-text" id="p12"> 
   <p>To put that in three bullet points, it is essential to know the following at any moment in time:</p> 
  </div> 
  <ul> 
   <li class="readable-text" id="p13"> What is the area of responsibility behind every person involved in the project? Do we have any gaps in accountability/ownership? </li> 
   <li class="readable-text" id="p14"> How many people have specific knowledge? Do we have enough redundancy? </li> 
   <li class="readable-text" id="p15"> Where is available documentation, and what components of the system are documented? Will anyone outside of the responsible team be able to run the system? </li> 
  </ul> 
  <div class="readable-text" id="p16"> 
   <p>To some extent, the design document helps answer (although only partially and not always directly) these questions. That means only one thing: we must focus on these aspects to avoid any woeful consequences in the future. After all, the most important thing is to build and maintain a product that will meet your demands and bring value. </p> 
  </div> 
  <div class="readable-text intended-text" id="p17"> 
   <p>In this chapter, we cover the essential basics of making the system long-lasting and robust to human-induced changes.</p> 
  </div> 
  <div class="readable-text" id="p18"> 
   <h2 class="readable-text-h2" id="sigil_toc_id_208"><span class="num-string">16.1</span> Accountability</h2> 
  </div> 
  <div class="readable-text" id="p19"> 
   <p>In earlier chapters of this book, we mentioned the importance of involving a variety of stakeholders in the information-gathering process who will provide critical input into the preparation stage of ML system development. </p> 
  </div> 
  <div class="readable-text intended-text" id="p20"> 
   <p>As the project grows, enriches with new inputs, and evolves from a simple constant baseline to a series of tightly interconnected complex models, it will be gradually joined by new participants. Some of them will only join you for a short period of time and leave once their participation is no longer necessary (e.g., data labelers are vital at the dataset processing stage but fall off by the time of deployment), some of them will turn into permanent contributors until the system’s release, and a handful of people will eventually become what can be called the “core team” (i.e., your closest people on the project). These colleagues of yours (or representatives of external vendors, if that’s the case) will become the ones accountable for the end result and the stability of your system. And it is you who should keep in touch with them on a regular basis, or at least know them personally.</p> 
  </div> 
  <div class="readable-text intended-text" id="p21"> 
   <p>Knowing the areas of responsibility and the people assigned to these roles is crucial for the successful launch and future of any project or system. It may sound absurd, but it’s even more important for team members who are actually responsible for specific components to be aware of that. You would be surprised to know how many times person A was convinced that person B was accountable for a certain part of a project, while person B, in turn, was sure of the opposite. A classic illustration of such a case can be seen in figure 16.1.<span class="aframe-location"/></p> 
  </div> 
  <div class="browsable-container figure-container" id="p22">  
   <img alt="figure" src="../Images/CH16_F01_Babushkin.png" width="1018" height="433"/> 
   <h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 16.1</span> Explicit versus implicit approaches to involving people in the project</h5>
  </div> 
  <div class="readable-text" id="p23"> 
   <p>Being redundantly explicit is much more valuable than being implicit in the hopes that everyone is on the same page, and based on our experience, this approach is applicable as soon as there are three people on the project, let alone more team members involved. One of our favorite quotes on the subject comes from the Nobel Prize-winning physicist Richard Feynman. In his book <em>Surely You’re Joking, Mr Feynman!</em>”, he wrote</p> 
  </div> 
  <div class="readable-text" id="p24"> 
   <blockquote>
    <div>
     One of the first interesting experiences I had in this project at Princeton was meeting great men. I had never met very many great men before. But there was an evaluation committee that had to try to help us along, and help us ultimately decide which way we were going to separate the uranium. This committee had men like Compton and Tolman and Smyth and Urey and Rabi and Oppenheimer on it. I would sit in because I understood the theory of how our process of separating isotopes worked, and so they’d ask me questions and talk about it. In these discussions one man would make a point. Then Compton, for example, would explain a different point of view. He would say it should be this way, and he was perfectly right. Another guy would say, well, maybe, but there’s this other possibility we have to consider against it.
    </div>
   </blockquote> 
  </div> 
  <div class="readable-text" id="p25"> 
   <blockquote>
    <div>
     So everybody is disagreeing, all around the table. I am surprised and disturbed that Compton doesn’t repeat and emphasize his point. Finally, at the end, Tolman, who’s the chairman, would say, “Well, having heard all these arguments, I guess it’s true that Compton’s argument is the best of all, and now we have to go ahead.”
    </div>
   </blockquote> 
  </div> 
  <div class="readable-text" id="p26"> 
   <blockquote>
    <div>
     It was such a shock to me to see that a committee of men could present a whole lot of ideas, each one thinking of a new facet, while remembering what the other fella said, so that, at the end, the decision is made as to which idea was the best—summing it all up—without having to say it three times. These were very great men indeed.
    </div>
   </blockquote> 
  </div> 
  <div class="readable-text" id="p27"> 
   <p>If you don’t have a bunch of geniuses working on a national priority project, you better not rely on their internal understanding and say (or write!) things three times, sharing it with everyone and putting it where it is hard to miss them. Things like meeting minutes, follow-ups, updates, and syncs are essentially done for this sake.</p> 
  </div> 
  <div class="readable-text intended-text" id="p28"> 
   <p>However, we have seen plenty of people abusing these principles, spending too much on meaningless syncs, turning the very concept of meetings into an industry-wide boogeyman. Those rituals, artifacts, or whatever you call them don’t require much time and don’t have to be done just because it’s written in the textbooks but rather serve the specific goal of maintaining focus. Not using them, as well as using them too much, might seriously affect performance and sustainability in the long run. We are convinced documentation is very undervalued, and its importance is severely underestimated. </p> 
  </div> 
  <div class="readable-text intended-text" id="p29"> 
   <p>Areas of accountability should be written down for explicit and unambiguous understanding across the team. There may be various levels of formality—from the startup-friendly “Alice is fully responsible for making system X work” to a complex multipage hierarchy. A fairly balanced approach will involve using the simple yet powerful RACI matrix that splits involved people into four groups: </p> 
  </div> 
  <ul> 
   <li class="readable-text" id="p30"> <em>Responsible</em><em> </em><em>—</em>The individual(s) who actually perform the task. Usual suspects: ML engineers. </li> 
   <li class="readable-text" id="p31"> <em>Accountable</em><em> </em><em>—</em>The person ultimately answerable for the completion of the task, typically a manager or team leader. It is recommended that a single person accountable for every component should also have the authority to approve or reject the work. Usual suspects: a project lead or a senior engineer. </li> 
   <li class="readable-text" id="p32"> <em>Consulted</em><em> </em><em>—</em>Those whose opinions are sought, usually subject matter experts or stakeholders with a particular interest in the task. Usual suspects: subject matter experts or legal representatives. </li> 
   <li class="readable-text" id="p33"> <em>Informed</em><em> </em><em>—</em>People who need to be kept up-to-date on the progress or decisions but do not directly contribute to the overall input. Usual suspects: front-end engineers. </li> 
  </ul> 
  <div class="readable-text" id="p34"> 
   <p>For better or worse, there’s always room for gaps in accountability; thus, it makes sense to describe an explicit way of escalation—what can be done if the situation doesn’t match the matrix or other accountability-related artifact?</p> 
  </div> 
  <div class="readable-text intended-text" id="p35"> 
   <p>One final and probably least favorite part about accountability is an on-call rotation. Being on call means that a specific person is responsible for responding to any critical incidents during their shift. They must be ready to react quickly in case of emergency, usually within 30 to 60 minutes. The rotation part implies this duty is typically shared among team members and changes on a regular basis. For example, one person might be on call for a week and then pass the duty to the next person for the following week (see figure 16.2).<span class="aframe-location"/></p> 
  </div> 
  <div class="browsable-container figure-container" id="p36">  
   <img alt="figure" src="../Images/CH16_F02_Babushkin.png" width="927" height="441"/> 
   <h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 16.2</span> On-call shifts are a necessary measure against team burnout.</h5>
  </div> 
  <div class="readable-text" id="p37"> 
   <p>An on-call schedule usually emerges over the company’s growth. Those who started their careers or had experience in smaller companies may recall that there’s no need for rotation in those environments, as everyone is on call all the time, with incidents being handled by whoever is available at the moment. However, at some point, this approach becomes unmanageable, when the responsibility is blurred between team members, leading to incidents being managed by everyone and no one at the same time. As soon as you start to pick up signals of such behavior, it’s time to formalize an on-call rotation. Later, there might be a need to have a dedicated on-call team structuring the rotation into tiers like L1/L2/L3 and so on.</p> 
  </div> 
  <div class="readable-text intended-text" id="p38"> 
   <p>But even if your on-call schedule is up and running, there may be other reasons for overloading the whole team. Arseny worked for a company during its early evolution stage, where he faced system incidents that couldn’t be solved at all simply because he had no clue what systems were even affected. This was a frustrating experience until the engineers who had built and maintained those systems finally wrote solid cookbooks with recommendations on typical problems. Some tech debt was cleared, and on-call shifts transformed from endless nightmares to a regular duty—not the most comfortable one but at least tolerable. When L1 incidents became owned by a dedicated team, the amount of time spent on call by the ML team was reduced even further.</p> 
  </div> 
  <div class="readable-text intended-text" id="p39"> 
   <p>Obviously, being pinged at 3:00 am on a Saturday is not ideal, which probably creates additional incentives to build a robust and well-monitored system, which could help minimize problems and build a schedule in a way that people know in advance the on-call “roster” and shift times. Any engineer who doesn’t see the value in proper logging and observability should be put on call for a long enough period to change their mind.</p> 
  </div> 
  <div class="readable-text intended-text" id="p40"> 
   <p>We believe that a person responsible for system design and implementation is also responsible for the system’s maintenance and support. They know the details better than anyone else, and they can forecast corner cases and suggest shortcuts to fix them. It doesn’t mean they have to be the only person on call, but they should prepare the system for the on-call rotation and provide the on-call team with the necessary tools and documentation.</p> 
  </div> 
  <div class="readable-text intended-text" id="p41"> 
   <p>Typical tools include </p> 
  </div> 
  <ul> 
   <li class="readable-text" id="p42"> Logs, metrics, alerts, and dashboards </li> 
   <li class="readable-text" id="p43"> System and related infrastructure configuration </li> 
   <li class="readable-text" id="p44"> System source code and documentation </li> 
  </ul> 
  <div class="readable-text" id="p45"> 
   <p>Access to production data is a bit trickier. It’s not always necessary to have access to production data to fix a problem; we have witnessed cases when privacy policies limit access. However, it’s usually good to have access to the production data to investigate the problem and find the root cause. Otherwise, logs and metrics should be detailed enough to help with that.</p> 
  </div> 
  <div class="readable-text intended-text" id="p46"> 
   <p>There should always be a runbook containing comments on how to fix the most common problems and a list of people to escalate the problem to if needed (e.g., there may be an outage on the vendor’s side, and an on-call engineer has to reach the CTO who can communicate with the vendor). Many problems occur with some cadence; they are reflections of either the tech debt or usage pattern. For example, imagine having a big customer with a spiky usage pattern, which causes the system to struggle with the load. For such a scenario, an on-call engineer may need a recipe on how to spin up additional instances of the system and how to scale it down when the load is back to normal.</p> 
  </div> 
  <div class="readable-text intended-text" id="p47"> 
   <p>Arising production problems provoke two derivatives: solving and learning. To avoid facing the same mistake repeatedly, make sure to set up a process of learning from failures. This can be arranged through retrospectives and postmortems. We recommend following the principle of <em>proportional response</em>—a set of postincident actions that should be sized similarly to the failure effect adjusted for a chance of a similar failure in the future. Some incidents are only worth a 10-minute discussion and adding a paragraph in the runbook. Arseny once triggered an outage so large that a CTO had to start an initiative named “Race for Reliable Releases,” which involved every engineering team in the company and improved the reliability across all systems, not only the ML system Arseny successfully broke. </p> 
  </div> 
  <div class="readable-text" id="p48"> 
   <h2 class="readable-text-h2" id="sigil_toc_id_209"><span class="num-string">16.2</span> Bus factor</h2> 
  </div> 
  <div class="readable-text" id="p49"> 
   <p>The bus factor is a measure of the risk of a project being disrupted by the loss of a single team member. The term <em>bus factor</em> comes from the hypothetical scenario of a team member being hit by a bus, which would suddenly and unexpectedly remove them from the project.</p> 
  </div> 
  <div class="readable-text intended-text" id="p50"> 
   <p>The CAP theorem states that any distributed data store can only offer two of the following three characteristics: </p> 
  </div> 
  <ul> 
   <li class="readable-text" id="p51"> <em>Consistency</em><em> </em><em>—</em>Every read request receives the most up-to-date response or an error. </li> 
   <li class="readable-text" id="p52"> <em>Availability</em><em> </em><em>—</em>Every request receives a valid response, but with no assurance that it contains the most recent data. </li> 
   <li class="readable-text" id="p53"> <em>Partition tolerance</em><em> </em><em>—</em>The system continues to operate even if communication between nodes is disrupted or lost. </li> 
  </ul> 
  <div class="readable-text" id="p54"> 
   <p>When a network partition failure occurs, a decision must be made between canceling the operation to enhance consistency at the cost of availability or proceeding with the operation to maintain availability while potentially compromising consistency.</p> 
  </div> 
  <div class="readable-text intended-text" id="p55"> 
   <p>We consider the team structure very close to that but with different criteria: efficiency and redundancy. As computer science describes, redundancy means having extra or duplicate resources available to support the primary system. It is a backup or reserve system that can step in if the primary system fails. The reserve resources are redundant as they are not being used if everything is working correctly.</p> 
  </div> 
  <div class="readable-text print-book-callout" id="p56"> 
   <p><span class="print-book-callout-head">note </span> Engineers often tend to solve organizational problems with technical solutions (in other words, treat people like software) just because that is what they excel at. Sometimes it is a good enough call because building software may indeed be simpler than getting along with people and aligning toward a challenging goal. However, a senior engineer should not be like a hammer seeing nails everywhere—they should choose the right tool for the problem, and sometimes one that is not technical at all.</p> 
  </div> 
  <div class="readable-text" id="p57"> 
   <p>How can this redundancy/efficiency problem affect the team structure? From what we have seen, the company/team/project scheme usually evolves from being efficient to becoming redundant. However, neither being too efficient nor too redundant is beneficial. </p> 
  </div> 
  <div class="readable-text" id="p58"> 
   <h3 class="readable-text-h3" id="sigil_toc_id_210"><span class="num-string">16.2.1</span> Why is being too efficient not beneficial?</h3> 
  </div> 
  <div class="readable-text" id="p59"> 
   <p>If you are too efficient and cover multiple factors with only a few people, you are at risk. Every single person on the team is irreplaceable, not only thanks to their experience but, unfortunately, also because they work at full capacity. If anything happens to at least one of your team members, the company (or a project) is in trouble. The only way to handle problems that arise with no drops in overall efficiency is by acts of heroism that are not in any way scalable and thus are considered an antipattern (<a href="https://mng.bz/YVyA;">https://mng.bz/YVyA;</a>see figure 16.3). </p> 
  </div> 
  <div class="browsable-container figure-container" id="p60">  
   <img alt="figure" src="../Images/CH16_F03_Babushkin.png" width="923" height="396"/> 
   <h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 16.3</span> The downside of ultraefficiency is extremely high vulnerability to external factors.</h5>
  </div> 
  <div class="readable-text" id="p61"> 
   <h3 class="readable-text-h3" id="sigil_toc_id_211"><span class="num-string">16.2.2</span> Why is being too redundant not beneficial?</h3> 
  </div> 
  <div class="readable-text" id="p62"> 
   <p>As opposed to efficiency, the main advantage of redundancy is extra capacity that provides reliability, security, room for improvement, and a margin to outlast a crisis. However, too much redundancy creates sloppiness, reduces trust between team members, and repels top performers, as it impairs the overall vibe and feeling of doing a meaningful and impactful job. </p> 
  </div> 
  <div class="readable-text intended-text" id="p63"> 
   <p>The two examples here are obvious corner cases that should be avoided. As soon as you feel that the team is approaching its capacity limit, it is worth thinking about expanding, which will be the right solution in the long run, despite the increased costs at the current moment.</p> 
  </div> 
  <div class="readable-text intended-text" id="p64"> 
   <p>The same rule will work the other way around: have just enough capacity to avoid working to exhaustion on the one hand but to be well-armed for potential crunching at peak load times.</p> 
  </div> 
  <div class="readable-text" id="p65"> 
   <h3 class="readable-text-h3" id="sigil_toc_id_212"><span class="num-string">16.2.3</span> When and how to use the bus factor</h3> 
  </div> 
  <div class="readable-text" id="p66"> 
   <p>We need to keep the right balance between efficiency and redundancy, and the first step to controlling something is the ability to measure; one of the very simple and well-known metrics is the bus factor.</p> 
  </div> 
  <div class="readable-text intended-text" id="p67"> 
   <p>The bus factor is calculated by counting the number of team members that would need to be lost before the project would be unable to continue. For example, a project with a bus factor of 1 would be in serious trouble even if one (specific) team member was lost.</p> 
  </div> 
  <div class="readable-text intended-text" id="p68"> 
   <p>Obviously, a bus factor of 1 is less than desirable, while a bus factor of 10,000 might be too much (though this might happen if you need many people with relatively similar scope, e.g., customer support); the final number depends on many variables: project importance, budget constraints, deadlines, expected turnover, and project owner’s anxiety/confidence. But as soon as you have a list of people accountable for different parts of the system/project, you have everything you need to calculate a bus factor, which includes areas and people accountable for them. The next thing you need to do is to find out how many other people know this area well enough. As a rule of thumb, a person accountable for the area knows everybody else who can (to some extent) replace them. With that in mind, you can calculate the bus factor, assess potential risks, and make the necessary decisions on hiring, moving, or collaboration activities to cross-pollinate the knowledge and address the fragility you might have on the project.</p> 
  </div> 
  <div class="readable-text intended-text" id="p69"> 
   <p>Of course, we can’t label people in a discrete manner as “they know how the system or its component works” versus “they don’t.” Typically, there are shades of knowledge within a system, and even when it is not possible to keep many engineers informed about everything, it is possible to spread this knowledge partially. This usually manifests through design/code/documentation review, pair programming sessions, and open hours where key members share their expertise.</p> 
  </div> 
  <div class="readable-text intended-text" id="p70"> 
   <p>This reasoning describes the balance between two criteria. Real decision-making, though, may and will require more criteria to take into account (e.g., not just team size but also its seniority balance and exposure to particular technologies).</p> 
  </div> 
  <div class="readable-text intended-text" id="p71"> 
   <p>For those who are interested in a simple yet practical framework on how to see the tradeoff between costs, system performance, and human capacity, we recommend getting familiar with the Rasmussen model for failures, nicely explained in this post: <a href="https://mng.bz/GNqO">https://mng.bz/GNqO</a>. Unlike the previous text, which focused on the team structure, the post reflects SRE’s perspective on the system tradeoffs: while people and hardware are very different, there are similar patterns in finding an optimal tradeoff.</p> 
  </div> 
  <div class="readable-text" id="p72"> 
   <h2 class="readable-text-h2" id="sigil_toc_id_213"><span class="num-string">16.3</span> Documentation</h2> 
  </div> 
  <div class="readable-text" id="p73"> 
   <p>We have already mentioned the importance of documentation. Unfortunately, documentation is usually highly underestimated and does not always receive the level of care and attention it deserves. Ironically, the word “documentation” often stands next to such words as “later,” “not now,” and “not urgent.” And when documentation is needed, it is usually either too late to prepare or extremely outdated.</p> 
  </div> 
  <div class="readable-text intended-text" id="p74"> 
   <p>The significance of documentation cannot be overstated. It serves as a means of knowledge transfer and onboarding new team members, helping to smooth the learning curve for newcomers and ensuring the system’s longevity. Comprehensive documentation allows someone outside of the responsible team to understand and run the system effectively. </p> 
  </div> 
  <div class="callout-container sidebar-container"> 
   <div class="readable-text" id="p75"> 
    <h5 class="callout-container-h5 readable-text-h5 sigil_not_in_toc">Campfire story from Valerii</h5> 
   </div> 
   <div class="readable-text" id="p76"> 
    <p>I have worked in different companies: offline and online food retail, eCommerce marketplaces, social network companies, and fintech. One thing I am very proud of is that—regardless of the company size, market, and maturity—the systems and organizations I built were able to withstand my departure and continued successful operation. Cornerstones to this were a smooth learning curve for newcomers, extensive documentation and thorough integration with other departments, and people knowing who was accountable for specific parts.</p> 
   </div> 
   <div class="readable-text" id="p77"> 
    <p>Once I received a message from my former peer at a big tech company asking how to reproduce a specific system component (a language model capable of generating synthetic reviews for sold items). My answer was brief—the documentation for that project is available under a specific tag, and it was! (Frankly, he didn’t even need me to find that out.) And not only was it available, but you could use it to reproduce the whole deployment process with a single command or inspect the code repo and datasets if needed. </p> 
   </div> 
   <div class="readable-text" id="p78"> 
    <p>Here is a very different example. Once I worked at a company where we had to re-create an on-chain analysis of the Bitcoin blockchain, which had initially been done 2 years ago, but some sources had changed and had to be replaced/updated. Unfortunately, there was almost no documentation, and what should have taken 2 weeks at most consumed almost 3 months (on-chain analysis is not very straightforward; for example, you might send 0.1 BTC, but it will look like you sent 1 and received 0.9, which is very different from the actual situation). A short time after this project was finished, most of the team members working there were laid off, alongside 30% of the company’s workforce. That was the second layoff within 6 months. Combined, they shrank the company’s population by almost 60%. It is hard to say if the primary reason for that was the lack of documentation, but I am sure that reinventing the wheel (in this case, retaking the same step anew) repeatedly is not the most efficient way of spending resources. That is why caching is so widespread in computer science. Unfortunately, the layoff happened when the project was finished, but the documentation wasn’t yet done. </p> 
   </div> 
  </div> 
  <div class="readable-text" id="p79"> 
   <p>Documentation also helps to achieve higher reliability by enabling smoother transitions when team members leave (bus factor) or new members join. Moreover, documentation facilitates collaboration across different departments and stakeholders, fostering a shared understanding of the system (accountability) and keeping each engineer more autonomous, thus agentic and productive.</p> 
  </div> 
  <div class="readable-text intended-text" id="p80"> 
   <p>While it may require additional time and effort upfront, documentation ultimately saves resources in the long run. It reduces the reliance on tribal knowledge, prevents the repetition of work, and minimizes the risk of costly errors and delays due to a lack of information. Documenting processes, procedures, configurations, and best practices empowers the team to work more efficiently and provides a foundation for continuous improvement. It should be prioritized from the beginning and not considered an afterthought. By acknowledging the importance of documentation and dedicating the necessary resources, teams can build resilient systems that can adapt to changes and continue to deliver value over time.</p> 
  </div> 
  <div class="readable-text intended-text" id="p81"> 
   <p>To some extent, our whole book is dedicated to why and how to write a particular sort of documentation, which captures important information about the system’s design, architecture, implementation details, and operational procedures. But a design document is a very specific piece of documentation and does not aim to become a holistic text covering all aspects of the system but rather an overview that helps to sync the team of system builders and stakeholders. That said, there is always space for other documents, including</p> 
  </div> 
  <ul> 
   <li class="readable-text" id="p82"> <em>User manuals and guides</em> that explain how to use a system and provide step-by-step instructions for common tasks, such as data preparation, model training, and prediction </li> 
   <li class="readable-text" id="p83"> <em>Cookbooks</em> that suggest simple ways to reach a goal using the system and provide code snippets, data examples, and specific steps to reach a target outcome </li> 
   <li class="readable-text" id="p84"> <em>Low-level technical specifications </em>and <em>API documentation </em>for developers that describe the underlying technical details of an ML system and give guidance on how to interact with the system on a programming level using functions and APIs </li> 
   <li class="readable-text" id="p85"> <em>Installation and configuration guides </em>that give instructions on how to set up and finetune ML environments, as well as explain dependencies, installation steps, and options for configuring software </li> 
   <li class="readable-text" id="p86"> <em>FAQs and troubleshooting guides </em>that address frequently asked questions related to using ML tools and suggest solutions or workarounds for common problems you may face during training, testing, or deployment </li> 
   <li class="readable-text" id="p87"> <em>Release notes </em>that detail changes applied in new software versions; explain new features, bug fixes, performance improvements, or known problems; and inform users about new releases and their impact on the general workflow </li> 
   <li class="readable-text" id="p88"> <em>Previous incident investigation reports</em> that analyze and document root causes of past problems or failures, share lessons learned and measures to avoid similar incidents, and improve system reliability and user confidence </li> 
  </ul> 
  <div class="readable-text" id="p89"> 
   <p>Investing time and effort in creating and maintaining documentation from the outset helps teams mitigate risks associated with knowledge gaps and dependencies on specific individuals. In the course of the book, you have seen two design documents that we hope have given you a good overview of the described systems.</p> 
  </div> 
  <div class="readable-text" id="p90"> 
   <h2 class="readable-text-h2" id="sigil_toc_id_214"><span class="num-string">16.4</span> Complexity</h2> 
  </div> 
  <div class="readable-text" id="p91"> 
   <blockquote>
    <div>
     Make everything as simple as possible, but not simpler.  
     <div class=" quote-cite">
       — Attributed to Albert Einstein 
     </div>
    </div>
   </blockquote> 
  </div> 
  <div class="readable-text" id="p92"> 
   <p>According to the second law of thermodynamics, the entropy of an isolated system left to spontaneous evolution cannot decrease with time. While originally <em>entropy</em> was a term used for physics, it was later adapted by information theory with almost the same meaning: entropy quantifies the amount of uncertainty or randomness. </p> 
  </div> 
  <div class="readable-text intended-text" id="p93"> 
   <p>Metaphorically speaking, software and ML systems follow the very same law: during time, entropy can only increase. At some point, it becomes too hard to handle, and that’s why old systems are often decomposed into sets of smaller systems (remember the fundamental theorem of software engineering from section 13.1) to be maintainable by teams of decently intelligent people, not generational talents. Adding a new level of abstraction “hides” the entropy but doesn’t really reduce its level across the whole stack. </p> 
  </div> 
  <div class="readable-text intended-text" id="p94"> 
   <p>There are many pieces of collective consciousness stating similar ideas: the YAGNI (“You aren’t gonna need it”) approach from the extreme programming culture, the KISS (“Keep it simple, stupid”) principle that originated in the US Navy in the middle of the 20th century, and even Occam’s razor from as far back as medieval ages. All these ideas pursue the same goal: limit complexity.</p> 
  </div> 
  <div class="readable-text intended-text" id="p95"> 
   <p>At the same time, the software engineering culture tends to land on the opposite side of the spectrum, as expressed in acronymic proverbs like DRY (“Don’t repeat yourself”). At first glance, those are controversial: following DRY suggests introducing more layers of abstraction, and that is exactly one of the (or rather the only) sources of complexity. </p> 
  </div> 
  <div class="readable-text intended-text" id="p96"> 
   <p>Imagine writing a simple code snippet computing a well-known metric across multiple datasets. A typical code set would contain maybe three functions: one reads the data, the next one calculates the metric, and the final one orchestrates the execution, running both functions in a loop and saving the result. </p> 
  </div> 
  <div class="readable-text intended-text" id="p97"> 
   <p>Now, let’s imagine two sides of the spectrum: too-simplistic code on the one hand and overcomplicated code on the other hand, which execute the same thing. The former could be written by a person who doesn’t know much about loops and functions; they would just write it by instruction: read file A, calculate metric for A, save metric for A, read file B, etc. Overcomplicated code would contain some metaprogramming and other complex patterns. While they are completely different in nature, both would make the code readability worse. </p> 
  </div> 
  <div class="readable-text intended-text" id="p98"> 
   <p>This is a trivial example you can find in almost every software engineering textbook that teaches how to write clean code. But the same principle is applicable on a larger scale. Imagine solving the following problem: your company wants to help the customer support team prioritize the most urgent cases to help the most unhappy customers first.</p> 
  </div> 
  <div class="readable-text intended-text" id="p99"> 
   <p>A typical solution for this problem these days would be to use a foundation large language model with a tailored prompt to classify messages into several urgency buckets. Before the large language model revolution, the proportional baseline would be to make a simplistic model (like a logistic regression on top of a bag of words) to run the classification so it covers the majority of urgent messages. It would also need some engineering efforts (e.g., building data pipelines to fetch the training set and labeling it with the customer support team, connecting the model with customer service software to propagate these labels and visualize them in the UI, etc.).</p> 
  </div> 
  <div class="readable-text intended-text" id="p100"> 
   <p>A deviation into unreasonable simplicity would be to build a baseline with several ifs and regular expressions. This solution will definitely work for a while, but relatively soon your colleagues will be as unhappy as a customer who paid for the product twice because a glitch requested the company to roll back the transaction, and for some unclear reason, your model classified the ticket as “low priority.”</p> 
  </div> 
  <div class="readable-text intended-text" id="p101"> 
   <p>An overcomplicated solution can include many components united by the same word: <em>irrelevant</em>. You can bring multiple complicated natural language understanding models trained from scratch, cover them with some research to make them work in a few-shot scenario, and polish them with a calibration layer. Complexity can be not ML-specific but skewed into engineering as well: instead of having a couple of simple APIs, an engineer can use all the buzzwords they know of to make the system as fault-tolerant as spaceship firmware and as scalable as Google’s search engine, ignoring the fact it should only process dozens of messages per day.</p> 
  </div> 
  <div class="readable-text intended-text" id="p102"> 
   <p>All kinds of systems—including nonsoftware ones—suffer from complexity. The additional layer of software complexity is its constant evolution. When you’re building a house, you won’t be adding extra rooms on top of it a month after finishing the roof. Adding new features to a software system, though, is a much more commonly applied practice. The complexity of data-focused systems increases because of constant problems related to data drifts. ML systems are even more complex—some models are nonlinear black boxes by design, and this doesn’t make things easier.</p> 
  </div> 
  <div class="readable-text intended-text" id="p103"> 
   <p>At the very end of the book, we’d like to once again refer to chapters 2 and 3, covering problem understanding and preliminary research. Some complexity is unavoidable, but a big share of excessive complexity is caused by misses on these stages: poor understanding of the problem, surface-level research, setting irrelevant goals, and not covering obvious risks from the very beginning. These can lead to a snowball of poor decisions and increased complexity.</p> 
  </div> 
  <div class="readable-text intended-text" id="p104"> 
   <p>When you need to cross a river, a reliable paddle boat can be enough. You could even equip it with a motor to speed up your cross-river journeys, but there is no way of evolving this boat for transporting thousands of people across the ocean (see figure 16.4). At the same time, those who start assembling a cruise ship when the traveling distance does not exceed a couple of miles can never reach the goal. Many ML systems are doomed for reasons related to this metaphor: their designers either try to evolve a primitive system with bells and whistles to meet rather challenging goals or start building a spacecraft with no good reasoning and get fired even before the first phase of construction is ready. <span class="aframe-location"/></p> 
  </div> 
  <div class="browsable-container figure-container" id="p105">  
   <img alt="figure" src="../Images/CH16_F04_Babushkin.png" width="1100" height="594"/> 
   <h5 class="figure-container-h5 sigil_not_in_toc"><span class="num-string">Figure 16.4</span> Just like a basic model will end up underperforming and failing to meet the project goals, an overkill solution will devour valuable resources of a business.</h5>
  </div> 
  <div class="callout-container sidebar-container"> 
   <div class="readable-text" id="p106"> 
    <h5 class="callout-container-h5 readable-text-h5 sigil_not_in_toc">Campfire story from Arseny </h5> 
   </div> 
   <div class="readable-text" id="p107"> 
    <p>I failed the deadline of finalizing this chapter because I was too busy with my main job and because of my own smarty-pants decision in the past. Three years ago, I needed to test a part of the system that was supposed to run the model in two environments: locally and cloud-based. The test was straightforward: run the same thing in both spaces and assert the results are equal. But I was chasing to save some milliseconds and thus made two calls run concurrently in separate threads. That was smart and effective! Years passed, the codebase evolved, new features were shipped, the infrastructure changed a lot, and one of these infrastructural changes changed the way things are supposed to work in the cloud. So you could expect this test to start failing. However, Python exceptions in threads are not implicit, so a test failure in this situation leads to a barely relevant message. As a cherry on top, these tests were also executed concurrently, which hid the real problem even further. An unnecessary complexity took a full day of my work to uncover this problem. </p> 
   </div> 
   <div class="readable-text" id="p108"> 
    <p>This story omits some engineering details like non-typical CI configuration, but even when simplified, it demonstrates that there is no single root cause of this wasted time—it is more like death by a thousand cuts. As a popular list, “How Complex Systems Fail” (<a href="https://how.complexsystems.fail/">https://how.complexsystems.fail/</a>), says, “Post-accident attribution to a ‘root cause’ is fundamentally wrong.” There was not a single poor decision but a combination of suboptimal choices. The combinatorics is not on your side: even when most of the decisions related to the system are optimal, an enormous number of combinations in a complicated system will lead to a growing number of incidents. All you can do is reduce this number together with the effect of each small failure.</p> 
   </div> 
  </div> 
  <div class="readable-text" id="p109"> 
   <h2 class="readable-text-h2" id="sigil_toc_id_215"><span class="num-string">16.5</span> Maintenance and ownership: Supermegaretail and PhotoStock Inc.</h2> 
  </div> 
  <div class="readable-text" id="p110"> 
   <p>Throughout the book, we have concluded each chapter with a case study illustrating the chapter’s relevant design-document section for Supermegaretail and PhotoStock Inc. This makes little sense in this case, as it would have required making up a couple dozen fake first and last names. We limit ourselves to general considerations about how maintenance would go in both examples.</p> 
  </div> 
  <div class="readable-text intended-text" id="p111"> 
   <p>Since Supermegaretail is a large corporation with thousands of employees and has a high level of bureaucratization and complex work processes, while its key business units are predominantly nontechnical, an important role in a project’s success lies in the successful coordination of all stages with stakeholders at each level of the hierarchy. Thus, the basis for the effective postrelease operation of the system would be a detailed RACI matrix that would include the company’s employees involved in the project, as well as lists of sign-offs from the delivery team and executive and business teams.</p> 
  </div> 
  <div class="readable-text intended-text" id="p112"> 
   <p>On the other hand, PhotoStock Inc. is a fairly small, purely tech-based company, and the specificity of custom search engines working with millions of images implies continuous load on the system with regular peak loads. The search engine is both an ML-heavy and infrastructure-heavy project. As highlighted before, it requires extensive cross-team collaboration. Given that there are four core components (API handlers, index, ranking models, internal tools), we would want to make sure that</p> 
  </div> 
  <ul> 
   <li class="readable-text" id="p113"> There is a senior engineer directly responsible for each component. </li> 
   <li class="readable-text" id="p114"> Those engineers have a fair visibility of other components. </li> 
  </ul> 
  <div class="readable-text" id="p115"> 
   <p>With that in mind, two levels of on-call rotation would be the optimal solution:</p> 
  </div> 
  <ul> 
   <li class="readable-text" id="p116"> The primary on-call engineer is first to respond to any incident. </li> 
   <li class="readable-text" id="p117"> The primary on-call engineer can escalate specific problems to component on-call engineers. </li> 
  </ul> 
  <div class="readable-text" id="p118"> 
   <p>As we said back in chapter 4, the design document is a living thing, and the maintenance section is to be added and filled in last, not only because, at this stage, you have a complete vision of your ML system but also because by this point you have managed to build connections with representatives of other teams and units and have an understanding which personalities will be included in the working group of your project.</p> 
  </div> 
  <div class="readable-text" id="p119"> 
   <h2 class="readable-text-h2" id="sigil_toc_id_216">Summary</h2> 
  </div> 
  <ul> 
   <li class="readable-text" id="p120"> A person responsible for system design and implementation is also responsible for the system’s maintenance and support. </li> 
   <li class="readable-text" id="p121"> Be sure to know the areas of responsibility and the people assigned to these roles. Even more importantly, be explicit in reminding those people of their respective roles, as it is much more valuable than being implicit in the hopes that everybody is on the same page. </li> 
   <li class="readable-text" id="p122"> To follow the growing reach of your system, remember to provide an on-call rotation to respond to any critical incidents. </li> 
   <li class="readable-text" id="p123"> Always look for a tradeoff between the efficiency and redundancy of your team to avoid working to exhaustion and, at the same time, maintain enough capacity to withstand peak load times. </li> 
   <li class="readable-text" id="p124"> Keep every piece of documentation for your system updated and available to any engaged parties. While it may require additional time and effort up front, documentation ultimately saves resources in the long run. </li> 
   <li class="readable-text" id="p125"> Start small, improve a thing or two, build trust, and then continue with higher-effect changes. It’s very likely you will get more support from your colleagues and gather more implicit knowledge about the system while doing so, which will help you to make better decisions. </li> 
   <li class="readable-text" id="p126"> Try to avoid overcomplicating your solution. Excessive complexity either can be a result of personal ambitions or can indicate a poor understanding of the problem, surface-level research, setting irrelevant goals, and not covering obvious risks from the very beginning. </li> 
  </ul>
 </div></div></body></html>