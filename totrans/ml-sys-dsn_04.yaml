- en: 4 Design document
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 4 设计文档
- en: This chapter covers
  id: totrans-1
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 本章涵盖
- en: The most common myths around the design document
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设计文档周围最常见的神话
- en: Defining antigoals for an even sharper focus on core objectives
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 定义反目标以更尖锐地关注核心目标
- en: Drafting a design document based on the information available
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 根据现有信息起草设计文档
- en: Reviewing a design document
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 审查设计文档
- en: The evolution of a design document
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设计文档的演变
- en: Once you have defined the problem your system should solve, as well as a list
    of stakeholders, and have a rough understanding of what technologies and solutions
    would be most appropriate for the product, as described in chapter 3, it is time
    to prepare a design document.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你定义了系统应解决的问题、利益相关者列表，以及对于产品最合适的技术和解决方案的初步理解，如第3章所述，就到了准备设计文档的时候了。
- en: It is worth noting here that there is no set-in-stone order of actions at the
    early stage of creating a machine learning (ML) system. You can start preparing
    a design document as soon as you’ve identified the problem and goals (especially
    if you work in a startup, where the speed of delivery is often more important
    than following processes). But since this book is presented as a checklist, the
    list of actions is also displayed in a traditional sequence.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 值得注意的是，在创建机器学习（ML）系统的早期阶段，并没有固定的行动顺序。一旦你确定了问题和目标（尤其是在初创公司工作，交付速度往往比遵循流程更重要的情况下），你就可以开始准备设计文档。但鉴于本书以清单的形式呈现，行动列表也以传统顺序展示。
- en: As one of the authors’ managers once said, no fancy recommendation algorithm
    can beat a customer with a shopping list. These people have a goal and a plan
    for achieving it. Nothing can stop them.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 就像一位作者的管理者曾经说过的那样，没有任何花哨的推荐算法能打败一个拿着购物清单的客户。这些人有一个目标和实现它的计划，没有什么能阻止他们。
- en: If you think about it, writing code is just providing a specific set of instructions
    to achieve a particular goal. In a sense, a design document is a meta-algorithm
    set to accomplish a specific goal, with the involvement of many subalgorithms.
    Still, the design document is being regularly challenged by many as either one
    of the horsemen of bureaucratization or a rudiment used out of inertia.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你仔细想想，编写代码只是提供一组特定的指令以实现一个特定的目标。从某种意义上说，设计文档是一个元算法集，用于实现一个特定的目标，其中涉及许多子算法。尽管如此，设计文档仍然被许多人质疑，要么是官僚化的四个恶兆之一，要么是惯性使用的基础。
- en: In this chapter, we will examine the most common myths around the design document.
    We will introduce and define the concept of antigoals as additional guidelines
    that lead you toward the project’s objectives, and we will start the practical
    part of this book, represented by two design documents based on close-to-real-life
    scenarios.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将检查设计文档周围最常见的神话。我们将介绍并定义反目标的概念，作为引导你朝着项目目标前进的额外指南，并将开始本书的实践部分，由基于接近现实生活场景的两个设计文档代表。
- en: 4.1 Common myths surrounding the design document
  id: totrans-12
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 4.1 围绕设计文档的常见误区
- en: Over the years, the design document has seen a number of false assumptions and
    misinterpretations that may prevent you from putting together a well-organized
    paper appropriate for your project. Next we’ll examine the most common misconceptions
    and explain why you shouldn’t dwell on them.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在过去的几年里，设计文档经历了许多错误的假设和误解，可能会阻止你为项目准备一份有组织、合适的论文。接下来，我们将检查最常见的误解，并解释为什么你不应该过分关注它们。
- en: '4.1.1 Myth #1\. Design documents work only for big companies but not startups'
  id: totrans-14
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 4.1.1 误区#1\. 设计文档只适用于大公司，不适用于初创公司
- en: 'You could argue that dedicating part of your workload to preparing design documents
    would make only sense for big companies. There is a fair premise in this counterpoint:
    mature organizations need to invest more time and resources into writing design
    documents compared to a startup with a dozen employees. It doesn’t mean, though,
    that small companies should prepare no design documents at all: as a well-known
    quote says, “Plan is nothing; planning is everything.” The beauty of writing a
    design document lies in revealing blind spots in your vision, on both the product
    side and the technical side, which will save you a lot in the midterm, especially
    if you cut off irrelevant data. For the latter, we recommend applying the method
    we call “antigoals,” which we will dedicate a separate section to later.'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能会认为，将部分工作量用于准备设计文档只对大型公司有意义。在这个反论点中有一个合理的假设：成熟的组织需要投入更多的时间和资源来编写设计文档，与拥有十几名员工的初创公司相比。但这并不意味着小型公司应该完全不准备设计文档：正如一句著名的谚语所说，“计划没有用；规划才有用。”编写设计文档的美丽之处在于揭示你在产品和技术方面的盲点，这将让你在中期内节省很多，尤其是如果你切掉了不相关的数据。对于后者，我们推荐应用我们称之为“反目标”的方法，我们将在稍后的单独章节中详细介绍。
- en: 'When the book was in early access, there was a common comment shared by our
    early readers: “Well, this is good, but that is not how it works in startups.”
    While agreeing that startups’ delivery cadence is different, we still stick to
    the idea that the design phase is necessary. It is true that cofounders and early
    engineers can find their consensus during a coffee break, whereas a massive corporation
    would waste 6 months on the same scope. We also agree that writing formal docs
    may be inefficient, but that is not what we advocate for. A simple note with a
    short description can be enough as soon as you are sure it gets all collaborators
    on the same page. Ignoring good practices of software and ML engineering is fine
    while you’re hunting for a prize at a hackathon, but the hackathon style barely
    works at longer distances.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 当这本书处于早期访问阶段时，我们的早期读者有一个共同的评论：“嗯，这很好，但在初创公司中并不是这样运作的。”虽然我们同意初创公司的交付节奏是不同的，但我们仍然坚持设计阶段是必要的。确实，联合创始人和早期工程师可以在咖啡休息时间达成共识，而一个大型企业可能会在同一范围内浪费6个月的时间。我们也同意编写正式文档可能效率不高，但这并不是我们倡导的。一旦你确信它能让所有合作者达成一致，一个简单的笔记加上简短的描述就足够了。在黑客马拉松中寻找奖品时，忽略软件和机器学习工程的良好实践是可以的，但黑客马拉松风格在更长的距离上几乎不起作用。
- en: '4.1.2 Myth #2\. Design documents are efficient only for complex projects'
  id: totrans-17
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '4.1.2 误区 #2：设计文档仅适用于复杂项目'
- en: 'There’s a grain of truth to this statement if you look at a design document
    in its classic sense: a large, labor-intensive effort involving every detail of
    the final product, from general scope to risk validation upon deployment. After
    all, the compilation of such a document alone can take more time than the lifetime
    of the project itself!'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 如果从经典意义上来看设计文档：一个涉及最终产品所有细节的庞大、劳动密集型工作，从总体范围到部署后的风险验证，这个说法中确实有一丝真理。毕竟，仅编制这样一份文档本身可能需要的时间比项目的整个生命周期还要长！
- en: Typically, such an argument can come either from a person with a lack of flexibility
    or from an ardent opponent of the design document who is eager to use any argument
    in their favor.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，这样的论点可能来自缺乏灵活性的人，或者是一个热衷于反对设计文档、急于利用任何有利于自己的论据的坚决反对者。
- en: Practice shows that even for smaller projects, a well-structured design document
    ensures early identification of potential risks, serves as a reference for future
    enhancements if the project eventually expands, and, most importantly, helps prevent
    scope creep when every other stakeholder is tempted to add just one more feature.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 实践表明，即使是小型项目，一个结构良好的设计文档也能确保早期识别潜在风险，如果项目最终扩展，可以作为未来改进的参考，最重要的是，它有助于防止范围蔓延，当每个利益相关者都倾向于添加一个新功能时。
- en: Even simple initiatives can benefit from a design document with a proportional
    level of detail.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 即使是简单的倡议，也能从具有相应详细程度的设计文档中受益。
- en: '4.1.3 Myth #3\. Every design document should be based on a template'
  id: totrans-22
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '4.1.3 误区 #3：每个设计文档都应该基于模板'
- en: Many companies, especially well-established enterprises, maintain their recommended
    templates with a strict, rigid structure, and it can be useful, considering the
    scale of their businesses. However, we recommend avoiding setting design docs
    templates in stone. Based on our experience, the template should never be a sacred
    dogma. Such templates may try to serve too many goals all at once, thus getting
    bloated and discouraging people from preparing and studying those documents. That
    is why we recommend keeping the core template minimalistic and extending parts
    here and there depending on system-specific requirements and context.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 许多公司，尤其是那些已经建立起来的企业，会保持其推荐的模板具有严格、僵化的结构，考虑到他们的业务规模，这可能是有用的。然而，我们建议避免将设计文档模板固定化。根据我们的经验，模板永远不应该是神圣的教条。这样的模板可能会试图同时实现太多目标，因此变得臃肿，并使人失去准备和研究这些文档的动力。这就是为什么我们建议保持核心模板的简约性，并根据系统特定的需求和上下文进行扩展。
- en: At first glance, the process of creating a design document may seem straightforward
    and simple. In reality, right from the start, you will encounter a whole load
    of factors that will interfere with the process and set you several steps back
    if ignored.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 初看之下，创建设计文档的过程可能看起来直接且简单。实际上，从一开始，你将遇到许多因素，如果忽视它们，将会干扰过程并使你退后几步。
- en: 'Remember: your task is not to create a draft document and convince everyone
    of its purity and correctness. Your task is to find as many weak points as possible
    (including motivating your stakeholders to find them) so that eventually, after
    a number of iterations, you have a document that allows you to start developing
    your ML system.'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 记住：你的任务不是创建一个草案文档并说服每个人都相信其纯洁性和正确性。你的任务是尽可能多地找出弱点（包括激励你的利益相关者找出它们），这样最终，经过多次迭代，你将有一个文档，它允许你开始开发你的机器学习系统。
- en: '4.1.4 Myth #4\. Every design document should lead to a deployed system'
  id: totrans-26
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '4.1.4 误区 #4：每个设计文档都应该导致一个部署的系统'
- en: If you are an engineer and need to build a machine, you need to start with a
    blueprint. Other engineers will review it and provide feedback, which will probably
    lead to another iteration of blueprints—and another and another until your design
    is finally ready to be brought to life.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你是一名工程师，需要建造一台机器，你需要从蓝图开始。其他工程师将审查它并提供反馈，这可能会导致蓝图的其他迭代——一次又一次，直到你的设计最终准备好付诸实施。
- en: The same principle applies to designing ML systems. An ML system is a highly
    complex machine of interconnected domains that requires thorough preparation when
    your design document undergoes multiple iterations before implementation. Still,
    more often than not, a good design document leads to no ML project at all.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 同样的原则适用于设计机器学习系统。机器学习系统是一个高度复杂的互联领域机器，在实施前，你的设计文档需要经过多次迭代才能进行彻底的准备。然而，更常见的情况是，一个好的设计文档最终导致根本没有任何机器学习项目。
- en: 'This might sound absurd, but let’s imagine you’re set to choose between two
    options:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 这可能听起来很荒谬，但让我们想象你面临两个选项的选择：
- en: Spending 6 months working relentlessly on models, features, loss functions,
    and datasets, only to put your project on the shelf (where most ML projects end
    up finding themselves)
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在模型、特征、损失函数和数据集上不懈努力6个月，结果只是将你的项目放在架子上（这是大多数机器学习项目最终会发现自己所在的地方）
- en: Spending 2 to 4 weeks trying to describe
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 花费2到4周的时间试图描述
- en: Why are we doing this project?
  id: totrans-32
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们为什么要进行这个项目？
- en: How do we do it?
  id: totrans-33
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们如何做到这一点？
- en: Do we have everything we need?
  id: totrans-34
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们是否拥有所需的一切？
- en: Can we have a less efficient solution with less effort?
  id: totrans-35
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们能否用一个更不高效但更省力的解决方案？
- en: Is the desired result achievable?
  id: totrans-36
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 是否可以达到预期的结果？
- en: Realizing that 90% of results can be derived from two IF statements can be frustrating,
    but it is still much better than the first of the two options.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 发现90%的结果可以来自两个IF语句可能会令人沮丧，但仍然比两个选项中的第一个要好得多。
- en: 4.2 Goals and antigoals
  id: totrans-38
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 4.2 目标和反目标
- en: One of the goals of a design document is to reduce uncertainty about a problem
    by setting cornerstones and boundaries. Before the document is drafted, the level
    of understanding of both the problem and the solution is low and inconsistent
    among all involved parties. A technique that can help address such a problem is
    using antigoals—inverse statements that can help us narrow down both the problem
    space and the solution space.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 设计文档的一个目标是通过设定基石和边界来减少对问题的不确定性。在文档起草之前，所有相关人员对问题和解决方案的理解水平都较低且不一致。一种可以帮助解决此类问题的技术是使用反目标——这些逆命题可以帮助我们缩小问题和解决方案的空间。
- en: 'Each part of a design document can be viewed as an answer to multiple questions:
    what are the goals of a potential system, what are the key success criteria, what
    tech aspects should we focus on, how do we solve a given subproblem, etc. A rookie
    mistake would be to miss tradeoffs and enumerate endless goals for the system:
    for example, it should do X, Y, and Z; have high performance; be precise; be easy
    to maintain and cheap to develop; and be intuitively understandable. Obviously,
    it’s impossible to successfully fit all the good properties into one system, and
    you will require an approach to counterbalance this possible excessiveness.'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 设计文档的每一部分都可以被视为对多个问题的回答：潜在系统的目标是什么，关键成功标准是什么，我们应该关注哪些技术方面，我们如何解决给定的子问题，等等。一个新手错误就是忽略权衡，并为系统列举无休止的目标：例如，它应该做X、Y和Z；具有高性能；精确；易于维护且开发成本低；并且直观易懂。显然，不可能成功地将所有良好的属性都融入一个系统中，你需要一种方法来平衡这种可能的过度性。
- en: 'Setting antigoals allows us to strike out the aspects we don’t really care
    about that much and additionally highlight those we see as crucial. Let’s say
    we’re building a system that will be used internally, and the output artifacts
    are various reports to be read by the executive team and analysts. We can assume
    right off the bat that processing time won’t be critical for such a system—it’s
    only necessary to make it work fast enough that reports are ready by morning.
    Thus, “processing time” will be the first to join the list of antigoals so that
    we don’t bother ourselves with this parameter. Or imagine building a recommendation
    engine for a boutique store: you sure won’t need to support millions of items
    if the current number of goods contains only three digits (see figure 4.1), meaning
    excessive productivity is a no-go for the end solution.'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 设置反目标使我们能够划掉我们并不真正关心的方面，并额外突出我们认为至关重要的方面。比如说，我们正在构建一个将用于内部的系统，输出工件是供执行团队和分析人员阅读的各种报告。我们可以立即假设处理时间对于这样一个系统来说不会是关键——只需确保报告能在早上准备好即可。因此，“处理时间”将首先加入反目标列表，这样我们就不会在这个参数上浪费时间。或者想象一下为精品店构建推荐引擎：如果当前商品数量只有三位数（见图4.1），那么你肯定不需要支持数百万件商品，这意味着对于最终解决方案来说，过度的生产力是不行的。
- en: '![figure](../Images/CH04_F01_Babushkin.png)'
  id: totrans-42
  prefs: []
  type: TYPE_IMG
  zh: '![图](../Images/CH04_F01_Babushkin.png)'
- en: Figure 4.1 A shop with <1,000 goods for sale and low traffic should not aim
    for scalability when building a recommendation system, as almost any tech solution
    can handle its load these days.
  id: totrans-43
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图4.1 对于销售商品数量少于1,000件且流量较低的商店，在构建推荐系统时不应追求可扩展性，因为如今几乎任何技术解决方案都能处理其负载。
- en: Antigoals like this help us focus only on important aspects and drop the ones
    that have no positive effect on reaching the main goal of the system.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 这样的反目标有助于我们只关注重要方面，并放弃那些对实现系统主要目标没有积极影响的方面。
- en: 'The following example suggests what the lists of goals and antigoals would
    look like for a boutique store’s recommendation engine:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 以下示例说明了精品店推荐引擎的目标和反目标列表可能是什么样子：
- en: 'Goals:'
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 目标：
- en: Increased conversion from View to Add to Basket steps
  id: totrans-47
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从查看到加入购物车步骤的转化率提高
- en: Diverse recommendations for users
  id: totrans-48
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为用户提供的多样化推荐
- en: Low latency for users
  id: totrans-49
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为用户提供的低延迟
- en: 'Antigoals:'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 反目标：
- en: Scalability in terms of the number of goods processed
  id: totrans-51
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 以处理商品数量为尺度的可扩展性
- en: Scalability in terms of concurrent users
  id: totrans-52
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 以并发用户数量为尺度的可扩展性
- en: Support for new goods categories
  id: totrans-53
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持新的商品类别
- en: 'A similar logic is applicable to other blocks of a design document. If you
    formed an idea on implementation and later realized it had an intrinsic critical
    flaw, it would make sense to mention this issue in the document as a counterexample.
    Imagine you are designing a scalable system and considered using cloud infrastructure
    intensively until you learned that the biggest potential customer has strict limitations
    on using its own hardware for privacy reasons. In this case, a single sentence
    like “Cloud solution X could be a good option for data storage, but not applicable
    in this case because of Y’s cloud privacy restrictions” can set important limitations
    and may spark ideas on alternative tech implementations: “If X is fine from the
    technical perspective, are there open source X alternatives that can be installed
    on our own servers?”'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 类似的逻辑也适用于设计文档的其他部分。如果你在实施过程中形成了一个想法，后来发现它存在内在的致命缺陷，那么在文档中提及这个问题作为反例是有意义的。想象一下，你正在设计一个可扩展的系统，并考虑大量使用云基础设施，直到你了解到最大的潜在客户由于隐私原因对其硬件的使用有严格的限制。在这种情况下，一句像“云解决方案X可能是一个好的数据存储选项，但由于Y的云隐私限制，不适用于这种情况”的话，可以设定重要的限制，并可能激发对替代技术实现的思考：“如果X从技术角度来看是可行的，那么是否有可以安装在我们自己服务器上的开源X替代方案？”
- en: Antigoals should not be considered the main source of information in your design
    document but can become a spice that adds a missing flavor, growing into an essential
    part of the document’s structure.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 目标缺失不应该被视为设计文档中的主要信息来源，但可以成为增添缺失风味的调料，逐渐成为文档结构的重要组成部分。
- en: Questionable goals and their effect on the end result
  id: totrans-56
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 有疑问的目标及其对最终结果的影响
- en: We have two stories to highlight how unclear goal setting can affect the development
    of an ML system.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 我们有两个故事来强调目标设定不明确如何影响机器学习系统的发展。
- en: In 2016, Valerii worked in the collection department of a large bank. By that
    time, the bank’s management had decided to introduce ML into its daily routine
    and lean on algorithmic support instead of operating with a set of rigid rules
    and gut feelings. One of Valerii’s first tasks was to create a model picking the
    next user the bank must reach to maximize output—a user who can be activated by
    an incentive (a promise to pay, fee waiver, discount). The existing process involved
    a lot of manual work, yielding a conversion ratio of around 50%. The new process
    involving a pretty basic nonlinear model on a set of around 100 engineered features
    that provided astonishingly better results of 80% conversion was tested within
    the next 2 months, while the old process was still providing 50%.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 2016年，瓦列里在一个大型银行的收款部门工作。到那时，银行的管理层已经决定将机器学习引入其日常运营，并依赖算法支持而不是依靠一套僵化的规则和直觉。瓦列里的一项首要任务是创建一个模型，选择银行必须接触的下一位用户以最大化产出——一个可以通过激励（支付承诺、费用豁免、折扣）激活的用户。现有的流程涉及大量的人工工作，转换率大约为50%。在接下来的两个月内，测试了一个基于大约100个工程特征的相当基本的非线性模型，其结果令人惊讶地达到了80%的转换率，而旧的流程仍然提供50%的转换率。
- en: The team was happy and excited to present the results to their senior vice president.
    The second after we finished the presentation, she said, “What’s so special about
    these clients? I want to know their motivation.” Addressing such a question in
    2016 with a nonlinear model on 100 features was not an easy task, not to mention
    that *what people do* and *why they do it* are two completely different things.
    For example, from the very beginning, the goal of a senior vice president is to
    understand *why*, and the goal of the business is to understand *who.* As such,
    the team must design the system and model completely differently, aiming to answer
    both questions, even if it would be less efficient than answering just one. Thus,
    a bad (or improper) goal at the very beginning set the team 3 months back.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 团队很高兴也很兴奋地向他们的高级副总裁展示结果。在我们完成演示的第二秒钟，她说：“这些客户有什么特别之处？我想知道他们的动机。”在2016年，用100个特征的非线性模型来回答这样的问题并不容易，更不用说人们的行为和他们的动机是两件完全不同的事情了。例如，从一开始，高级副总裁的目标就是理解“为什么”，而企业的目标就是理解“谁”。因此，团队必须完全不同地设计和构建系统及模型，旨在回答这两个问题，即使这样做可能不如只回答一个问题那么高效。因此，一开始设定的一个糟糕（或不恰当）的目标让团队落后了3个月。
- en: The second example covers the pricing algorithm we discussed in chapter 2\.
    At the very beginning, our goal was to maximize gross merchandise volume based
    on turnover while keeping the margin at a given level.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 第二个例子涵盖了我们在第二章中讨论的定价算法。一开始，我们的目标是基于周转率最大化商品总销售额，同时保持利润率在给定水平。
- en: At some point, the model found an ingenious way to achieve the goal. There was
    a boombox speaker in the product catalog, which the model started selling at a
    price lower than the purchase price. As a result, more speakers were sold in 24
    hours than in the previous 90 days. To be fair, this was still within the margin
    limit because we didn’t mind the margin being negative as part of the task.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 在某个时刻，该模型找到了一种巧妙的方法来实现目标。产品目录中有一个音响扬声器，该模型开始以低于购买价格的价格出售。结果，24小时内销售的扬声器数量比之前90天还要多。公平地说，这仍然在利润率限制之内，因为我们不介意利润率为负作为任务的一部分。
- en: However, you can imagine it was completely different from what we really wanted
    (the proper goal would be to increase the revenue while maintaining margin, affecting
    X% categories with Y% of SKUs in them with cannibalization no higher than Z).
    Sure, the revenue went up, and margins stayed within given limits, but in the
    end, everyone just ran to buy exactly that one model. No other speakers were bought.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，你可以想象这和我们真正想要的完全不同（正确的目标应该是增加收入同时保持利润率，影响X%的类别，其中包含Y%的SKU，且侵占率不超过Z）。当然，收入确实上升了，利润率也保持在给定的限制内，但最终，每个人都只是跑去购买那一个型号。没有购买其他扬声器。
- en: Luckily, that was a test launch with a small number of items under dynamic pricing,
    showing that the initial goal was badly designed and we needed to develop a more
    thorough approach to goal setting. Fortunately, the overall design was decoupled
    and easy to adjust.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 幸运的是，那是一个带有少量动态定价商品的测试发布，这表明初始目标设计得不好，我们需要开发一个更全面的目标设定方法。幸运的是，整体设计是解耦的，易于调整。
- en: 4.3 Design document structure
  id: totrans-64
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 4.3 设计文档结构
- en: In this section, we could have focused on theoretical information about the
    contents and structure of the classic design document, but the truth is, a design
    document you prepare for an ML system will hardly rely on practices applied in
    traditional software development. On top of that, its structure may vary from
    company to company, so we do not think it makes sense to dwell on layout nuances.
    Instead, we recommend focusing more on what items need to be covered. Plus, our
    goal is to showcase the design document as an entity within ML system design.
    For that reason, starting with this section and for the rest of the book, at the
    end of each chapter there will be a large practical block representing a part
    of a design document that incorporates the main message from the given chapter.
    We see it as a crucial component of this book, which will go side by side with
    theory and campfire stories while offering an example of applying real-life solutions
    to problems.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们本可以专注于关于经典设计文档内容和结构的理论信息，但事实是，为机器学习系统准备的设计文档几乎不会依赖于传统软件开发中应用的实践。除此之外，其结构可能因公司而异，所以我们认为过分关注布局的细微差别是没有意义的。相反，我们建议更多地关注需要涵盖的项目。此外，我们的目标是展示设计文档作为机器学习系统设计中的一个实体。因此，从本节开始，在本书的其余部分，每个章节的结尾将有一个大型的实践块，代表设计文档的一部分，它包含了给定章节的主要信息。我们认为这是本书的一个关键组成部分，它将与理论与篝火故事并驾齐驱，同时提供了一个将现实生活中的解决方案应用于问题的示例。
- en: In what follows, we will introduce you to two fictional cases, each with its
    own specifics, features, problems, and context. These two cases will form the
    basis of two different design documents, which will gradually grow and evolve
    from chapter to chapter, adding more depth and complexity. Eventually we will
    have two fully formed documents at our disposal.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的内容中，我们将向您介绍两个虚构案例，每个案例都有其独特的具体细节、特征、问题和背景。这两个案例将成为两个不同设计文档的基础，这些文档将随着章节的逐步展开和演变而逐渐增长和进化，增加更多的深度和复杂性。最终，我们将拥有两个完整的文档可供使用。
- en: In this section, we start to outline a design document for a project as it might
    have been written in real life. For this purpose, we introduce a fictional company,
    Supermegaretail, a retail company with a demand forecast project to launch.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们开始概述一个可能在实际生活中编写的项目设计文档。为此，我们引入了一个虚构公司，超级零售商（Supermegaretail），这是一家零售公司，有一个需求预测项目即将推出。
- en: In section 4.4, we give a very brief example of what the first chapter of a
    design document can look like. We will include only major topics; otherwise, it
    would not fit into a single book.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 在第4.4节中，我们给出了设计文档第一章节可能看起来的一个非常简短的例子。我们将只包括主要主题；否则，它将无法放入一本书中。
- en: NOTE  Any text in the body of the design doc written in *italics* contains our
    supporting comments and is not part of the document itself.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 备注：设计文档正文中用*斜体*写的任何文本都包含我们的支持性评论，但不属于文档本身。
- en: 'Design document: Supermegaretail'
  id: totrans-70
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 设计文档：超级巨零售（Supermegaretail）
- en: Problem definition
  id: totrans-71
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 问题定义
- en: i. Origin
  id: totrans-72
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: i. 来源
- en: Supermegaretail is a retail chain operating through a network of thousands of
    stores across different countries in various regions. The chain’s customers buy
    various goods, primarily groceries, household essentials, personal care, sports
    supplements, and many more.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 超级巨零售（Supermegaretail）是一家零售连锁店，通过遍布不同地区数千家商店的网络运营。该连锁店的客户购买各种商品，主要是杂货、家居必需品、个人护理、运动补充品等等。
- en: To sell these goods, Supermegaretail must purchase or produce them before delivering
    them to a store’s location. The number of purchased goods is the key figure that
    needs to be defined, and there are different possible scenarios here.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 为了销售这些商品，超级巨零售（Supermegaretail）必须在将它们运送到商店位置之前购买或生产它们。购买商品的数量是需要定义的关键数字，这里有不同的可能情况。
- en: 'For easier calculations, we assume that Supermegaretail bought 1,000 units
    of item A for the specific store:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 为了便于计算，我们假设超级巨零售（Supermegaretail）为特定商店购买了1,000个单位的产品A：
- en: Supermegaretail bought 1,000 units and sold 999 before the next delivery. This
    is an optimal situation. With only 0.1% left over, the retailer is close to the
    optimal revenue and margin.
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 超级巨零售（Supermegaretail）在下一批交付前购买了1,000个单位并售出了999个单位。这是一个理想的情况。只有0.1%的剩余，零售商接近最优的收入和利润。
- en: Supermegaretail bought 1,000 units and sold 100 before the next delivery. This
    is usually an awful situation for an apparent reason. Supermegaretail wants to
    sell almost as many units as it purchased without going out of stock. The more
    significant the gap, the larger Supermegaretail’s losses.
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 超级巨零售（Supermegaretail）在下一批交付前购买了1,000个单位并售出了100个单位。这通常是一个糟糕的情况，原因很明显。超级巨零售（Supermegaretail）希望售出与购买数量几乎相等的单位，而不缺货。差距越大，超级巨零售（Supermegaretail）的损失就越大。
- en: Supermegaretail bought 1,000 units and sold 1,000\. This should be considered
    a terrible situation because we don’t know how many units people would buy had
    they had the opportunity. It could be 1,001, 2,000, or 10,000\. An out-of-stock
    situation like that obscures our understanding of the world. Even worse—it drives
    customers from Supermegaretail to its competitors, where they can buy the goods
    with no shortages.
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 超级巨零售（Supermegaretail）购买了1,000个单位并售出了1,000个单位。这应该被视为一种糟糕的情况，因为我们不知道如果人们有机会购买，他们会购买多少个单位。可能是1,001个、2,000个或10,000个。这种缺货情况模糊了我们对世界的理解。更糟糕的是——它驱使客户从超级巨零售（Supermegaretail）转向其竞争对手，在那里他们可以购买到没有缺货的商品。
- en: 'An additional constraint is that we have a lot of perishable foods that can’t
    stay on store shelves for long: they’re either sold or wasted.'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个约束条件是我们有很多易腐食品，它们不能长时间放在商店货架上：它们要么被售出，要么被浪费。
- en: The project goal is to reduce the gap between delivered and sold items, making
    it as narrow as possible, while avoiding an out-of-stock situation with a specific
    service-level agreement to be specified further. To do that, we plan to forecast
    the demand for a specific item in a specific store during a particular period
    with the help of an ML system.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 项目目标是缩小已交付和已售出商品之间的差距，使其尽可能窄，同时避免出现缺货情况，具体的服务水平协议将在后续规定。为此，我们计划在ML系统的帮助下，预测特定商店在特定时期内特定商品的需求数量。
- en: ii. Relevance and reasons
  id: totrans-81
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: ii. 相关性和原因
- en: '*This section highlights the problem’s relevance, backed by exploratory data
    analysis.*'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: '*本节强调了问题的相关性，并基于探索性数据分析进行了支持。*'
- en: A. Existing flow analysis
  id: totrans-83
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: A. 现有流程分析
- en: What is the current way of ordering, delivering, and selling goods in Supermegaretail?
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 超级巨零售（Supermegaretail）目前是如何订购、配送和销售商品的？
- en: 'For Supermegaretail, the possible list might be as follows:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 对于超级巨零售（Supermegaretail）来说，可能的情况列表可能如下：
- en: 'Planning horizon for making a deal with goods manufacturers:'
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 与商品制造商达成交易的计划范围：
- en: It’s a 1-year deal with the opportunity to adjust 90 days ahead within the first
    9 months.
  id: totrans-87
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这是一个为期1年的合同，在前9个月的前90天内有机会进行调整。
- en: 'Additional discount with an increased volume:'
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 增加销量时的额外折扣：
- en: It’s an extra 2% off for every additional $20 million.
  id: totrans-89
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每增加2,000万美元，额外优惠2%。
- en: 'The number of distribution centers serving as logistics hubs between manufacturers
    and stores:'
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 作为制造商和商店之间物流枢纽的配送中心数量：
- en: There are 47 distribution centers around the country, making them a point of
    presence and aggregated entity for the forecast.
  id: totrans-91
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 全国共有47个配送中心，这使得它们成为预测的实体存在和聚合点。
- en: 'Delivery cadence between distribution centers and stores:'
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 配送中心和商店之间的交付节奏：
- en: Usually, every 2 days, there is a truck connecting the distribution center and
    the store.
  id: totrans-93
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通常，每两天就有一辆卡车连接配送中心和商店。
- en: 'Presence or absence of in-store warehouses:'
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 店内仓库的有无：
- en: There are no warehouses in most of the stores. However, the loading bay zone
    can be (and is) effectively used to store offloaded items for 2 to 3 days.
  id: totrans-95
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 大多数商店没有仓库。然而，装卸区可以（并且确实）有效地用于储存卸载的物品2到3天。
- en: Who and at what stage decides what and where to deliver?
  id: totrans-96
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 谁在什么阶段决定什么和在哪里交付？
- en: There’s a delivery plan coming down from the distribution center. A store’s
    manager can override and adjust it.
  id: totrans-97
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配送中心将有一个交付计划下达。商店经理可以覆盖并调整它。
- en: 'Forecast horizon:'
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 预测范围：
- en: The primary forecast horizon is week-long and month-long. However, a 1-year
    horizon is needed when dealing with goods manufacturers.
  id: totrans-99
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 主要预测范围是每周和每月。然而，在处理商品制造商时，需要一年的预测范围。
- en: 'Business owner of the process:'
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 流程的商务负责人：
- en: Logistics department
  id: totrans-101
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 物流部门
- en: Procurement department
  id: totrans-102
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 采购部门
- en: Operational department (store managers)
  id: totrans-103
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 运营部门（店长）
- en: B. How much does Supermegaretail lose on the gap between forecasted and factual
    demand?
  id: totrans-104
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: B. Supermegaretail在预测需求和实际需求之间的差距上损失了多少？
- en: Although it is relatively easy to calculate the loss due to overstock and expired
    items, it is much harder to calculate the loss due to out-of-stock situations.
    The latter can be estimated through either a series of A/B tests or an expert
    opinion, which is usually much quicker and cheaper than running those tests.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然计算因库存过剩和过期商品造成的损失相对容易，但计算因缺货情况造成的损失则要困难得多。后者可以通过一系列A/B测试或专家意见来估算，这通常比运行这些测试更快、更便宜。
- en: The overall loss can be approximated by summing up the two, providing an estimate
    of the gain with an ideal and nonachievable solution.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 总损失可以通过将这两个因素相加来估算，提供一个理想但无法实现的解决方案的收益估计。
- en: The initial calculation showed the loss to be around $800 million during the
    last year.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 初始计算显示，去年损失约为8亿美元。
- en: '*Starting from the following section of the design document (but only for this
    chapter), we’ve sketched questions to avoid this being too voluminous. Answering
    these questions will help you decide on further actions, and the answers are revealed
    in the later chapters as we go through the different stages of the system.*'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: '*从以下设计文档的下一部分（但仅限于本章）开始，我们已经勾勒出了一些问题，以避免内容过于庞大。回答这些问题将帮助您决定进一步行动，答案将在我们通过系统的不同阶段时在后面的章节中揭晓。*'
- en: C. Other reasons
  id: totrans-109
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: C. 其他原因
- en: Can other teams use our solution, making development more appealing and reasonable?
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他团队可以使用我们的解决方案，使开发更具吸引力和合理性吗？
- en: Perhaps we can sell demand forecast solutions to other retail companies (obviously
    not to direct competitors).
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 也许我们可以将需求预测解决方案卖给其他零售公司（显然不是直接竞争对手）。
- en: iii. Previous work
  id: totrans-112
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: iii. 前期工作
- en: '*This section covers whether this is an entirely new problem or something has
    been done before. Usually, it is a list of questions you ask to avoid doing double
    work or repeating previous mistakes.*'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: '*本节涵盖这是否是一个全新的问题，或者之前是否已经做过某些事情。通常，这是一系列你提出的问题，以避免重复工作或犯以前的错误。*'
- en: What if Supermegaretail was aware of this issue and had already implemented
    some demand forecast approach? It has various stores in different locations; its
    demand forecast is probably already pretty efficient. How does the company do
    it?
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果Supermegaretail已经意识到这个问题并实施了一些需求预测方法，会怎样？它在不同地点有各种商店，其需求预测可能已经相当高效。公司是如何做到的？
- en: Rolling window?
  id: totrans-115
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 滚动窗口？
- en: Experts committee?
  id: totrans-116
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 专家委员会？
- en: Rule of thumb + extra quick delivery?
  id: totrans-117
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 规则加额外快速交付？
- en: Do we have some limitations to consider that we can’t avoid, like minimum or
    maximum order size?
  id: totrans-118
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们是否有一些限制需要考虑，比如最小或最大订单量？
- en: Can we quickly improve the existing solution, or do we need an entirely new
    one?
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们能否快速改进现有的解决方案，或者我们需要一个全新的解决方案？
- en: What if the Supermegaretail current forecasting is good enough for some categories
    and useless for others? In other words, can we use a hybrid approach here, at
    least in the very beginning, and start from the least successful categories, where
    the existing gap between predictions and actual sales is the widest?
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果超级大零售的当前预测在某些类别中足够好，而在其他类别中却毫无用处，那会怎样？换句话说，我们是否可以在这里采用混合方法，至少在最初，从最不成功的类别开始，这些类别中预测和实际销售额之间的差距最大？
- en: If our approach unintentionally breaks something, it is not that dangerous.
    We are testing it for categories where we always had problems while not touching
    categories where everything is good.
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果我们的方法无意中破坏了某些东西，那并不危险。我们正在测试那些我们一直都有问题的类别，而没有触及那些一切都很顺利的类别。
- en: In other words, we need to run an extensive and fresh exploratory data analysis
    of the existing solution.
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 换句话说，我们需要对现有解决方案进行广泛的、全新的探索性数据分析。
- en: iv. Other issues and risks
  id: totrans-123
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: iv. 其他问题和风险
- en: Do we have a required infrastructure, or do we need to build it?
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们是否有必需的基础设施，或者我们需要构建它？
- en: If we pick something sophisticated, it can go crazy. What necessary checks and
    balances do we need to implement to avoid a disaster? Do we have a fallback in
    case something is broken?
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果我们选择复杂的东西，它可能会失控。我们需要实施哪些必要的检查和平衡措施来避免灾难？如果我们遇到问题，我们是否有回退方案？
- en: How sure are we that we can significantly improve the quality and reduce the
    manual load? Can we really solve this?
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们有多确定可以显著提高质量并减少人工负担？我们真的能解决这个问题吗？
- en: What is the price of a mistake? Out-of-stock and overstock most likely have
    different costs of errors.
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一次错误的代价是什么？缺货和过剩库存很可能有不同的错误成本。
- en: If we deal with an out-of-stock situation, can we handle increased traffic?
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果我们处理缺货情况，我们能否处理增加的流量？
- en: How often and on what granularity do we need to perform predictions?
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们需要多久进行一次预测？预测的粒度是多少？
- en: As you can see, even a brief overview of the problem to solve and research using
    the previously gathered data can easily force us to write a 10-page doc. This
    draft will help us decide if we need to go further or if it is better to stop
    right now and avoid a complicated ML solution.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 正如你所见，即使是解决问题的简要概述和使用之前收集的数据进行的研究，也可能会轻易地让我们写出10页的文档。这份草案将帮助我们决定是否需要进一步深入，或者最好是现在就停止，避免复杂的机器学习解决方案。
- en: 'The next section of this chapter is no less important: it gives a practical
    example of how to review a design document. If you’re new to ML system design,
    you probably haven’t reached the stage of your career where you have enough experience
    and credibility to be involved in this kind of working routine. However, stepping
    up to review your first design doc is just a matter of time, so it’s better to
    be prepared beforehand, and you will see some practical advice on the reviewing
    basics.'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的下一段内容同样重要：它提供了一个如何审查设计文档的实际例子。如果你对机器学习系统设计还不太熟悉，你可能还没有达到职业生涯中拥有足够经验和信誉以参与这种工作流程的阶段。然而，审查你的第一个设计文档只是时间问题，所以最好提前做好准备，你将看到一些关于审查基础的实际建议。
- en: 4.4 Reviewing a design document
  id: totrans-132
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 4.4 审查设计文档
- en: '*Audi alteram partem* [Let the other side be heard as well]—Latin proverb'
  id: totrans-133
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*Audi alteram partem* [让另一方也有发言权]——拉丁谚语'
- en: So far, we haven’t seen a draft design doc written by a single person that would
    be complete enough to implement right from the start. However, we’ve come across
    some really decent drafts, which is more than enough after the first iteration.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们还没有看到由单一个人编写的、足以从一开始就实施的完整草案设计文档。然而，我们已经遇到了一些非常好的草案，在第一次迭代之后，这已经足够了。
- en: This fact is essential and quite easily explained. Complex systems require input
    from many people with diverse expertise and backgrounds. As a design document
    author, part of your job is to make it more manageable for all the involved parties
    to navigate. Outlining your doc with chapters and subchapters will help domain
    experts see where to go from the beginning. Otherwise, the natural reaction for
    most people when they see a 10+ page doc is to close it and forget it.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 这个事实是至关重要的，并且很容易解释。复杂的系统需要来自具有不同专业知识和背景的许多人的输入。作为设计文档的作者，你的部分工作是使所有相关方都能更容易地导航。用章节和子章节概述你的文档将帮助领域专家从一开始就知道该去哪里。否则，当大多数人看到10页以上的文档时，他们的自然反应可能是关闭它并忘记它。
- en: 'Here come the first two critical points: the design doc must be accessible
    and visible to as many people as possible and easy to navigate for all participants.'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 下面是前两个关键点：设计文档必须对尽可能多的人可访问和可见，并且对所有参与者来说易于导航。
- en: As soon as people start reviewing any kind of content, they begin to criticize
    and offer alternatives. As an author, you want to encourage this type of behavior.
    After all, what are the chances you had the best and most appropriate design after
    the first iteration?
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 当人们开始审阅任何类型的内容时，他们就开始批评并提出替代方案。作为作者，你希望鼓励这种行为。毕竟，你在第一次迭代后就有最佳和最合适的设计的可能性有多大？
- en: 'Try to derive an explanation for each proposition/fixture, as they could emerge
    from different conditions:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 尝试为每个命题/固定点推导出解释，因为它们可能来自不同的条件：
- en: Reviewers have used this tool before and think it is the best tool for everything.
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 审稿人之前使用过这个工具，并认为它是处理所有事情的最佳工具。
- en: There are limitations in the current infrastructure. For example, we can’t provide
    real-time support but can do batch jobs every 60 seconds. Does it affect the flow?
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当前基础设施存在局限性。例如，我们无法提供实时支持，但可以每60秒执行批量作业。这会影响流程吗？
- en: We have people who can maintain technology A, but there’s nobody to maintain
    technology B. Thus, it is better to move from technology B, mentioned in the design,
    to technology A.
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们有能够维护技术A的人，但没有人维护技术B。因此，从设计中的技术B转移到技术A会更好。
- en: Reviewers want to boast about their knowledge of technologies and demonstrate
    this knowledge to a broader audience.
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 审稿人希望炫耀他们对技术的了解，并向更广泛的受众展示这种知识。
- en: Reviewers see another way to solve a given task and offer an alternative solution.
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 审稿人看到了解决特定任务的其他方法，并提出了替代方案。
- en: Try to understand the reasoning behind every input and solicit additional information
    until you fully understand the reasons. From our personal experience, the least
    helpful input (on the first iteration) would sound like “looks good to me.” Try
    to find a part that looks the most questionable to you and ask the reviewer about
    it, expressing your concerns. A generally good practice would be to have a list
    of concerns, including things you are not sure of, to target reviewers’ attention
    and facilitate requests.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 尝试理解每个输入背后的推理，并征求更多信息，直到你完全理解原因。根据我们的个人经验，第一轮迭代中最无帮助的输入可能听起来像是“看起来不错。”尝试找到你看起来最可疑的部分，并向审稿人询问，表达你的担忧。一个普遍的好做法是列出一系列担忧，包括你不确定的事情，以吸引审稿人的注意并促进请求。
- en: A popular failure mode for design documents is writing too generically. That
    is a huge drawback for a design doc, and often it is caused by the fact that a
    single person may not have enough context to fill in all the gaps. As an initial
    author, you need to facilitate the others’ inputs—for example, highlight some
    problematic areas with a lack of required information and encourage the reviewers
    to add missing parts of the puzzle.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 设计文档的一个常见失败模式是过于泛泛而谈。这对设计文档来说是一个巨大的缺点，通常这是由于一个人可能没有足够的背景知识来填补所有空白。作为初始作者，你需要促进他人的输入——例如，突出一些缺乏必要信息的问题区域，并鼓励审稿人补充拼图的缺失部分。
- en: 'We discussed how to create a design doc and what to expect from reviewers,
    but because the title of this section is “Reviewing a design document,” let’s
    try to reverse our suggestions and apply them from the reviewer’s standpoint:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 我们讨论了如何创建设计文档以及期望审稿人提供什么，但由于本节的标题是“审阅设计文档”，让我们尝试反转我们的建议，并从审稿人的角度应用它们：
- en: Take a look at the design doc and try to navigate through the outline. Which
    chapters do where you feel most confident about?
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 看一下设计文档，并尝试通过概述进行导航。哪些章节让你感到最有信心？
- en: If the outline does not exist, check if there are open questions/things to consider
    at the end of the doc.
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果文档中没有概述，检查文档末尾是否有开放的问题/需要考虑的事项。
- en: Ask the design doc owner to provide those if they don’t exist.
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果不存在，请要求设计文档的所有者提供这些信息。
- en: When adding a comment, try to answer for yourself what value you are adding
    and what you want to achieve with it.
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当添加评论时，尝试回答自己你添加了什么价值，以及你希望通过它实现什么。
- en: If you’re tempted to write “Looks good to me,” think twice. Are you doing that
    because it indeed looks good to you or because you just want to save time or rely
    on others’ opinions? If so, maybe it makes sense not to comment at all.
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果你倾向于写“看起来不错”，请三思。你是真的觉得它看起来不错，还是只是想节省时间或依赖他人的意见？如果是这样，也许最好根本不发表评论。
- en: 4.4.1 Design document review example
  id: totrans-152
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 4.4.1 设计文档审查示例
- en: The case we’ve chosen for the our second example design document is the stock
    photo company we mentioned in chapter 3\. Meet PhotoStock Inc., where we’ve been
    hired to build a modern search tool that will be able to find the most relevant
    shots upon customer text queries while providing excellent performance and displaying
    the most relevant images in stock.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 我们为第二个示例设计文档选择的情况是第3章中提到的股票照片公司。认识一下PhotoStock Inc.，我们被雇佣来构建一个现代化的搜索工具，该工具能够在客户文本查询的基础上找到最相关的照片，同时提供出色的性能并显示最相关的库存图片。
- en: 'The business is effectively a marketplace: photographers join the platform
    and upload their shots; customers who are looking for specific images for illustrative
    purposes (editors, designers, ad professionals) purchase rights for these photos.
    The marketplace makes money through commission from sales. The company is highly
    interested in making an effective search system on its website.'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 生意实际上是一个市场：摄影师加入平台并上传他们的照片；寻找特定图像用于说明目的的客户（编辑、设计师、广告专业人士）购买这些照片的权利。市场通过销售佣金赚钱。公司非常重视在其网站上建立一个有效的搜索系统。
- en: We provide part of a raw and poorly written design document based on what we
    discussed in the previous chapters and comment on it as if we were reviewing the
    document. This time, text highlighted in *italics* represents reviewers’ comments.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 我们基于前几章讨论的内容，提供了一部分原始且书写不佳的设计文档，并像审查文档一样对其进行评论。这次，用斜体加粗的文字表示审查者的评论。
- en: 'Design document: PhotoStock Inc.'
  id: totrans-156
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 设计文档：PhotoStock Inc.
- en: I. Problem
  id: totrans-157
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: I. 问题
- en: Ninety percent of PhotoStock Inc. users find images via the search bar on our
    website. It makes the search bar a core component of the user experience.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: PhotoStock Inc.的90%用户通过我们网站上的搜索栏找到图片。这使得搜索栏成为用户体验的核心组件。
- en: Currently, the search engine is based on a fuzzy search algorithm powered by
    Elasticsearch, with its index updated automatically every Monday night. We assume
    it processes synonyms poorly. In addition, users can apply additional filters
    from presets that are manually created by the product team.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，搜索引擎基于由Elasticsearch驱动的模糊搜索算法，其索引每周一晚上自动更新。我们假设它处理同义词的能力较差。此外，用户还可以应用产品团队手动创建的预设中的额外过滤器。
- en: Many users are not happy with the search quality, which is proven by customer
    interviews and analysis based on clickstream. Only a small portion of search sessions
    leads to a purchase.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 许多用户对搜索质量不满意，这一点通过客户访谈和基于点击流的分析得到了证明。只有一小部分搜索会转化为购买。
- en: '*Reviewer: How many users exactly? Please add links to existing reports and
    dashboards for more context.*'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: '*审查者：确切有多少用户？请添加链接到现有的报告和仪表板以提供更多背景信息。*'
- en: '*Reviewer: The search-to-purchase conversion is a function of many variables,
    and the relevancy of search results is just one of the factors. I suggest decomposing
    the problem further so we can estimate the missed revenue caused by poor search
    results more efficiently.*'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: '*审查者：搜索到购买的转化率是许多变量的函数，搜索结果的相关性只是其中一个因素。我建议进一步分解问题，这样我们可以更有效地估计由搜索结果不佳造成的损失收入。*'
- en: '*Reviewer: Please provide more information on the current search solution,
    as it’s not clear how it works and interacts with other systems. What are the
    main failure modes?*'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: '*审查者：请提供更多关于当前搜索解决方案的信息，因为它的工作方式和与其他系统的交互并不清楚。主要故障模式是什么？*'
- en: '*Reviewer: How do we measure user happiness? Please add specific criteria.*'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: '*审查者：我们如何衡量用户满意度？请添加具体标准。*'
- en: II. Goals
  id: totrans-165
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: II. 目标
- en: Increase the search-to-purchase conversion rate by 100%.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 将搜索到购买的转化率提高100%。
- en: '*Reviewer: Why by 100%? Are there any reasons for this exact level of increase?*'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: '*审查者：为什么是100%？有没有任何理由要达到这个确切的增长水平？*'
- en: '*Reviewer: As mentioned before, the search-to-purchase funnel is not only determined
    by search quality. Let’s narrow down the goals.*'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: '*审查者：如前所述，搜索到购买的漏斗不仅由搜索质量决定。让我们缩小目标范围。*'
- en: '*Reviewer: Are there any important nontechnical requirements like latency?*'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: '*审查者：有没有任何重要的非技术要求，比如延迟？*'
- en: '*Reviewer: How do we currently measure conversion? How can we measure that
    it has been increased by this effort?*'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: '*审查者：我们目前如何衡量转化率？我们如何衡量这项努力是否提高了转化率？*'
- en: '*Reviewer: Have you defined antigoals to highlight the zones we don’t need
    to focus on?*'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: '*审查者：您定义了反目标来突出我们不需要关注的区域吗？*'
- en: III. Risks
  id: totrans-172
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: III. 风险
- en: We can lose many loyal existing customers as they can’t follow their current
    behavior patterns.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可能会失去许多忠诚的现有客户，因为他们无法遵循他们当前的行为模式。
- en: If we release defective software, we can lose a significant source of revenue.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们发布有缺陷的软件，我们可能会失去一个重要的收入来源。
- en: '*Reviewer: Interesting point on behavior patterns. Are there any examples of
    how users have to adapt to dysfunctions of the search engine?*'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: '*审阅者：关于行为模式的一个有趣的观点。有没有用户如何适应搜索引擎缺陷的例子？*'
- en: '*Reviewer: With our infrastructure of blue-green deployment and A/B tests platform,
    we should be able to roll out the new system gradually; we should use it to mitigate
    such risks.*'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: '*审阅者：凭借我们的蓝绿部署和A/B测试平台的基础设施，我们应该能够逐步推出新系统；我们应该利用它来减轻此类风险。*'
- en: IV. References
  id: totrans-177
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: IV. 参考文献
- en: '[Link to YourPowerfulSearch, an enterprise-grade search system for marketplaces]'
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[链接到YourPowerfulSearch，一个面向市场的企业级搜索系统]'
- en: '[Link to an academic paper from the Bing Search Relevancy team]'
  id: totrans-179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[链接到Bing搜索相关性团队的学术论文]'
- en: '[Link to a Google Analytics dashboard showing various metrics related to a
    PhotoStock search]'
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[链接到Google Analytics仪表板，显示与PhotoStock搜索相关的各种指标]'
- en: '*Reviewer: Please add more internal search-related artifacts, such as PhotoStock
    BI dashboard and UX research.*'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: '*审阅者：请添加更多与内部搜索相关的工件，例如PhotoStock BI仪表板和UX研究。*'
- en: '*Reviewer: I believe that YourPowerfulSearch is not the only relevant solution
    in the market; can we get a wider overview? The same applies to the paper from
    Bing.*'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: '*审阅者：我相信YourPowerfulSearch不是市场上唯一的相关解决方案；我们能否获得更广泛的概述？Bing的论文也是如此。*'
- en: '*Reviewer: How can we estimate the influence of search relevancy on our commercial
    metrics? This can affect a possible budget a lot.*'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: '*审阅者：我们如何估计搜索相关性对我们商业指标的影响？这可能会对可能的预算产生很大影响。*'
- en: You can see some patterns in the comments, such as
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在评论中看到一些模式，例如
- en: Raising legitimate questions as early as possible
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 尽早提出合法的问题
- en: Suggesting missing parts either as questions or statements
  id: totrans-186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 建议缺失的部分，无论是以问题还是陈述的形式
- en: Early feedback at the design review stage can save a lot of time in the later
    stages. Questions should initiate and facilitate a healthy discussion and unlock
    better solutions and should never be aggressive or toxic.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 在设计评审阶段尽早提供反馈可以在后期阶段节省大量时间。问题应该启动并促进健康讨论，并解锁更好的解决方案，而不应该是具有侵略性或有害的。
- en: 4.5 A design doc is a living thing
  id: totrans-188
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 4.5 设计文档是一个活生生的东西
- en: 'This section was initially planned to be myth #5 in the list from the beginning
    of this chapter, but we believe this point is important enough to have its own
    spot as a separate section.'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 这个部分最初计划作为本章开头的列表中的第5个神话，但我们认为这个观点很重要，足以成为一个独立的章节。
- en: So why should there be no fear or hesitation in editing or criticizing a design
    doc at any stage? The answer is that a design doc is truly a living thing.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 那么为什么在任何阶段编辑或批评设计文档时都没有恐惧或犹豫呢？答案是设计文档确实是一个活生生的东西。
- en: 'Usually, the evolution of design docs looks like this:'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，设计文档的演变看起来是这样的：
- en: First iteration
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第一次迭代
- en: Feedback from peers
  id: totrans-193
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 同行的反馈
- en: Rewrite 60% of the doc
  id: totrans-194
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重写文档的60%
- en: Feedback from peers
  id: totrans-195
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 同行的反馈
- en: Rewrite 30% of the doc
  id: totrans-196
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重写文档的30%
- en: Feedback from peers
  id: totrans-197
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 同行的反馈
- en: Rewrite 10% of the doc
  id: totrans-198
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重写文档的10%
- en: Start implementing the system
  id: totrans-199
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 开始实施系统
- en: (Three months later) input from the real world
  id: totrans-200
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: （三个月后）来自现实世界的反馈
- en: Rewrite 30% of the doc
  id: totrans-201
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重写文档的30%
- en: With an evolution like that, you need to expect that the only time you could
    complete the design doc would be if you finished implementing the system, but
    even this is not guaranteed.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 这样的演变，你需要预期你能够完成设计文档的唯一时间是在你完成系统实施之后，但这也不一定保证。
- en: As soon as your system is implemented, life will expose its flaws, which you
    will have to address; or product managers decide they need new features, and the
    system has to be extended; or the government issues a new piece of legislation,
    which you have to consider; or there is an infrastructure migration or a new use
    case. You name it. To perform these changes, engineers need to understand the
    system and read design documents. By that time, a new pattern or technology could
    arise that perfectly fits the system.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你的系统实施，生活就会暴露其缺陷，你必须解决这些问题；或者产品经理决定需要新的功能，系统必须扩展；或者政府发布新的立法，你必须考虑；或者有基础设施迁移或新的用例。无论是什么情况。为了执行这些更改，工程师需要理解系统并阅读设计文档。到那时，可能已经出现了一种新的模式或技术，它完美地符合系统。
- en: If this is not the case, new features and refactoring need to be reflected in
    the design doc, bringing us to the design doc evolution mentioned earlier.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 如果情况不是这样，新的功能和重构需要反映在设计文档中，这把我们带到了前面提到的设计文档演变。
- en: That is why a design document is never over. It is a living thing, as long as
    you have a service it describes. Even if you leave the company, others need to
    take the banner from you, if they don’t want to end up with a completely unsupportable
    system.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 正因如此，设计文档永远不会结束。它是一个活生生的东西，只要它描述的服务存在。即使你离开了公司，其他人也需要从你那里接过旗帜，如果他们不想最终得到一个完全无法支持的系统。
- en: 'Rewriting a solid share of the design doc may seem discouraging, but it is
    something you can benefit from in the long run. For complex systems, it even makes
    sense to practice the “design it twice” approach—admit that your first design
    is likely not the best one, and design it twice, taking two radically different
    approaches. As practice shows, this approach can reveal hidden problems and opportunities.
    Let us quote *A Philosophy of Software Design* (Yaknyam, 2018) by John Outerhout
    (a nice book we recommend to feel the spirit of a good design):'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 重写相当一部分设计文档可能会让人感到沮丧，但从长远来看，这是一件你可以从中受益的事情。对于复杂的系统来说，甚至有理由实践“设计两次”的方法——承认你的第一个设计可能不是最好的，然后采用两种截然不同的方法进行设计。正如实践所表明的，这种方法可以揭示隐藏的问题和机会。让我们引用约翰·奥尔特豪特（John
    Outerhout）的《软件设计哲学》（Yaknyam，2018）：
- en: 'I have noticed that the design-it-twice principle is sometimes hard for really
    smart people to embrace. When they are growing up, smart people discover that
    their first quick idea about any problem is sufficient for a good grade; there
    is no need to consider a second or third possibility. This makes it easy to develop
    bad work habits. However, as these people get older, they get promoted into environments
    with harder and harder problems. Eventually, everyone reaches a point where your
    first ideas are no longer good enough; if you want to get really great results,
    you have to consider a second possibility, or perhaps a third, no matter how smart
    you are. The design of large software systems falls in this category: no-one is
    good enough to get it right with their first try.'
  id: totrans-207
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 我注意到，对于那些真正聪明的人来说，接受“设计两次”的原则有时是困难的。在他们成长的过程中，聪明的人会发现，对于任何问题，他们的第一个快速想法就足以获得好成绩；没有必要考虑第二个或第三个可能性。这使得他们很容易养成不良的工作习惯。然而，随着这些人变老，他们会被提升到更困难的环境中。最终，每个人都会达到一个点，即你的第一个想法不再足够好；如果你想取得真正出色的成果，你必须考虑第二个可能性，或者也许是一个第三个，无论你多么聪明。大型软件系统的设计就属于这一类：没有人足够聪明，能够第一次就做对。
- en: A good design (and a good design doc, respectively) should reduce various complexity
    aspects of the system, be it understanding, building, modifying, or maintaining.
    And if the system promises to be complex from the very beginning, spending additional
    time to reduce this complexity in advance via multiple iterations is often a good
    investment.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 一个好的设计（以及一个好的设计文档）应该减少系统的各种复杂性方面，无论是理解、构建、修改还是维护。如果系统从一开始就承诺要复杂，那么通过多次迭代提前减少这种复杂性通常是一个很好的投资。
- en: 'People who prefer building over thinking may feel irritated by this point:
    “Come on, first you suggest writing docs instead of writing code, and now you
    suggest doing it over and over again?” Well, it makes little sense to run many
    iterations once you no longer receive new information, and sometimes you can’t
    improve the design before some proof of concept is written. However, designing
    things twice is often a fair tradeoff between agility and preparedness.'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 倾向于建造而非思考的人可能会对此感到烦恼：“喂，你先是建议写文档而不是写代码，现在又建议反复做这件事？”好吧，一旦你不再收到新信息，多次迭代就没什么意义了，有时在写出一些概念证明之前，你甚至无法改进设计。然而，设计两次通常是敏捷性和准备性之间的一种公平权衡。
- en: Summary
  id: totrans-210
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 摘要
- en: Just like correctly set goals are the benchmark for your system, antigoals represent
    areas to avoid. Make sure to keep them in mind and have them pointed out.
  id: totrans-211
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 就像正确设定的目标是你的系统的基准一样，反目标代表了一些需要避免的区域。确保记住它们，并让它们被指出。
- en: A design document that is well put together will help you understand whether
    you need an ML system at all.
  id: totrans-212
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个组织良好的设计文档将帮助你理解你是否真的需要一个机器学习系统。
- en: Involve all your stakeholders in reviewing the draft design document.
  id: totrans-213
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 让所有利益相关者参与审查设计文档草案。
- en: When you see a “looks good to me” answer, always contact your colleague once
    again for clearer, more precise feedback. Vagueness at the draft stage will very
    likely lead to change requests at later stages.
  id: totrans-214
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当你看到“看起来不错”的回答时，总是再次联系你的同事，以获得更清晰、更精确的反馈。在草案阶段的不明确性很可能导致后期出现变更请求。
- en: If you’re initiating a review for your design document, encourage people to
    criticize the current ideas and suggest alternatives.
  id: totrans-215
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果你正在对你的设计文档进行评审，鼓励人们批评现有的想法并提出替代方案。
- en: Consider inviting reviewers with various backgrounds and experiences to gather
    varied feedback.
  id: totrans-216
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 考虑邀请具有不同背景和经验的审阅者，以收集多样化的反馈。
- en: While reviewing a design document, ask specifying questions to point out weak
    or unneeded parts.
  id: totrans-217
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在评审设计文档时，提出具体问题以指出薄弱或不必要的部分。
- en: Don’t be afraid of multiple iterations, as no first draft will ever reach the
    final stage without edits.
  id: totrans-218
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不要害怕多次迭代，因为没有任何初稿会在未经编辑的情况下达到最终阶段。
- en: Remember, a design doc is a living thing and will be subject to edits even after
    the launch of your system.
  id: totrans-219
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 记住，设计文档是一个活生生的东西，即使在你的系统发布后，也可能会受到编辑。
