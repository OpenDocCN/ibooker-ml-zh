- en: 2 Is there a problem?
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 2 是否存在问题？
- en: This chapter covers
  id: totrans-1
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 本章涵盖
- en: 'Problem space and solution space: which comes first?'
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 问题空间和解决方案空间：哪个先？
- en: Defining a problem as the most important step
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 定义问题作为最重要的步骤
- en: Defining risks and limitations
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 定义风险和限制
- en: Costs of a mistake
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 错误的成本
- en: To succeed in machine learning (ML) system design, you literally need to be
    an expert in multiple fields, including project management, ML and deep learning,
    leadership, product management, and software engineering. However, when stripped
    down to the bones, even the most complex and sophisticated solutions in ML system
    design will have the same framework and fundamentals as any other product.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 要在机器学习（ML）系统设计中取得成功，你实际上需要在多个领域成为专家，包括项目管理、机器学习和深度学习、领导力、产品管理和软件工程。然而，当剥去一切外在的装饰，即使在机器学习系统设计中最为复杂和精密的解决方案，也将与其他任何产品一样拥有相同的框架和基础。
- en: The variety and amount of sheer knowledge gained in recent years gives you unprecedented
    freedom to choose exactly the approach you want toward your ML system, but no
    matter how refined the instruments of your choice are, they’re no more than implementation
    mediums.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 近年来获得的丰富知识和数量给你提供了前所未有的自由，可以选择你想要的精确方法来构建你的机器学习系统，但无论你选择的工具多么精致，它们都不过是实现的中介。
- en: What are the business goals? How big is the budget? How flexible are the deadlines?
    Will the potential output cover and exceed overall costs? These are among the
    crucial questions that you need to ask yourself before scoping your ML project.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 业务目标是什么？预算有多大？截止日期有多灵活？潜在的输出是否能够覆盖并超过总体成本？这些问题是在确定你的机器学习项目范围之前你需要问自己的关键问题。
- en: But before you start addressing these questions, there is a paramount action
    that will lay the foundation for successful ML system design, and it’s *finding
    and articulating the problem your solution will solve (or help solve)*. This is
    a seemingly trivial point, especially for skilled engineers, but based on our
    own experience in the area, skipping this step in your preliminary work is deceptively
    dangerous. It goes even further when we realize that some problems cannot be solved
    on a proper level, due to either the current state of available technologies or
    the aleatoric uncertainty of the ill-posed problem. While in the first case, the
    problem can be a candidate for the future solution (e.g., today’s level of text
    generation would seem totally unachievable for an ML engineer in the early 2010s),
    the second case means the problem should not be tackled at all (e.g., one cannot
    build an algorithm that can beat casino roulette).
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 在开始回答这些问题之前，有一个至关重要的行动将为成功的设计机器学习系统奠定基础，那就是*找到并明确你的解决方案将解决的问题（或帮助解决的问题）*。这似乎是一个微不足道的问题，尤其是对于熟练的工程师来说，但根据我们在该领域的经验，在初步工作中跳过这一步是极具欺骗性的危险。当我们意识到一些问题由于现有技术的状态或不良设定问题的随机不确定性而无法在适当水平上解决时，这一点就更加明显。在前一种情况下，问题可能成为未来解决方案的候选（例如，今天的文本生成水平对于一个在2010年代初的机器学习工程师来说似乎是完全不可实现的），而在后一种情况下，则意味着根本不应该尝试解决这个问题（例如，无法构建一个能够击败赌场轮盘算法的算法）。
- en: In this chapter, we will cover the importance of knowing the problem before
    developing a solution; we will highlight risks and limitations you may face while
    defining a problem; and we will touch on what consequences can follow a mistakenly
    defined problem.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将讨论在开发解决方案之前了解问题的必要性；我们将强调在定义问题时可能面临的风险和限制；并且我们将简要提及错误定义问题可能带来的后果。
- en: 2.1 Problem space vs. solution space
  id: totrans-11
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 2.1 问题空间与解决方案空间
- en: I suppose it is tempting, if the only tool you have is a hammer, to treat everything
    as if it were a nail.—Abraham Maslow, American psychologist
  id: totrans-12
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 我想，如果你只有一把锤子，那么把所有东西都当作钉子来处理是很诱人的。——亚伯拉罕·马斯洛，美国心理学家
- en: Imagine a boss coming to an engineer with an exciting new idea for a mind-blowing
    feature (we’ve all been there). For the sake of illustration, let’s make the example
    more specific. Steve works as an ML engineer in a growing SaaS company. Steve’s
    boss, Linda, just got back from a meeting with Jack, VP of sales, on a problem
    his team has been dealing with—too many customer leads with too few managers to
    handle them. Jack wonders if the ML team could come up with an AI solution that
    would automatically rank customer leads from best to worst based on potential
    profit for the company. This would help the sales team pick potential cash cows
    first and handle remaining leads residually. On paper, the feature looks stunning.
    It seems like a no-brainer!
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 想象一下，一位老板带着一个令人兴奋的新想法来找工程师，这个想法将带来令人震撼的功能（我们都有过这样的经历）。为了说明，让我们使这个例子更加具体。史蒂夫是一家成长中的SaaS公司的机器学习工程师。史蒂夫的老板琳达刚刚从与销售副总裁杰克的一次会议回来，讨论他们团队一直在处理的问题——客户线索太多，而经理太少。杰克想知道机器学习团队能否提出一个AI解决方案，该方案能够根据公司潜在利润自动将客户线索从最好到最差进行排序。这将帮助销售团队首先挑选出有潜力的现金牛，并依次处理剩余的线索。从纸面上看，这个功能看起来非常出色。这似乎是一个不言而喻的选择！
- en: 'Steve, a young but meticulous specialist, immediately has numerous questions
    regarding this project. What’s the due date for delivery? How big is the dataset
    of existing leads to build an ML model around? What’s the maximum time allowed
    to score a lead? What accuracy do we expect? What information do we have about
    each lead? How fast should the system be? What exactly does a “promising lead”
    imply? Which sales system do we integrate our solution with? After some back-and-forth
    Q&A, Steve knows the following:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 史蒂夫，一个年轻但细致的专业人士，立即对这个项目提出了许多问题。交付的截止日期是什么时候？围绕现有线索构建机器学习模型的数据集有多大？评估一个线索的最大允许时间是多少？我们期望的准确度是多少？我们关于每个线索有什么信息？系统应该有多快？"有潜力的线索"究竟意味着什么？我们将解决方案集成到哪个销售系统中？经过一番问答，史蒂夫知道了以下信息：
- en: The dataset is currently fairly small (the company is a young startup).
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据集目前相当小（公司是一家初创企业）。
- en: Jack wants the tool to integrate with the existing customer relationship management
    (CRM) so that the company doesn’t spend money on new software and there’s no need
    to retrain the team.
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 杰克希望这个工具能够与现有的客户关系管理（CRM）系统集成，这样公司就不需要花费金钱购买新软件，也不需要重新培训团队。
- en: Luckily, there are no hard limits on processing time, which means a reliable
    real-time API is not required.
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 幸运的是，处理时间没有硬性限制，这意味着不需要一个可靠的实时API。
- en: The due date is the usual “the sooner, the better.”
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 截止日期是通常的“越早越好”。
- en: 'Steve gets back to his desk and starts scoping the project. “Okay, this looks
    easy. We can frame it as a ranking or classification problem, craft some features,
    train a model, expose an API, integrate, and deploy—that should be it.” However,
    two things still bother him:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 史蒂夫回到他的办公桌前，开始规划项目。“好吧，这看起来很简单。我们可以将其视为一个排序或分类问题，制定一些特征，训练一个模型，暴露一个API，集成，并部署——这就足够了。”然而，还有两件事让他感到烦恼：
- en: What’s the best fitting method to handle classification problems of this kind?
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 处理这类分类问题的最佳方法是什么？
- en: How should he integrate his Python code with the CRM used by Jack’s team?
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 他应该如何将他的Python代码与杰克团队使用的CRM集成？
- en: 'Three hours later, his browser is full of tabs with a few shot classification
    techniques and documentation on CRM API. He wants to suggest a precise time estimate
    on project delivery to his colleagues, but he’ll have a hard time doing that because
    of one crucial mistake that may cost a lot at the early stage: while thinking
    and asking questions, he focused on the solution space, not the problem space.'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 三小时后，他的浏览器里充满了几个简短的分类技术和CRM API的文档标签。他想向同事提出一个精确的项目交付时间估计，但因为他犯了一个关键的错误，这可能会在早期阶段造成很大的损失：在思考和提问时，他专注于解决方案空间，而不是问题空间。
- en: To Steve’s understanding, the information he received was more than enough to
    come up with a suitable solution, while in reality, it was just the tip of the
    iceberg. The remaining context could only be discovered by asking numerous specifying
    questions of multiple people involved in the project.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 在史蒂夫的理解中，他收到的信息已经足够多，可以提出一个合适的解决方案，但实际上，这只是冰山一角。剩余的上下文只能通过向参与项目的多个人提出许多具体问题来发现。
- en: What are the problem space and solution space? These are two exploration paradigms
    that cover different perspectives of a problem. While both are crucial, the former
    should always precede the latter (figure 2.1).
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 什么是问题空间和解决方案空间？这两个探索范式涵盖了问题的不同视角。虽然两者都很关键，但前者应该始终先于后者（图2.1）。
- en: '![figure](../Images/CH02_F01_Babushkin.png)'
  id: totrans-25
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/CH02_F01_Babushkin.png)'
- en: Figure 2.1 An experienced engineer always handles the problem space first with
    specifying questions.
  id: totrans-26
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.1 经验丰富的工程师总是首先通过指定问题来处理问题空间。
- en: 'The problem space is often defined with “what?” and “why?” questions, often
    even with chains of such questions. There is even a popular technique named “Five
    Whys” that recommends stacking your “why?” questions on top of each other to dig
    to the very origin of the problem you’re analyzing. Typical questions often look
    like this:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 问题空间通常用“什么？”和“为什么？”的问题来定义，甚至可能是一系列这样的问题。甚至有一种流行的技术叫做“五问法”，它建议将你的“为什么？”问题层层叠加，以挖掘你正在分析的问题的根源。典型的问题通常看起来像这样：
- en: Why do we need to build the solution?
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为什么我们需要构建解决方案？
- en: What problem does it solve?
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它解决了什么问题？
- en: Why does the problem occur?
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 问题为什么会发生？
- en: What are the alternatives we know?
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们知道有哪些替代方案？
- en: Why do we want to make it work with given limitations (metrics, latency, number
    of training samples)?
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为什么我们希望在给定的限制（指标、延迟、训练样本数量）下使其工作？
- en: After exploration, you are expected to have an understanding of what you should
    build and why.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 探索之后，你应当理解你该构建什么以及为什么。
- en: The “what?” part, in its turn, is about understanding the customer and functional
    attributes (figure 2.2)—for example, “A tool that annotates customer leads with
    a score showing how likely it is that the deal will happen; it should assign the
    scores before sales managers plan their work at a Monday weekly meeting.”
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: “什么？”部分，转而，是关于理解客户和功能属性（图2.2）——例如，“一个工具，它用分数标注客户潜在客户，显示交易发生的可能性；它应该在销售经理在周一的周会计划工作之前分配分数。”
- en: '![figure](../Images/CH02_F02_Babushkin.png)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/CH02_F02_Babushkin.png)'
- en: Figure 2.2 The questions you must ask before starting your project and the crucial
    difference between them
  id: totrans-36
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.2 在开始你的项目之前必须提出的问题以及它们之间的关键区别
- en: In some companies, asking these questions is a job done solely by product managers.
    However, it’s not very productive for engineers to exclude themselves from problem
    space analysis, as a proper understanding of problems affects the final result
    immensely.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 在一些公司，提出这些问题是产品经理独自完成的工作。然而，工程师排除自己参与问题空间分析并不太有效率，因为对问题的适当理解会极大地影响最终结果。
- en: The solution space is somewhat the opposite. It’s less about the problem and
    customer needs and more about the implementation. Here, we talk about frameworks
    and interfaces, discuss how things work under the hood, and consider technical
    risks. However, implementation should never be done before we reach a consistent
    understanding of a problem.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 解决方案空间在某种程度上是相反的。它更少关注问题和客户需求，更多关注实施。在这里，我们讨论框架和接口，讨论事物在底层是如何工作的，并考虑技术风险。然而，在我们对问题有一个一致的理解之前，我们永远不应该开始实施。
- en: Reaching a solid understanding before thinking of a technical implementation
    allows you to consider various workarounds, some of which may significantly reduce
    the project scope. Maybe there is a third-party plugin for CRM that is designed
    to solve this problem. Maybe the cost of errors for the ML part of such a problem
    is not really that important despite Jack’s first answer (stakeholders often start
    with the statement they need accuracy close to 100%!). Maybe the data shows that
    95% of empty leads can be filtered out with simple rule-based heuristics. All
    of these assumptions lie outside the story, but if proven, each of them is an
    essential part of the overall context. It is unveiling this context that will
    give you insight into the problem.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 在考虑技术实现之前，先达到一个稳固的理解，这让你可以考虑各种解决方案，其中一些可能会显著减少项目范围。也许有一个第三方CRM插件是为了解决这个问题而设计的。也许这个问题的机器学习部分出错的成本并不真的那么重要，尽管Jack的第一个答案是（利益相关者经常从他们需要接近100%的准确性的声明开始！）也许数据显示，95%的空潜在客户可以通过简单的基于规则的启发式方法过滤掉。所有这些假设都在故事之外，但如果得到证实，它们中的每一个都是整体背景的重要组成部分。揭露这个背景将为你提供对问题的洞察。
- en: There are two reasons why we began the chapter with Steve’s story. First, it’s
    common and will most probably resonate with you in one way or another. Second,
    it is applicable for any scenario, be it building a new system, modifying an existing
    solution, or passing an interview in a tech company.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 我们之所以以史蒂夫的故事开始本章，有两个原因。首先，这是常见的，并且很可能会以某种方式引起你的共鸣。其次，它适用于任何场景，无论是构建新的系统、修改现有解决方案，还是在科技公司面试中。
- en: 'Third, and most important, the scale and effect of consequences that derive
    from this kind of approach can be damaging to varying degrees:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 第三，也是最重要的，由此类方法产生的规模和影响程度可能对不同的程度造成损害：
- en: Steve will have to rewrite quite a big chunk of the end system.
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 史蒂夫将不得不重写终端系统的大部分内容。
- en: Linda will end up using a partial solution and compensating for the missing
    portion.
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 林达最终将使用部分解决方案，并补偿缺失的部分。
- en: The solution may be completely abandoned.
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 解决方案可能完全被放弃。
- en: All these cases require understanding the problem first.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 所有这些案例都需要首先理解问题。
- en: 2.2 Finding the problem
  id: totrans-46
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 2.2 寻找问题
- en: Organizations which design systems (in the broad sense used here) are constrained
    to produce designs which are copies of the communication structures of these organizations.—Melvin
    E. Conway
  id: totrans-47
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 在这里广泛使用的意义上，设计系统的组织受到限制，只能产生这些组织的通信结构的副本。——梅尔文·E·康威
- en: Some old-school enterprise companies still keep the culture that encourages
    ordinary engineers to focus on low-level implementation (just coding) and leave
    the design (including problem understanding and decomposition) to architects and
    system analysts. From our experience, due to increasing flexibility requirements,
    this culture is disappearing rapidly, giving way to more horizontal structures
    with more problem understanding delegated to individual contributors.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 一些老派的企事业公司仍然保持着鼓励普通工程师专注于低级实现（仅编码）的文化，并将设计（包括问题理解和分解）留给架构师和系统分析师。根据我们的经验，由于日益增长的灵活性要求，这种文化正在迅速消失，取而代之的是更多横向结构，将更多的问题理解委托给个人贡献者。
- en: 'This means engineers don’t have to be solid experts in the domain (it can be
    too complicated for a person without a proper background). The reason is simple:
    it’s hard to learn the nuances of building a stock exchange or manufacturing quality
    control between meetings, code reviews, and training new state-of-the-art neural
    networks. But having a broad understanding is a must before starting an ML system
    design.'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着工程师不需要是该领域的扎实专家（对于没有适当背景的人来说可能过于复杂）。原因很简单：在会议、代码审查和培训最新的神经网络之间，很难学习到构建证券交易所或制造质量控制细微之处的精髓。但在开始设计机器学习系统之前，拥有广泛的理解是必须的。
- en: We encourage you to write down a problem statement using an inverted pyramid
    scheme with a high-level understanding in its basement and nuances at the top.
    It is a common and effective top-down approach that will help you gather as much
    general information as possible, determine what data is most valuable to your
    project, and then, using point-by-point leading questions, delve into the specifics
    of a problem (figure 2.3).
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 我们鼓励你使用倒金字塔方案写下问题陈述，在底层有高级理解，在顶部有细微之处。这是一种常见的有效自上而下的方法，将帮助你收集尽可能多的通用信息，确定对你项目最有价值的数据，然后，通过逐点引导问题，深入探讨问题的具体细节（图2.3）。
- en: '![figure](../Images/CH02_F03_Babushkin.png)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![figure](../Images/CH02_F03_Babushkin.png)'
- en: Figure 2.3 The inverted pyramid scheme is an approach we recommend for gathering
    data required for a successful project launch.
  id: totrans-52
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图2.3 倒金字塔方案是我们推荐用于收集成功项目启动所需数据的方案。
- en: 'On the very top level, you can formulate the helicopter-view understanding
    of the problem. That’s the level understandable to any C-level office of the organization
    where people don’t care too much about ML algorithms or software architecture—for
    example:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 在最高层次上，你可以形成对问题的直升机视角理解。这是任何组织C级办公室都能理解的水平，他们不太关心机器学习算法或软件架构——例如：
- en: There are fraudsters in our mobile app who try to attack our legit users.
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们的移动应用中有骗子试图攻击我们的合法用户。
- en: Our pricing model demonstrated extremely low profit margins for some products
    while being absolutely uncompetitive in other categories.
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们的价格模型在有些产品上展示了极低的利润率，而在其他类别上则完全不具备竞争力。
- en: Customers complain that our software requires a lot of manual tuning before
    bringing value; it should be *automagic*.
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 客户抱怨我们的软件在带来价值之前需要大量手动调整；它应该是*自动的*。
- en: App users aren’t engaged enough.
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用程序用户参与度不足。
- en: Having such a statement at the start gives many opportunities for the next exploration
    steps. Just try to question every word in a given sentence to make sure you can
    explain it to a 10-year-old child. Who are fraudsters? How do they attack? What
    report gave the initial insight about excessive prices? What bothers our customers
    the most? Where is the most time wasted? How do we measure user engagement? How
    are recommendations related to this metric? Ask yourself or your colleagues questions
    until you’re ready to build the next, broader block of the pyramid that expands
    the initial one.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 在开头有这样的声明，为接下来的探索步骤提供了许多机会。只需尝试质疑给定句子中的每一个词，以确保你能够向一个10岁的孩子解释它。谁是欺诈者？他们是如何攻击的？哪份报告提供了关于过度价格的初步洞察？什么最让我们的客户烦恼？在哪里浪费的时间最多？我们如何衡量用户参与度？推荐与这个指标有何关联？问自己或你的同事问题，直到你准备好构建金字塔的下一个更广泛、扩展初始块的块。
- en: This next pyramid block requires more specific, well-thought-out questions.
    One of the successful techniques is looking for the origin of the previous-level
    answers. How do we decide this behavior was fraudulent? What kind of manual tuning
    do our customers have to perform? How are user engagement and recommendation engine
    performance currently correlated?
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 这个下一个的金字塔块需要更具体、经过深思熟虑的问题。一种成功的技巧是寻找上一级答案的起源。我们如何决定这种行为是欺诈的？我们的客户需要执行什么样的手动调整？用户参与度和推荐引擎性能目前是如何关联的？
- en: 'An even more powerful technique involves looking for inconsistencies in answers;
    people tend to group objects based on their similarity and distinguish objects
    based on their differences. There may be similar users; some are considered spammers
    and should be banned, while others are still legit, even if their behavior may
    overlap with that of a person outside of the problem domain. For an uninformed
    observer, the same added margin for similar goods may be acceptable or not, but
    what are the criteria? An engineer here doesn’t have to find all the splitting
    criteria in a problem statement (they’re not decision trees), but that’s a good
    field to catch crucial signals and generate insights. This can be summarized by
    the following statement: trying to understand what people want is important; trying
    to understand what they need is critical.'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 一种更强大的技巧是寻找答案中的不一致性；人们倾向于根据相似性分组对象，根据差异区分对象。可能存在相似的用户；一些被认为是垃圾邮件发送者，应该被禁止，而其他人仍然是合法的，即使他们的行为可能与问题域外的人重叠。对于一个无知的观察者来说，对类似商品相同的增加边际可能是可以接受的，也可能不是，但标准是什么？这里的工程师不需要在问题陈述中找到所有的分割标准（它们不是决策树），但这是一个捕捉关键信号和产生洞察的好领域。这可以用以下声明来总结：试图理解人们想要什么很重要；试图理解他们需要什么是至关重要的。
- en: Be sure to involve all the interested parties in the process. It’s not only
    your boss or product manager who cares about the project; you’re likely to have
    multiple stakeholders (it is crucial to understand which of the stakeholders is
    responsible for budgets and will be a point of approval for a given component
    of the system). Often, it is recommended to chat with experts at different levels
    to envelop both strategic and tactical perspectives. A high-level executive knows
    much about the goal of a given initiative. On the other hand, individual contributors
    who currently handle the absence of a designed system know tricks and details
    that may substantially affect the design.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 一定要让所有感兴趣的各方参与这个过程。不仅你的老板或产品经理关心这个项目；你很可能有多个利益相关者（了解哪个利益相关者负责预算并将成为系统某个组件的审批点是至关重要的）。通常，建议与不同级别的专家聊天，以涵盖战略和战术视角。高级管理人员对一个特定倡议的目标了解很多。另一方面，目前处理设计系统缺失的个人贡献者知道可能严重影响设计的技巧和细节。
- en: Once you feel confident enough to explain the problem in simple terms, it’s
    time to wrap it up. We recommend writing down your problem understanding. Usually,
    it’s several paragraphs of text, but this text will eventually become the cornerstone
    of your design document. Don’t polish it too much for now; it’s just your first
    (although very important) step.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你足够自信能够用简单的话解释问题，那就到了总结的时候了。我们建议写下你对问题的理解。通常，它是由几段文字组成的，但这段文字最终将成为你设计文档的基石。现在不要过分打磨它；这只是你的第一步（虽然非常重要）。
- en: The importance of this step may vary, depending on the organization or environment.
    Sometimes the problem is easy to understand and, usually, very hard to solve—this
    is a common case in established competitive markets. Another side of the spectrum
    is startups that disrupt existing markets; here, the initial understanding of
    the disruption is rarely correct. One of the authors worked at a company where
    up to 50% of his time on a project was spent on defining goals and relevant context.
    After the context was clear, the ML engineering part of the project was smooth
    and straightforward.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 这一步的重要性可能因组织或环境而异。有时问题容易理解，但通常很难解决——这是成熟竞争市场的常见情况。光谱的另一端是颠覆现有市场的初创公司；在这里，对颠覆的初始理解很少是正确的。其中一位作者曾在一家公司工作，他在项目上的50%的时间都花在定义目标和相关背景上。背景清晰后，项目的机器学习工程部分就顺利且直接了。
- en: Campfire story from Valerii
  id: totrans-64
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: Valerii的营火故事
- en: 'Back in 2019, I worked in a tech company that decided to expand its eCommerce
    department and “go offline.” The new project named Super Bill was based on the
    following idea:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 回到2019年，我在一家科技公司工作，该公司决定扩大其电子商务部门并“线下拓展”。名为Super Bill的新项目基于以下想法：
- en: Customers could use the Super Bill app as a price comparison tool for grocery
    stores and could also upload their receipts to get cash back, as well as buy in-store
    using an app.
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 客户可以使用Super Bill应用作为杂货店的比价工具，并且还可以上传他们的收据以获得现金返还，以及使用应用在店内购买。
- en: Brands could use the app to provide cash back for buying specific items, promoting
    their goods as substitution items or recommended items.
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 品牌可以使用该应用为购买特定商品提供现金返还，推广他们的商品作为替代品或推荐品。
- en: 'The problem was that a single item could have multiple names (as printed on
    a receipt) in various grocery chains. “Mars small,” “M. bar small,” “Mars bar
    small,” etc., which could all be different spellings of the same stock-keeping
    unit (SKU), were to be mapped to the same item: Mars Candy Bar.'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 问题在于单个商品可能有多个名称（如收据上所示）在不同的杂货连锁店中。例如，“Mars小”，“M. bar小”，“Mars bar小”等，这些都可能是同一库存单位（SKU）的不同拼写，需要映射到同一商品：Mars巧克力棒。
- en: The initial idea was to train a deep-structured semantic model and perform search
    engine matching, where the name from a receipt would play the role of Query, and
    SKU was the Document.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 初始的想法是训练一个深度结构化语义模型并执行搜索引擎匹配，其中收据上的名称将扮演查询的角色，SKU则是文档。
- en: I didn’t like that solution, as it was too complex and bulky for this kind of
    problem. It required gathering data, labeling it, training the model, assessing
    its quality, etc. So I decided to think it over. If I need to label data, I will
    do it only once per name in the receipt per grocery. Hence, I need no ML model
    for an already labeled sample, and this can occur quite often. Given that the
    item frequency follows Zipf’s law, we needed to label the most popular name-SKU
    pairs, constituting a small fraction of all unique pairs but a larger fraction
    of all pairs to label (based on this empirical law, when a list of measured values
    is sorted in decreasing order, the value of the *n*th entry is approximately inversely
    proportional to *n*).
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 我不喜欢那个解决方案，因为它对这个问题的复杂性和体积太大。它需要收集数据，标注它，训练模型，评估其质量等。所以我决定重新思考。如果需要标注数据，我只为每个收据上的每个名称在每家杂货店标注一次。因此，我不需要为已经标注的样本创建机器学习模型，这种情况可能相当常见。鉴于项目遵循Zipf定律，我们需要标注最流行的名称-SKU对，这构成了所有唯一对的一小部分，但标注所有对的大一部分（根据这一经验法则，当一组测量值按降序排列时，第*n*个条目的值大约与*n*成反比）。
- en: The remaining fraction can be labeled by employees with access to the whole
    SKU database, but we probably do not want to share this database with a crowdsourcing
    hand-labeling platform. At the maximum, we can provide a list of candidates from
    this database and check which one of them (if any) is a match.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 剩余的部分可以由有权访问整个SKU数据库的员工进行标注，但我们可能不想与一个众包标注平台共享这个数据库。最多，我们可以从这个数据库中提供一份候选名单，并检查其中哪一个（如果有的话）是匹配的。
- en: So what can we do here? We can try to predict/extract the brand and predict
    the sample category in the receipts. Narrowing down the list of candidates is
    a relatively easy classification task or distance-based task, as we have a limited
    number of categories and brands and can use very simple techniques for postprocessing,
    such as Levenshtein distance. As soon as we have candidates, we can send them
    with a sample from the receipt to label through our crowdsourcing process. How
    often do we need to do that? The answer is only once for each SKU-grocery chain
    pair. This makes it a much easier and quicker solution compared to the initial
    idea. After all, we were not building search engines for billions of queries per
    day but rather a limited matching system.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，我们在这里能做什么呢？我们可以尝试预测/提取品牌并预测收据中的样本类别。缩小候选者名单是一个相对简单的分类任务或基于距离的任务，因为我们有有限的类别和品牌，并且可以使用非常简单的后处理技术，例如Levenshtein距离。一旦我们有候选者，我们可以将它们与收据样本一起发送，通过我们的众包流程进行标记。我们需要多久做一次？答案是每个SKU-连锁店对只做一次。这使得它比最初的想法更容易、更快。毕竟，我们不是在为每天数十亿个查询构建搜索引擎，而是一个有限的匹配系统。
- en: We were able to put this solution into production in less than three weeks,
    which is astonishingly quick. All it took was understanding what problem we wanted
    to solve and gathering context.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 我们能在不到三周的时间内将这个解决方案投入生产，这令人惊讶地迅速。我们只需要理解我们想要解决什么问题，并收集上下文信息。
- en: P.S. Later, when we were preparing a similar system for another deep tech company
    with tens of millions of SKUs, we replaced the last layer of postprocessing with
    a deep semantic similarity model to produce a more intelligent system. That was
    a benefit of designing an easy-to-adjust decoupled system.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: P.S. 后来，当我们为另一家拥有数千万SKU的深科技公司准备类似的系统时，我们将后处理层的最后一层替换为一个深度语义相似性模型，以产生一个更智能的系统。这是设计易于调整的解耦系统的益处。
- en: Once the problem statement is explicit enough, it’s time to think about what
    we, as ML engineers, can do with it.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦问题陈述足够明确，我们就需要考虑作为机器学习工程师，我们能用它做什么。
- en: 2.2.1 How we can approximate a solution through an ML system
  id: totrans-76
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 2.2.1 我们如何通过机器学习系统近似解决方案
- en: Inexperienced or just hasty engineers often first try to drag the problem directly
    into a Procrustean bed of well-known ML algorithm families like supervised or
    unsupervised learning or a classification or regression problem. We don’t think
    it’s the best way to start.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 缺乏经验或过于急躁的工程师通常会首先尝试将问题直接拖入一个普鲁克斯特床——即众所周知的机器学习算法家族，如监督学习或无监督学习，或者分类或回归问题。我们认为这不是一个最好的开始方式。
- en: 'For an external observer, an ML model is like a magic oracle: a universal machine
    that can answer any properly formulated question. Your job as an ML engineer would
    be to approximate its behavior—build this oracle using ML algorithms—but before
    mimicking it, we need to find the right question and teach users to ask it. In
    less metaphoric words, here we reframe a business problem into a software/ML problem.'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 对于外部观察者来说，一个机器学习模型就像一个魔法先知：一台能够回答任何正确表述问题的通用机器。作为机器学习工程师，你的工作就是近似其行为——使用机器学习算法构建这个先知——但在模仿它之前，我们需要找到正确的问题，并教会用户如何提出这个问题。用不那么隐喻的话来说，这里我们将一个商业问题转化为一个软件/机器学习问题。
- en: 'Some questions may seem very straightforward:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 一些问题可能看起来非常直接：
- en: For the fraud problem, we want the oracle to label a user a fraudster as soon
    as possible—in a perfect world, even before they did anything. *This sounds like
    a sort of classification*.
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于欺诈问题，我们希望先知能够尽快将用户标记为欺诈者——在理想的世界里，甚至在用户做任何事情之前。*这听起来像是一种分类*。
- en: For the pricing model, we’d like to understand how much a customer is ready
    to pay for their goods without dropping the service in favor of a competitor (if
    we aim for a short-term problem only) or without thoughts like “This shop became
    too greedy; I should avoid them in the future” (if we care about long-term perspectives
    of the brand). *That’s definitely similar to regression examples from textbooks.*
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于定价模型，我们希望了解客户愿意为他们的商品支付多少，而不会因为选择竞争对手而放弃服务（如果我们只针对短期问题）或者没有像“这家商店变得过于贪婪；我应该避免他们”这样的想法（如果我们关心品牌的长期前景）。*这肯定类似于教科书中的回归示例*。
- en: For the recommendation system, we’d ask what we can suggest to the customer
    so they are happy with the service. *This very much resembles the ranking problem.*
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于推荐系统，我们会问我们可以向客户推荐什么，使他们满意于服务。*这非常类似于排名问题*。
- en: 'Even with the metaphor of a magical oracle, we often had to leave multiple
    remarks that affected this potential answer. We’ll pay attention to similar details
    and remarks here and there in the book, but the highlight here is the following:
    there may be no single simple answer for the problem, and your ML system design
    must be aware of it in advance.'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 即使有神奇占卜者的隐喻，我们也经常不得不留下多个影响这个潜在答案的评论。我们将在书中不时关注类似的细节和评论，但这里的重点是以下内容：对于这个问题可能没有单一的简单答案，你的机器学习系统设计必须提前意识到这一点。
- en: In our pricing example, there may be a spectrum of goals, from maximizing profit
    right here right now to growing the company in the long run. A good ML system
    would be able to adapt to a specific point in this spectrum. In the following
    chapters, we will discuss the tech aspects of doing so.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的定价示例中，可能存在一系列目标，从现在立即最大化利润到长期发展公司。一个好的机器学习系统应该能够适应这个光谱中的特定点。在接下来的章节中，我们将讨论实现这一点的技术方面。
- en: 'Many ML practitioners, including the famous Andrew Ng, a renowned AI expert,
    professor at Stanford University, and founder of Landing AI, suggest using a heuristic
    of a human expert: let’s build a system that answers in the same manner as the
    expert in the area would. It works for many domains (health care is a great example)
    and sets the bar of an early understanding of how solvable problems are with AI
    approaches. Unfortunately, it comes with disadvantages as well: there are problems
    where machines perform better than people. Such problems usually happen in domains
    when data is represented as a log of events (often a human behavior), not something
    carefully labeled. It’s easy to find such cases in the ad tech and finance industries.
    So human-level performance may be a fair bar to reach, but it’s not always the
    case.'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 许多机器学习从业者，包括著名的安德鲁·吴，一位著名的AI专家、斯坦福大学的教授以及Landing AI的创始人，建议使用人类专家的启发式方法：让我们构建一个系统，使其以该领域专家相同的方式回答问题。这在许多领域都适用（医疗保健就是一个很好的例子），并设定了早期理解使用人工智能方法解决问题的门槛。不幸的是，这也伴随着一些缺点：有些问题机器的表现比人更好。这类问题通常发生在数据以事件日志（通常是人类行为）的形式表示的领域，而不是经过仔细标记的东西。在广告技术和金融行业中很容易找到这样的案例。因此，达到人类水平的表现可能是一个公平的门槛，但并不总是如此。
- en: 'And only after the question is clear does it make sense to dig into the way
    of algorithm approximation and draft a model capable of doing it. It doesn’t have
    to be a single model: a pipeline of various models or algorithms is often a legit
    tradeoff. We will cover problem decompositioning as part of a preliminary search
    covered in the next chapter.'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 只有在问题明确之后，深入挖掘算法近似的方法并制定一个能够做到这一点的模型才有意义。这不必是一个单一的模型：一个由各种模型或算法组成的管道通常是一个合法的权衡。我们将在下一章中作为初步搜索的一部分讨论问题分解。
- en: 2.3 Risks, limitations, and possible consequences
  id: totrans-87
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 2.3 风险、局限性和可能后果
- en: 'Imagine you’ve built a fraud detection system: it scores user activity and
    prevents malicious events by suspending risky accounts. It’s a precious thing—zero
    fraudsters have come through since its launch, and the customer success team is
    happy. But recently, the marketing team launched a big ad campaign, and your perfect
    fraud detector banned a fair share of new users based on their traffic source
    (it’s unknown and therefore somewhat suspicious, according to your algorithms).
    Negative effects on marketing could have been way more significant than the efficiency
    in detecting fraud activity.'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 想象一下，你已经构建了一个欺诈检测系统：它通过评估用户活动，通过暂停风险账户来防止恶意事件。这是一件宝贵的事情——自其推出以来，没有欺诈者通过，客户成功团队也很高兴。但最近，营销团队推出了一项大型广告活动，而你完美的欺诈检测器根据用户的流量来源（根据你的算法，这是未知的，因此有些可疑）禁止了一部分新用户。对营销的负面影响可能比检测欺诈活动的效率要大得多。
- en: 'You may find this example obvious and not worth attention. However, the reality
    is ruthless: situations like this often happen in companies where teams are misaligned,
    and that was one of the risks you should have kept in mind while designing the
    system. You shouldn’t think, “Our team is professional; a failure like that just
    can’t happen here.” So explicit thinking about risks is the way to go, as there’s
    a high chance of potential risks spreading beyond the project team or a single
    department.'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能会觉得这个例子很明显，不值得注意。然而，现实是残酷的：这种情况在团队不协调的公司中经常发生，这是你在设计系统时应该牢记的风险之一。你不应该想，“我们的团队是专业的；那样的失败在这里是不可能发生的。”因此，明确地思考风险是正确的做法，因为潜在的风险有很大可能性会扩散到项目团队或单个部门之外。
- en: '*With great power comes great responsibility*—this popular proverb is very
    applicable to ML software. ML is no doubt powerful. But besides the power, it
    has one more important and dangerous attribute, which is opaqueness for most observers,
    especially when the model under the hood is complicated. Thus, professional system
    designers should be aware of potential risks and existing limitations.'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: '*能力越大，责任越大*——这句流行的谚语非常适用于机器学习软件。毫无疑问，机器学习非常强大。但除了这种力量之外，它还有一个更重要且危险的特征，那就是对大多数观察者来说的透明度，尤其是在底下的模型很复杂的时候。因此，专业的系统设计者应该意识到潜在的风险和现有的限制。'
- en: Software development classics suggest the idea of functional and nonfunctional
    requirements. In short, functional requirements are about the functionality of
    a new feature or system, its value, and its user flow, while nonfunctional requirements
    are about aspects like performance, security, portability, and so on. In other
    words, functional requirements determine what we should design, and nonfunctional
    requirements shape the understanding of how it should work under the hood. So
    when we talk about potential risks and limitations, we effectively gather nonfunctional
    requirements.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 软件开发经典理论建议考虑功能和非功能需求。简而言之，功能需求是关于新功能或系统的功能、其价值和用户流程，而非功能需求是关于性能、安全性、可移植性等方面。换句话说，功能需求决定了我们应该设计什么，而非功能需求塑造了我们对它如何工作的理解。因此，当我们谈论潜在的风险和限制时，我们实际上是在收集非功能需求。
- en: The cornerstone of any defensive strategy is a risk model. Simply put, it’s
    an answer to the “What are we protecting from?” question. What are the worst scenarios
    possible, and what should we avoid? Answers like “incorrect model prediction”
    are not informative at all. A detailed understanding aligned with all possible
    stakeholders is absolutely required.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 任何防御策略的基石是一个风险模型。简单来说，它是对“我们要保护免受什么威胁？”这个问题的回答。可能的最糟糕的情况是什么，我们应该避免什么？像“错误的模型预测”这样的回答根本没有任何信息量。一个与所有可能的利益相关者相一致的详细理解是绝对必要的。
- en: Campfire story from Valerii
  id: totrans-93
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 瓦列里讲述的篝火故事
- en: 'Once I was building a dynamic pricing algorithm for another big tech company.
    It was a neat system able to optimize revenue, margin, or traffic, with constraints
    for the latter two. It could work on the user level, but as soon as you had user-level
    atomicity, it was possible to aggregate to any level you wanted. It could adapt
    to changes in user behavior very quickly and output prices for users in real time.
    It had a nice balance between exploration and exploitation, was able to take uncertainty
    into consideration, and was quick for training and inference. I even had a desire
    to write an article about it and came up with a name for it: “Double Bayesian
    Universal Contextual Bandits for Dynamic Pricing.” The figure outlines the algorithmic
    design of the system; isn’t that nice?'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 曾经我为另一家大型科技公司构建了一个动态定价算法。这是一个能够优化收入、利润或流量的整洁系统，对后两者有约束。它可以在用户级别工作，但一旦有了用户级别的原子性，就可以聚合到任何你想要的级别。它可以快速适应用户行为的变化，并实时为用户提供价格。它在探索和利用之间有一个很好的平衡，能够考虑不确定性，并且训练和推理都很快速。我甚至有写一篇关于它的文章的愿望，并为它想出了一个名字：“用于动态定价的双贝叶斯通用上下文赌博。”这张图概述了系统的算法设计；这不是很好吗？
- en: '![sidebar figure](../Images/CH02_F04_Babushkin.png)'
  id: totrans-95
  prefs: []
  type: TYPE_IMG
  zh: '![侧边栏图片](../Images/CH02_F04_Babushkin.png)'
- en: Initial design for the dynamic pricing system
  id: totrans-96
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 动态定价系统的初始设计
- en: However, possible risks, existing limitations, and undesired consequences have
    drastically changed the final design.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，可能的风险、现有的限制和不良后果极大地改变了最终的设计。
- en: 'Risks: it turned out that you can’t discriminate against people with different
    prices for the same item. You can discriminate between locations, of course, but
    if it is the same city and the same item and you sell online, the price must be
    the same. Technically, we still can discriminate, but that bears the risk of customers
    suing the company and, consequently, the company losing tons of money and reputation.
    Fortunately, we were more or less prepared for that, as we could aggregate on
    any level we wanted. Do you recall user-level atomicity?'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 风险：结果证明，你不能对不同价格的同一样物品进行歧视。当然，你可以对地点进行歧视，但如果是在同一个城市和同一样物品，并且你在网上销售，价格必须相同。技术上我们仍然可以进行歧视，但这会带来客户起诉公司的风险，进而导致公司损失大量金钱和声誉。幸运的是，我们对这一点或多或少有所准备，因为我们可以在任何我们想要的层面上进行聚合。你还记得用户级别的原子性吗？
- en: 'Limitations: the second strike came from the backend side. It turned out we
    could change the price only as often as every 6 hours (at best!), and thus our
    ability to change the price in real time didn’t matter that much. This was the
    final blow, forcing me to radically simplify the system, still with some ability
    to adapt, which will be covered in the next story.'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 局限性：第二次打击来自后端。结果是我们只能每隔6小时（最多！）更改一次价格，因此我们实时更改价格的能力并不那么重要。这是最后的打击，迫使我彻底简化系统，但仍保留一些适应能力，这将在下一个故事中介绍。
- en: It’s easy to see that limitations and risks shaped the final design, which I
    didn’t mind, as I enjoyed the process of creating it and was ready to change it
    (see the next figure). But what if that was my opus magnum? How would I feel after
    that? The moral is simple—you need to find out any possible risks and limitations
    as soon as possible; otherwise, you can be forced to discard all your hard work.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 很容易看出，局限性和风险塑造了最终的设计，我不介意，因为我享受创造它的过程，并且准备好改变它（见下一图）。但如果是我的杰作呢？那之后我会怎么感觉？道德很简单——你需要尽快找出任何可能的风险和局限性；否则，你可能会被迫放弃所有辛勤的工作。
- en: '![sidebar figure](../Images/CH02_F05_Babushkin.png)'
  id: totrans-101
  prefs: []
  type: TYPE_IMG
  zh: '![侧边栏图](../Images/CH02_F05_Babushkin.png)'
- en: Final design for the dynamic pricing system
  id: totrans-102
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 动态定价系统的最终设计
- en: Understanding the risks and limitations will affect many future decisions, and
    we will cover this later in chapters dedicated to datasets, metrics, reporting,
    and fallback. Before we do, though, we’d like to give a couple of examples displaying
    how considering (or ignoring) valuable data can affect your goal setting.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 理解风险和局限性将影响许多未来的决策，我们将在关于数据集、指标、报告和回退的章节中稍后讨论。在我们这样做之前，我们想给出一些例子，说明考虑（或忽略）有价值的数据如何影响你的目标设定。
- en: 2.4 Costs of a mistake
  id: totrans-104
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 2.4 误差的成本
- en: 'When talking about the costs of a mistake, we’d like to quote Steve McConnell,
    who precisely defines the difference between robustness and correctness in his
    book *Code Complete* (2nd ed., Microsoft Press, 2004) using examples of building
    an X-ray machine and a video game:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 当谈到误差的成本时，我们想引用史蒂夫·麦克康奈尔在他的书《代码大全》（第2版，微软出版社，2004年）中精确定义鲁棒性和正确性之间的差异，使用构建X射线机和视频游戏的例子：
- en: As the video game and X-ray examples show us, the style of error processing
    that is most appropriate depends on the kind of software the error occurs in.
    These examples also illustrate that error processing generally favors more correctness
    or more robustness. Developers tend to use these terms informally, but, strictly
    speaking, these terms are at opposite ends of the scale from each other. Correctness
    means never returning an inaccurate result; returning no result is better than
    returning an inaccurate result. Robustness means always trying to do something
    that will allow the software to keep operating, even if that leads to results
    that are inaccurate sometimes.
  id: totrans-106
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 如视频游戏和X射线示例所示，最合适的错误处理风格取决于错误发生的软件类型。这些示例还说明了错误处理通常更倾向于更多正确性或更多鲁棒性。开发者倾向于非正式地使用这些术语，但严格来说，这些术语在尺度上是相对的。正确性意味着永远不返回不准确的结果；不返回结果比返回不准确的结果更好。鲁棒性意味着始终尝试做一些事情，即使有时会导致不准确的结果，也能让软件继续运行。
- en: …
  id: totrans-107
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: …
- en: Safety-critical applications tend to favor correctness over robustness. It is
    better to return no result than to return a wrong result. The radiation machine
    is a good example of this principle. Consumer applications tend to favor robustness
    to correctness. Any result whatsoever is usually better than the software shutting
    down. The word processor I’m using occasionally displays a fraction of a line
    of text at the bottom of the screen. If it detects that condition, do I want the
    word processor to shut down?
  id: totrans-108
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 安全关键的应用通常更倾向于正确性而非鲁棒性。不返回结果比返回错误结果更好。辐射机是这一原则的好例子。消费者应用通常更倾向于鲁棒性而非正确性。任何结果通常都比软件关闭要好。我偶尔使用的文字处理器在屏幕底部显示文本的一小部分。如果它检测到这种情况，我是否希望文字处理器关闭？
- en: This concept is even more applicable to ML systems, as they tend to be obscure
    for both developers and end users. A set of *if* and *while* statements is easier
    to keep in mind compared to enormous sequences of matrix multiplication in modern
    deep neural networks.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 这个概念对机器学习系统来说更加适用，因为它们对开发者和最终用户来说都可能是神秘的。与现代深度神经网络中巨大的矩阵乘法序列相比，一组*if*和*while*语句更容易记住。
- en: 'Imagine you’re building an entertainment app like an AR mask for Snap or TikTok.
    In the worst case, the added effect will look ugly for a frame—not a big risk,
    so robustness is a proper approach here. The opposite case is an ML solution for
    medical or transport needs. Would you prefer a self-driving car that just moves
    forward when it’s not sure if there is a pedestrian nearby? Definitely not: that’s
    why you want to opt for correctness here.'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 想象一下，你正在开发一个像Snap或TikTok的AR面具这样的娱乐应用。在最坏的情况下，添加的效果可能在一个帧中看起来很丑陋——这不是一个很大的风险，因此鲁棒性在这里是一个合适的方法。相反的情况是一个用于医疗或交通需求的机器学习解决方案。你会选择一辆在不确定附近是否有行人时只是向前移动的自动驾驶汽车吗？当然不会：这就是为什么你想要在这里选择正确性的原因。
- en: 'We’ll talk more about this tradeoff and practical aspects of it in the third
    part of the book. At this point, we should only mention that understanding the
    costs of mistakes is one of the critical points in gathering predesign information.
    This is effectively a quantitative development of the risks concept: for risks,
    we define what can go wrong and what we want to avoid and later try to assign
    numerical attributes. A numerical aspect may vary greatly depending on a problem
    and doesn’t have to be precise at this point, but it’s essential for shaping the
    landscape.'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在本书的第三部分更多地讨论这种权衡及其实际方面。到目前为止，我们应该提到的是，理解错误的成本是收集预设计信息的关键点之一。这实际上是风险概念的定量发展：对于风险，我们定义了可能出错的事情和我们想要避免的事情，然后尝试分配数值属性。数值方面可能因问题而异，在这个阶段不一定需要精确，但对于塑造格局至关重要。
- en: 'From our experience, people often tend to think more about positive scenarios,
    while in reality, negative outcomes require more attention. The logic is simple:
    usually any system has one (or a few) positive scenarios, and many failure modes
    are considered negative scenarios. Of course, the probability of each failure
    mode is usually way less compared to the probability of a good outcome, but it’s
    not always the case if we measure expected values. Imagine a trading system that
    makes a few cents in 99% of deals and loses the whole capital with the probability
    of 0.1% or, to be more dramatic, a medical diagnostic system that saves 3 minutes
    per patient for highly paid doctors but misses a serious but curable disease for
    every 1,000th patient.'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 根据我们的经验，人们往往更多地考虑积极场景，而在现实中，负面结果需要更多的关注。逻辑很简单：通常任何系统都有一个（或几个）积极场景，而许多故障模式被认为是负面场景。当然，每种故障模式发生的概率通常远低于良好结果发生的概率，但如果测量期望值，情况并不总是如此。想象一个交易系统在99%的交易中赚取几分钱，但以0.1%的概率损失全部资本，或者更戏剧化的是，一个医疗诊断系统为高薪医生节省了每位患者3分钟的时间，但每1000位患者中就有一次错过了一个严重但可治愈的疾病。
- en: Some mistakes, though, can be harmless or even positive. Back in 2018, Arseny
    worked in a company making an AR application—a virtual try-on for footwear. The
    app allowed the user to see how a pair of shoes looked on their feet before purchasing
    it. One of the first versions of the app contained an underfitted model responsible
    for foot detection and tracking. As a result, shoes were often rendered not only
    on human feet but also on top of pet paws and even toys. Many of the early users
    found it hilarious, so the cost of such a mistake was not significant. But, as
    the time went on, the effect disappeared after the model performance was improved
    for more conventional-user scenarios.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，有些错误可能是无害的，甚至可能是积极的。回到2018年，阿森尼在一家制作AR应用的公司工作——这是一款虚拟试穿鞋子的应用。该应用允许用户在购买之前看到鞋子穿在脚上的样子。该应用的第一个版本包含了一个欠拟合的模型，负责脚部检测和跟踪。结果，鞋子不仅出现在人类的脚上，还出现在宠物的爪子上，甚至玩具上。许多早期用户觉得这很有趣，所以这种错误的成本并不显著。但随着时间的推移，当模型性能在更传统的用户场景中得到改善后，这种效果消失了。
- en: While estimating the cost of a mistake, you should also remember there may be
    second-order consequences. For example, your antifraud system might ban too many
    legitimate users today, and tomorrow they may spread this by word of mouth about
    your app (“Never use it; they banned me for nothing”), which may bury your growth
    potential. Your recommendation system provides unrelated suggestions, and later
    you end up training a new model based on logs of rare clicks on such a poor recommendation,
    thus falling into a negative feedback loop.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 在估计错误的成本时，你还应该记住可能会有二级后果。例如，你的反欺诈系统可能会今天禁止太多合法用户，明天他们可能会通过口碑传播关于你的应用（“永远不要使用它；他们无缘无故地禁止了我”），这可能会埋没你的增长潜力。你的推荐系统提供不相关的建议，后来你基于对这种糟糕推荐的罕见点击日志训练了一个新模型，从而陷入了一个负反馈循环。
- en: Another classic example of the cost of a mistake is credit risk scoring, a common
    task that can be found in almost any bank. Before being accepted or rejected,
    a borrower’s application is usually processed by an ML-based system to output
    the risk score. This risk score can be either 1/0 (with a specified threshold)
    or vary and be continuous between 0 and 1\.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个关于错误成本的经典例子是信用风险评分，这是一个几乎在任何银行都能找到的常见任务。在申请被接受或拒绝之前，借款人的申请通常由基于机器学习的系统处理，以输出风险评分。这个风险评分可以是1/0（有一个特定的阈值）或者介于0和1之间的连续值。
- en: Obviously, the cost of giving a loan to a potentially defaulting client and
    providing no loan of the same amount to a customer who would repay it successfully
    is not the same. How many people does the system need to repay the loan to the
    bank to outweigh one person who would go bankrupt? Shall we count people/credits
    given or the amount of money lent? Do we expect this ratio to be constant over
    time? Answering all of these questions and taking this information into account
    greatly increases the chance of a project being considered successful.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，向可能违约的客户发放贷款的成本和向成功还款的客户不发放相同金额的贷款的成本是不一样的。系统需要多少人偿还贷款才能抵消一个可能破产的人？我们应该计算人数/信用还是贷款金额？我们期望这个比率随时间保持不变吗？回答所有这些问题并考虑这些信息将大大增加项目被认为是成功的机会。
- en: What does it mean for a person designing an ML system? Identifying the risk
    landscape helps us understand what kind of problems are to be avoided. Some errors
    are almost harmless, some can greatly affect business, and some can be life-threatening.
    A proper understanding of the costs of a mistake with regard to the system being
    designed is critical for the next steps, as it shapes requirements for reliability
    and data gathering, suggests better metrics, and may affect other aspects of design.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 对于设计机器学习系统的人来说，这意味着什么？识别风险景观有助于我们了解需要避免的问题类型。一些错误几乎无害，一些可能会严重影响业务，还有一些可能是致命的。对设计系统时错误成本的适当理解对于下一步至关重要，因为它塑造了可靠性和数据收集的要求，提出了更好的指标，并可能影响设计的其他方面。
- en: Summary
  id: totrans-118
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 摘要
- en: The problem space always comes before the solution space. Doing otherwise will
    most probably cause backlash in the later stages of your project.
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 问题空间总是先于解决方案空间。否则，很可能会在项目的后期阶段引起反弹。
- en: When gathering background info from stakeholders and involved employees, start
    gathering wide context with the possibility of diving deeper when needed.
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在从利益相关者和涉及的员工收集背景信息时，开始收集广泛的背景信息，并在需要时深入挖掘。
- en: When picking from a multitude of potential ML solutions, study their limitations
    and consider the risks these limitations may cause.
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在从众多潜在的机器学习解决方案中进行选择时，研究它们的局限性，并考虑这些局限性可能引起的风险。
- en: 'Always evaluate the potential costs of a mistake. If there is one, examine
    the potential side effects it may cause: some may even lead to positive outcomes.'
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 总是评估一个错误的潜在成本。如果有，检查它可能引起的潜在副作用：其中一些甚至可能导致积极的结果。
