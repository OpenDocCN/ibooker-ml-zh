- en: Chapter 12\. Machine Learning Engineering and MLOps Case Studies
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第12章 机器学习工程和MLOps案例研究
- en: By Noah Gift
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: Noah Gift
- en: After accompanying Professor Loewi through his procedure I spent more time in
    his postop care during which he lectured me further. He signed my copy of his
    little 62-page book, above his signature in a shaky hand he wrote, “Facts without
    Theory is chaos, Theory without facts is phantasy.
  id: totrans-2
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 在陪同洛伊博士完成他的程序后，我在他的术后护理中花了更多时间。在那期间，他继续向我讲课。他在他的小62页书上签了我的副本，在他颤抖的手写的签名上面写着：“事实无理论是混乱，理论无事实是幻想。”
- en: ''
  id: totrans-3
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Dr. Joseph Bogen
  id: totrans-4
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: Dr. Joseph Bogen
- en: One of the fundamental problems with technology in the real world is that it
    is tough to know who to listen to for advice. In particular, a multidisciplinary
    topic like machine learning is a puzzling challenge. How can you find the right
    mix of real-world experience, current and relevant skills, and the teaching ability
    to explain it? This “unicorn” teaching ability is what this chapter aims to do.
    The goal is to distill these relevant aspects into actionable wisdom for your
    machine learning projects, as shown in [Figure 12-1](#Figure-12-0).
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 现实世界中技术的一个基本问题是很难确定该听谁的建议。特别是像机器学习这样的多学科话题更是一个令人费解的挑战。你如何找到既有真实世界经验、又具备当前和相关技能、还能够有效解释的教学能力的正确结合？这种“独角兽”般的教学能力正是本章的目标。本章旨在从这些相关方面提炼出可操作的智慧，用于你的机器学习项目中，如[图 12-1](#Figure-12-0)所示。
- en: Other domains suffer from the curse of the unbounded complexity that comes with
    a multidisciplinary field. Examples include Nutritional Science, Climate Science,
    and Mixed Martial Arts. However, a common thread is the concept of an open system
    versus a closed system. One toy example of a primarily closed system is an insulated
    cup. In that example, it is easier to model the behavior of a cold liquid since
    the environment has minimal effect. But if that same cold liquid goes outside
    in a regular cup, things get murky quickly. The outside air temperature, humidity,
    wind, and sun exposure alone create cascading complexity in modeling the behavior
    of that cold liquid.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 其他领域也受到多学科领域带来的无限复杂性的困扰。例如营养科学、气候科学和混合武术。然而，一个共同的主题是开放系统与封闭系统的概念。一个主要封闭系统的玩具例子是隔热杯。在这个例子中，由于环境影响最小，所以更容易模拟冷液体的行为。但是如果同样的冷液体放在普通杯子外面，情况很快就变得混乱。外部的空气温度、湿度、风力和阳光照射单独就会在模拟这种冷液体行为中引起连锁复杂性。
- en: '![pmlo 1201](Images/pmlo_1201.png)'
  id: totrans-7
  prefs: []
  type: TYPE_IMG
  zh: '![pmlo 1201](Images/pmlo_1201.png)'
- en: Figure 12-1\. Teaching unicorn
  id: totrans-8
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图12-1 独角兽式教学
- en: This chapter explores how MLOps can leverage learnings from these other domains.
    It also explores how closed versus open systems influence domain-specific behavior
    and, ultimately, how to apply this to operationalizing machine learning.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 本章探讨了MLOps如何利用这些其他领域的经验教训。它还探讨了封闭系统与开放系统如何影响特定领域的行为，并最终如何将其应用于机器学习的运营。
- en: Unlikely Benefits of Ignorance in Building Machine Learning Models
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在构建机器学习模型时无知的不太可能的好处
- en: 'There are many unlikely benefits to ignorance. Ignorance gives you the courage
    to try something challenging, where if you knew how difficult it was, you would
    never have done it. Since 2013, ignorance has played a crucial role in two things
    I have done simultaneously: create a production machine learning model with millions
    of dollars at stake, including a 100 person company; and learn, train, and compete
    in Brazilian Jiu-Jitsu with top-ranked professional fighters and Olympians in
    wrestling and Judo. In some sense, the two things are so intertwined it is hard
    to separate one from the other in my mind. From 2010–2013 I spent three years
    taking every statistics, probability, and modeling class I could take at UC Davis
    in its MBA program while working full-time at startups in San Francisco. Since
    2017, I have also taught machine learning and cloud computing at the UC Davis
    Graduate School of Management. After I graduated, I was ready to take a General
    Management or Chief Technology Officer position and became one of the first technical
    employees at a Sports social network as the CTO and General Manager.'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 在无知中存在许多不太可能的好处。无知给了你尝试挑战性事物的勇气，如果你知道它有多难，你可能永远不会去做。自2013年以来，无知在我同时做的两件事情中起了至关重要的作用：创建了一个涉及数百万美元、包括一家有100人的公司在内的生产机器学习模型；并且学习、训练并参与巴西柔术，与排名靠前的职业搏击手和摔跤、柔道奥运选手竞争。在某种程度上，这两件事情是如此交织在一起，以至于在我的心中很难分开它们。从2010年到2013年，我在旧金山的初创公司全职工作的同时，在加州大学戴维斯分校的MBA项目中，我花了三年时间参加了所有可能的统计学、概率论和建模课程。自2017年以来，我还在加州大学戴维斯分校的管理研究生院教授机器学习和云计算。毕业后，我准备担任总经理或首席技术官，并成为一家体育社交网络的首批技术员工，担任首席技术官和总经理。
- en: Part of the company’s culture was that employees would exercise together at
    a mixed martial arts gym that also did general fitness classes. I accidentally
    started training in Brazilian Jiu-Jitsu as I got curious watching the pro fighters
    grapple. Eventually, before I knew it, I worked alongside professional fighters
    and learned the basics of submissions. A few times, I even accidentally became
    choked unconscious in sparring. I remember one time thinking, “I probably should
    tap to this head and arm choke.” Later, I wondered where I was; it looked like
    a gym, and I didn’t know what year it was. Was I in my high school gym in Southern
    California? How old am I? As blood came back into my brain, I realized that, ah,
    I got choked out, and I am in the martial arts gym in Santa Rosa, California.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 公司文化的一部分是员工们会在一家混合武术健身房一起锻炼，这家健身房也提供一般健身课程。我偶然开始参加巴西柔术训练，因为我对职业搏击手的格斗很好奇。最终，不知不觉中，我与职业搏击手并肩工作，并学会了降服技的基础。有几次，我甚至在练习中意外被使劲压制到昏迷。我记得有一次我想，“我应该轻轻地放弃这个头臂锁。”后来，我想知道我在哪里；看起来像是一个健身房，我不知道是什么年份。当血流回到我的大脑时，我意识到，啊，我被锁喉了，我在加利福尼亚州圣罗莎的武术馆里。
- en: In my first few years of training, I also entered two tournaments, winning the
    first one, a “novice” category, and then losing an “intermediate” class a couple
    of years later. In hindsight, I honestly didn’t understand what I was doing and
    faced the real risk of serious injury. I observed many people in the tournaments
    get severe damage, including head butts, broken shoulders, and ripped knee ligaments.
    In my second tournament as a 40-year old, I competed against a 20-year-old college
    football player in the 220-pound weight class. In his last match, he got in a
    real fight, got headbutted, was bleeding from the nose, and was quite angry. I
    was apprehensive about his emotional state going into our contest, thinking, “What
    the hell did I sign up for?”
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在我最初几年的训练中，我还参加了两次比赛，赢得了第一场“新手”类别的比赛，然后在几年后输掉了一个“中级”类别的比赛。事后来看，老实说，我并不理解当时在做什么，面临着严重受伤的真实风险。我看到很多人在比赛中受到严重伤害，包括头部撞击、肩膀骨折和膝关节韧带撕裂。在我作为40岁的人参加第二次比赛时，我在220磅级别的体重级别上与一名20岁的大学橄榄球运动员竞争。在他的最后一场比赛中，他卷入了一场真正的打斗，被头部撞击，鼻子流血，非常愤怒。我对他情绪状态进入我们的比赛感到担忧，心想，“我到底报了什么名？”
- en: I also counted my blessings that I was ignorant of the actual danger of competing
    in martial arts in my thirties and forties. I still enjoy training and learning
    Brazilian Jiu-Jitsu, but it is likely that if I knew what I knew today, I wouldn’t
    have taken the risks I took with as little skill as I had. Ignorance gave me the
    courage to, frankly, take dumb risks but also learn more quickly.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 我也感到庆幸，当时对于在三四十岁参加格斗运动的实际危险我是无知的。我仍然喜欢训练和学习巴西柔术，但如果我当时知道今天的知识，我可能不会以当时如此有限的技能去冒险。无知使我有勇气，坦率地说，去冒险，但也更快地学习。
- en: Similarly, in 2014, I was just as ignorant as I started the journey of building
    out a machine learning infrastructure for my company. Today this is known as MLOps.
    At the time, there wasn’t a lot of information about how to operationalize machine
    learning. As with Brazilian Jiu-Jitsu, I was eager yet ignorant of what really
    would unfold and the risks at play. Later the terror I felt in Brazilian Jiu-Jitsu
    was nothing compared to the terror I would experience in building prediction models
    by myself from scratch with the responsibility for millions of dollars a year.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，在2014年，我在开始为公司构建机器学习基础设施的旅程时和我一样无知。今天这被称为MLOps。当时关于如何运营机器学习的信息并不多。就像巴西柔术一样，我急于但却不知道真正会发生什么以及涉及的风险。后来，在独自从头开始构建预测模型并负责数百万美元的过程中，我感到的恐惧远不及我在巴西柔术中的恐惧。
- en: In the first year, 2013, our company built a sports social network and mobile
    application. But, as many employees at a startup know, building software is only
    part of a startup’s challenge; two other vital challenges are acquiring users
    and creating revenue. At the start of 2014, we had a platform, yet no users and
    no income. So we needed to come up with users quickly, or the startup would go
    bankrupt.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 在第一年，2013年，我们公司建立了一个体育社交网络和移动应用程序。但是，像许多初创公司的员工一样，构建软件只是初创公司挑战的一部分；另外两个关键挑战是获取用户和创造收入。到2014年初，我们拥有了一个平台，但没有用户和收入。所以我们需要快速吸引用户，否则这个初创公司将会破产。
- en: Building traffic generally occurs in two ways for a software platform. One way
    is to build organic growth through word of mouth. A second way is to purchase
    advertising. The problem with buying advertising is that it can quickly become
    a permanent cost allocation. The dream scenario was for our company to get users
    to come to our platform without buying ads. We had a relationship with a few sports
    stars, including former NFL quarterback Brett Favre. This initial “superstar”
    social media influencer gave us tremendous insight into using organic “growth
    hacking” to grow our platform.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 对于软件平台来说，通常有两种方式来增加流量。一种方式是通过口碑传播建立有机增长。第二种方式是购买广告。购买广告的问题在于它可能很快成为永久的成本分配。我们的梦想情景是让我们的公司不用购买广告就能吸引用户来到我们的平台。我们与一些体育明星有关系，包括前NFL四分卫布雷特·法夫尔。这位最初的“超级”社交媒体影响者为我们提供了大量关于如何利用有机的“增长黑客”来扩展我们平台的见解。
- en: At one point, this machine learning feedback loop got us into the millions of
    monthly active users. Then, the Facebook legal team sent us a communication that
    they would “deplatform us” metaphorically. Our “crime” was creating unique, original
    sports content that had links to our platform. There is an ongoing question about
    the potential monopolistic power of Big Tech, and the growth hacking power of
    our influence algorithm got the attention of Facebook. This was another data point
    about the real-world success of our prediction system. Let’s dive into how we
    did this next.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 在某个时候，这个机器学习反馈循环让我们达到了数百万月活跃用户。然后，Facebook的法律团队向我们发送了一封通信，形容他们将“取消我们的平台”的意图。我们的“罪行”是创建了与我们平台链接的独特原创体育内容。关于大科技公司潜在的垄断力量以及我们影响算法的增长黑客力量引起了Facebook的关注，这是我们的预测系统在现实世界中成功的又一个数据点。接下来我们深入探讨如何做到这一点。
- en: MLOps Projects at Sqor Sports Social Network
  id: totrans-19
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Sqor体育社交网络的MLOps项目
- en: Building a startup from zero—i.e., zero staff, zero uses, and zero revenue—is
    a stressful pursuit. From 2013–2016 I spent many hours in the park underneath
    the Transamerica building in San Francisco, directly under my office, plotting
    these things. In particular, the epistemic risk, the risk I was unaware of, of
    betting millions of dollars on machine learning predictions was terrifying. But,
    in many ways, the technical challenges are much more comfortable than the psychological
    ones.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 从零开始建立一家初创公司——即零员工、零用户和零收入——是一项紧张的追求。从2013年到2016年，我在旧金山Transamerica大厦下面的公园里花了很多时间，直接在办公室下面策划这些事情。特别是认识论风险，即我未意识到的风险，即依靠机器学习预测投入数百万美元是令人恐惧的。但在很多方面，技术挑战比心理挑战更容易应对。
- en: Here is an overview of how the system worked. In a nutshell, the user posts
    original content and then we cross-post the content to other social networks like
    Twitter and Facebook. We then collected the pageviews generated for our site.
    The pageviews became the target in our ML prediction system. [Figure 12-2](#Figure-12-1)
    shows the MLOps pipeline for our social media company.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是系统运行方式的概述。简而言之，用户发布原创内容，然后我们将内容交叉发布到Twitter和Facebook等其他社交网络上。我们随后收集了为我们的网站生成的页面浏览量。这些页面浏览量成为我们ML预测系统的目标。[图 12-2](#Figure-12-1)展示了我们社交媒体公司的MLOps管道。
- en: '![pmlo 1202](Images/pmlo_1202.png)'
  id: totrans-22
  prefs: []
  type: TYPE_IMG
  zh: '![pmlo 1202](Images/pmlo_1202.png)'
- en: Figure 12-2\. MLOps pipeline for sports social network
  id: totrans-23
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 12-2\. 运动社交网络的MLOps管道
- en: Later, we collected the social media signals from these users, i.e., their median
    retweets, median likes, and Wikipedia page views. These became the features and
    helped us cut through the noise of false data like “fake” followers. We then paid
    original content creators like Conor McGregor, Brett Favre, Tim McGraw, and Ashlyn
    Harris by the engagement they generated on our site. It turns out we were way
    ahead of the game in doing this, and [Snapchat pays out millions for users to
    publish original content on its platform](https://oreil.ly/mPQq5).
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 后来，我们收集了这些用户的社交媒体信号，即他们的中位数转推数、中位数点赞数和维基百科页面浏览量。这些成为了特征，并帮助我们摆脱“假”粉丝等错误数据的干扰。然后，我们按照他们在我们网站上生成的参与度支付原创内容创作者，如康纳·麦格雷戈、布雷特·法弗尔、蒂姆·麦格劳和阿什林·哈里斯。结果证明，在这方面我们领先于游戏，并且[Snapchat为用户在其平台上发布原创内容支付了数百万美元](https://oreil.ly/mPQq5)。
- en: The most challenging parts of the problem were reliably collecting the data
    and then deciding to pay millions of dollars based on the predictions. Both were
    much more complicated than I initially thought. So let’s dive into these systems
    next.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 问题最具挑战性的部分是可靠地收集数据，然后基于预测决定支付数百万美元。这两者都比我最初想象的复杂得多。所以让我们接下来深入研究这些系统。
- en: Mechanical Turk Data Labeling
  id: totrans-26
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 机械土耳其数据标注
- en: Initially figuring out that social media signals gave us enough predictive power
    to “growth hack” our platform was a huge breakthrough. But, unfortunately, the
    most formidable challenge was yet to come.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 最初发现社交媒体信号给了我们足够的预测能力来“增长黑客”我们的平台是一个巨大的突破。但不幸的是，最艰巨的挑战还在后面等着我们。
- en: We needed to collect the social media handles reliably for thousands of “celebrity”
    social media users. Unfortunately, it didn’t go well initially and ended in complete
    failure. Our first process looked like [Figure 12-3](#Figure-12-2).
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要可靠地收集成千上万个“名人”社交媒体用户的账号。不幸的是，最初并不顺利，最终以彻底失败告终。我们的第一个流程看起来像[图 12-3](#Figure-12-2)。
- en: '![pmlo 1203](Images/pmlo_1203.png)'
  id: totrans-29
  prefs: []
  type: TYPE_IMG
  zh: '![pmlo 1203](Images/pmlo_1203.png)'
- en: Figure 12-3\. Bad feature engineering
  id: totrans-30
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 12-3\. 糟糕的特征工程
- en: Despite some of the interns being future NFL players themselves, the critical
    problem was that they didn’t have the training to input the social media handles
    reliably. As a result, it was easy to mistake Anthony Davis, the NFL player, with
    Anthony Davis, the NBA player, and swap Twitter handles. This feature engineering
    reliability problem would kill the accuracy of our model. We fixed this by adding
    automation in the form of Amazon Mechanical Turk. We trained a “quorum” of “turkers”
    to find the social media handles of athletes, and if 7/9 agreed, we found this
    equated to around 99.9999% accuracy. [Figure 12-4](#Figure-12-3) shows Mechanical
    Turk labeling system for our social media company.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然一些实习生本身是未来的NFL球员，但关键问题在于他们没有接受过可靠地输入社交媒体账号的培训。结果，很容易混淆NFL球员安东尼·戴维斯和NBA球员安东尼·戴维斯，并交换Twitter账号。这种特征工程可靠性问题将影响我们模型的准确性。我们通过引入亚马逊机械土耳其的自动化解决了这个问题。我们培训了一群“土耳其人”来查找运动员的社交媒体账号，如果7/9的人同意，我们发现这大约等于99.9999%的准确性。[图 12-4](#Figure-12-3)展示了我们社交媒体公司的机械土耳其标签系统。
- en: Note
  id: totrans-32
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: Back in 2014, less was known about data engineering and MLOps. Our labeling
    system project ran through an incredible athlete, programmer, and former UC Davis
    graduate [Purnell Davis](https://oreil.ly/yc14S). Purnell developed this system
    from scratch between doing workouts with athletes like NFL player Marshawn Lynch
    or 300-pound professional MMA fighters, who trained with our company at the same
    gym during lunch or at the crack of dawn.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 回到2014年，人们对数据工程和MLOps的了解较少。我们的标记系统项目涉及到了一位令人惊叹的运动员、程序员和前UC戴维斯大学毕业生[Purnell Davis](https://oreil.ly/yc14S)。Purnell在与像NFL球员Marshawn
    Lynch或300磅级职业MMA格斗选手的公司一起午餐或黎明时分锻炼时，从零开始开发了这个系统。
- en: '![pmlo 1204](Images/pmlo_1204.png)'
  id: totrans-34
  prefs: []
  type: TYPE_IMG
  zh: '![pmlo 1204](Images/pmlo_1204.png)'
- en: Figure 12-4\. Mechanical Turk labeling
  id: totrans-35
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图12-4\. 机械土耳其标签
- en: Influencer Rank
  id: totrans-36
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 影响力排名
- en: Once we could get the data labeled, we had to collect data from social media
    APIs. You can find an excellent example of the type of code necessary to bring
    this into an [ML Engine in this repository](https://oreil.ly/D6Wqb).
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦我们完成数据标记，我们就必须从社交媒体API收集数据。你可以在这个仓库中找到一个将其引入[ML引擎所需的代码示例](https://oreil.ly/D6Wqb)。
- en: 'For example, LeBron James’s statistics on Twitter look like the following according
    to our data collection API:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，根据我们的数据收集API，LeBron James在Twitter上的统计数据如下：
- en: '[PRE0]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Note
  id: totrans-40
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: If you are familiar with the show *The Shop* on HBO, you will know Maverick
    Carter and LeBron James. We “almost” officially worked with them, but the talks
    didn’t work out. We ultimately developed a relationship with FC Bayern Munchen
    instead as a critical partner.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你熟悉HBO的节目*The Shop*，你就会认识Maverick Carter和LeBron James。我们“几乎”正式与他们合作过，但谈判并未成功。最终我们与拜仁慕尼黑建立了关键伙伴关系。
- en: This collection data then fed into a prediction model. A talk I gave at the
    [R meetup in the Bay Area in 2014](https://oreil.ly/rI0Sw) shows some of our handiwork.
    The initial model used the R library [Caret](https://oreil.ly/MtN0Z) to predict
    the pageviews. In [Figure 12-5](#Figure-12-3_2) the original prediction algorithms
    for finding influencers was done in R and this ggplot-based chart shows the accuracy
    of the prediction.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 然后这些收集的数据输入到了一个预测模型中。我在2014年在[R湾区的meetup](https://oreil.ly/rI0Sw)上的演讲展示了我们的一些成果。最初的模型使用了R库[Caret](https://oreil.ly/MtN0Z)来预测页面浏览量。在[图12-5](#Figure-12-3_2)中，用于找到影响力者的原始预测算法是用R完成的，这个基于ggplot的图表显示了预测的准确性。
- en: '![pmlo 1205](Images/pmlo_1205.png)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![pmlo 1205](Images/pmlo_1205.png)'
- en: Figure 12-5\. Predicted pageviews from social media influencers versus actual
    pageviews
  id: totrans-44
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图12-5\. 社交媒体影响者预测页面浏览量与实际页面浏览量
- en: We then built a payment system model using the pageviews as the target metric.
    Ultimately, it led to exponential growth that fueled a quick expansion into millions
    of pageviews a month. But, as I mentioned earlier, the scary part was the sleepless
    nights wondering if I was bankrupting the company as we spent millions of dollars
    on the predictions I helped create.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 然后我们建立了一个以页面浏览量为目标指标的支付系统模型。最终，这导致了指数级的增长，推动了我们每月数百万的页面浏览量的快速扩展。但正如我之前提到的，令人害怕的是那些失眠的夜晚，担心我在帮助创建的预测上花费了数百万美元而导致公司破产。
- en: Athlete Intelligence (AI Product)
  id: totrans-46
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 运动员智能（AI产品）
- en: With a core MLOps pipeline serving out predictions and fueling our growth without
    purchasing ads, we started to evolve our product into an AI Product called “Athlete
    Intelligence.” We had two AI product managers who managed this full time. The
    general idea of the core product was for “influencers” to understand what they
    could expect in payment and brands to use this dashboard to partner directly with
    athletes. In [Figure 12-6](#Figure-12-4), we used unsupervised machine learning
    to categorize different aspects of athletes, including their social media influence.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 通过核心MLOps管道提供预测并推动我们的增长，而不是购买广告，我们开始将我们的产品发展成一个名为“Athlete Intelligence”的AI产品。我们有两位全职的AI产品经理负责管理这一产品。这一核心产品的一般理念是让“影响力者”了解他们可以期待的报酬，而品牌可以使用这个仪表板直接与运动员合作。在[图12-6](#Figure-12-4)中，我们使用无监督机器学习来分类运动员的不同方面，包括他们的社交媒体影响力。
- en: '![pmlo 1206](Images/pmlo_1206.png)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![pmlo 1206](Images/pmlo_1206.png)'
- en: Figure 12-6\. Athlete intelligence
  id: totrans-49
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图12-6\. 运动员智能
- en: Additional features included unsupervised machine learning that “clustered”
    similar athlete social profiles. This feature allowed us to package different
    types of athletes into influencer marketing bundles ([Figure 12-7](#Figure-12-5)).
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 额外功能包括无监督机器学习，“聚类”了类似的运动员社交资料。这一功能使我们能够将不同类型的运动员打包成影响力营销捆绑包（[图12-7](#Figure-12-5)）。
- en: '![pmlo 1207](Images/pmlo_1207.png)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![pmlo 1207](Images/pmlo_1207.png)'
- en: Figure 12-7\. Athlete intelligence clustering dashboard
  id: totrans-52
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图12-7\. 运动员智能聚类仪表盘
- en: Finally, this growth led to two new revenue products for our company. First
    was a merchandising platform built on top of Shopify that turned into a 500k/year
    business, and a second was a multimillion dollar influencer marketing business.
    We directly contacted brands and connected them with the influencers on our platform.
    An excellent example of this is the “Game of War” commercial we brokered with
    [Machine Zone and Conor McGregor](https://oreil.ly/G6JrI).
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，这种增长为我们的公司带来了两种新的收入产品。首先是基于Shopify构建的商品平台，发展成为年销售额50万美元的业务；第二是一个千万美元的影响力营销业务。我们直接联系品牌，并将他们与我们平台上的影响者联系起来。一个很好的例子是我们与[Machine
    Zone和Conor McGregor](https://oreil.ly/G6JrI)合作的《Game of War》广告。
- en: In a nutshell, having an effective MLOps pipeline led us to both users and revenue.
    Without the prediction model, we would have had no users; without the users, we
    would have had no income; without income, we would have no business. Practical
    MLOps pay dividends.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 简言之，拥有有效的MLOps管道使我们同时获得了用户和收入。没有预测模型，我们将没有用户；没有用户，我们将没有收入；没有收入，我们将没有业务。实用的MLOps带来丰厚的回报。
- en: Let’s talk more about the open versus closed system in the next section. Things
    seem simple in a controlled environment like academic data science, the martial
    arts gym in a GI, or theoretical advice on nutrition like calories in versus calories
    out. Real-world or open systems have many additional influences, though, that
    are much more challenging to harness.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们在下一节更多地讨论开放与封闭系统。在像学术数据科学、柔道馆内穿着GI的环境或理论上的营养建议（比如热量摄入与消耗）这样的受控环境中，事情看起来很简单。然而，现实世界或开放系统有许多额外的影响因素，这些因素要难得多地控制和利用。
- en: The Perfect Technique Versus the Real World
  id: totrans-56
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 完美技术与现实世界的对比
- en: Does an armbar (an arm attack that breaks an arm by hyperextending the elbow)
    by a Brazilian Jiu-Jitsu black belt in the GI (heavy cotton jacket uniform in
    martial arts) have the same effectiveness against an opponent not wearing a GI?
    Likewise, in machine learning, what is most important? Is it the accuracy, the
    technique, or the ability to provide value to a customer or knowledge to a situation?
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 巴西柔术黑带在GI（柔道服）内使用的臂锁（通过超伸肘部断裂手臂的攻击方式）对于没有穿GI的对手是否同样有效？同样地，在机器学习中，什么最重要？是准确性、技术，还是能够为客户提供价值或在特定情况下提供知识？
- en: Note
  id: totrans-58
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: If you are curious about what it looks like to use an armbar in competition,
    google “Ronda Rousey armbar,” and you will see a master technician at work.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你对在比赛中使用臂锁的场景感兴趣，可以搜索“Ronda Rousey armbar”，你将看到一个技术精湛的大师在工作。
- en: What about a street fight versus a grappling match or a UFC match versus a grappling
    match? Even nonexperts would agree that the more rules involved in a technique,
    the less chance it has to succeed in an environment with little or no rules, i.e.,
    the real world.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 在街头斗殴与角力比赛、UFC比赛与角力比赛之间有什么区别？即使是非专家也会同意，在技术涉及的规则越多的环境中，它在没有或几乎没有规则的现实世界中成功的机会就越小。
- en: I learned a lesson by traveling to random gyms to train across the United States
    when I was on business. On more than one occasion, a brown or black belt expert
    in doing GI Brazilian Jiu-Jitsu would spar with me in NOGI (no uniform) and instantly
    try to perform an armbar. I have spent years training with professional fighters
    who practice NOGI. After getting caught perhaps hundreds of times in the submission,
    I had learned how to easily escape it by slipping my arm out in a specific way.
    How did I understand this? I just copied what the pro fighters both did and taught
    me and practiced it over and over again.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 我通过在商务出差期间游历美国的随机柔术馆来学到了一个教训。在多次情况下，一个精通穿着无GI进行巴西柔术的棕带或黑带专家会与我在无GI环境下切磋，并立即试图进行臂锁。我曾花费多年时间与专业的NOGI练习的职业选手们训练。在被这一技术收割数百次后，我学会了如何通过特定的方式轻松地摆脱它。我是如何理解这一点的呢？我只是模仿了职业选手们的做法和教导，并一遍又一遍地练习。
- en: Many experts in GI, from black to brown belts to Olympic medalists, said similar
    things. “You can’t do this in GI,” or “I would have had that in GI,” or “you shouldn’t
    do this,” etc., as they had a horrified or surprised look on their face. Their
    “perfect model” didn’t work and their worldview was shocked. Did this mean I was
    even close to as good as these experts? No, it meant that they had much better
    technique than I did in a context that didn’t apply to the one we were currently
    in, grappling without a uniform. Notice in [Figure 12-8](#Figure-12-1_2) how closing
    the system, or adding rules, to the outside world adds more control yet less realism.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 许多从黑带到棕带再到奥运奖牌得主的GI专家都说过类似的话。“你在GI中做不到这一点”，或者“我在GI中可以做到这一点”，或者“你不应该这样做”，等等，他们的表情既震惊又惊讶。他们的“完美模型”不起作用，他们的世界观受到了冲击。这是否意味着我和这些专家一样出色？不，这意味着他们在一个当前不适用的环境中拥有比我更好的技术，即不穿制服的摔跤。请注意在[图12-8](#Figure-12-1_2)中如何通过关闭系统或添加规则来增加对外部世界的控制，却减少了现实感。
- en: '![pmlo 1208](Images/pmlo_1208.png)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![pmlo 1208](Images/pmlo_1208.png)'
- en: Figure 12-8\. Martial arts techniques in the real world
  id: totrans-64
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图12-8\. 现实世界中的武术技术
- en: 'In the book *Critical Thinking* (MIT Press), Jonathan Haber mentions how Ann
    J. Cahill and Stephan Bloch-Schulman of Elon University make their higher education
    class like a martial arts studio:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 在《批判性思维》（MIT出版社）一书中，乔纳森·哈伯提到埃隆大学的安·J·卡希尔和斯蒂芬·布洛克-舒尔曼如何将他们的高等教育课堂打造成武术馆：
- en: 'In such [martial arts] classes, at each successive level of assessment, students
    are also required to demonstrate that they have maintained the skills they achieved
    in previous belt levels. Importantly, a decent sensei does not award a belt based
    on effort: whether a student has tried hard to master a certain action is not
    relevant. The question is, can the student throw the punch?'
  id: totrans-66
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 在这样的[武术]课堂上，每个评估级别的学生还需要展示他们保持了在前几级黑带中获得的技能。重要的是，一位优秀的老师不会根据努力程度授予黑带：学生是否努力掌握某项动作并不重要。问题在于，学生能否成功打出这一拳？
- en: Note
  id: totrans-67
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注
- en: When explaining this same MMA (mixed martial arts) and machine learning theory
    in a class I teach in Northwestern’s data science program, I found out one of
    my students spent 14 years in the NFL. He then pointed out what he admired about
    MMA because the best athletes don’t have technique agendas. Instead, they wait
    to see what happens and apply the correct technique for the situation at hand.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 当我在西北大学数据科学项目中教授混合武术（MMA）和机器学习理论时，我发现我的一位学生在NFL效力了14年。他指出，他喜欢MMA的原因是最优秀的运动员没有技术上的偏好，而是等待事态发展，并根据情况选择正确的技术应对。
- en: Much like Jacob, the black belt former MMA fighter, I see similar issues in
    real-world machine learning. As a professor, I teach machine learning at top universities
    and also am an industry practitioner. The academic tools like [sklearn](https://oreil.ly/sub5D)
    and [pandas](https://oreil.ly/uau1J) and the educational datasets on Kaggle are
    the “Kata.” These datasets and tools are necessary to “strip away” the real-world
    complexity to teach the material. A critical next step is to make the student
    aware that machine learning Kata is not real-world. The real world is much more
    dangerous and complicated.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 像雅各布一样，这位前MMA黑带选手，我在现实世界的机器学习中看到了类似的问题。作为教授，我在顶尖大学教授机器学习，并且也是行业从业者。像[sklearn](https://oreil.ly/sub5D)和[pandas](https://oreil.ly/uau1J)这样的学术工具和Kaggle上的教育数据集就是“形式”。“形式”是必需的，以“剥离”真实世界的复杂性来教授材料。关键的下一步是让学生意识到，机器学习形式并非真实世界。真实世界要复杂得多，更加危险。
- en: Critical Challenges in MLOps
  id: totrans-70
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: MLOps的关键挑战
- en: Let’s discuss some specific challenges in bringing machine learning to production.
    Three main challenges are ethical and unintended consequences, lack of operational
    excellence, and focus on prediction accuracy versus the big picture. Operational
    excellence in implementing machine learning is what matters much more than the
    technique in the real world. This exact point is clearly articulated in the research
    paper [“Hidden Technical Debt in Machine Learning Systems”](https://oreil.ly/3RjTA).
    The paper’s authors found “…it is common to incur massive ongoing maintenance
    costs in real-world ML systems.” Let’s discuss some of these issues next.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们讨论一些将机器学习引入生产中面临的具体挑战。三个主要挑战是伦理和意外后果、缺乏运营卓越以及专注于预测准确性而非大局观。在实施机器学习中，运营卓越比技术更重要。这一点在研究论文
    ["机器学习系统中的隐藏技术债务"](https://oreil.ly/3RjTA) 中得到了清晰表达。该论文的作者们发现，“在现实世界的 ML 系统中，经常会产生巨大的持续维护成本。”接下来让我们讨论一些这些问题。
- en: Ethical and Unintended Consequences
  id: totrans-72
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 伦理和意外后果
- en: It is easy to get “hand-wavy” or self-righteous about ethics and turn people
    off. This fact doesn’t mean the topic doesn’t need discussion. Many companies
    that deal with social media have created weapons of mass disinformation. According
    to [Tristan Harris](https://oreil.ly/lIsEw), “64% of extremist groups that people
    joined were due to Facebook’s own recommendation system” and YouTube “recommended
    Alex Jones, InfoWars, conspiracy theory videos 15 billion times. So that’s more
    than the combined traffic of the Washington Post, BBC, Guardian, Fox news combined”,
    and 70% of all watch time on YouTube is recommendations.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 对伦理问题进行“半吊子”或自以为是的讨论是很容易让人反感的事情。这并不意味着这个话题不需要讨论。许多处理社交媒体的公司已经创造了大规模误导武器。据 [Tristan
    Harris](https://oreil.ly/lIsEw) 表示，“64% 的极端组织的参与都是由于 Facebook 自己的推荐系统”，YouTube
    “推荐了亚历克斯·琼斯、InfoWars 和阴谋论视频达 150 亿次。这比华盛顿邮报、BBC、卫报和福克斯新闻的总和流量还要多”，而 YouTube 的
    70% 观看时间来自推荐视频。
- en: The consequences are no longer theoretical. Many social networks and big technology
    companies are actively changing their approach to machine learning–based enabled
    systems. These updates range from putting facial recognition systems on hold to
    evaluating the outcomes of recommendation engines more closely. Ethical considerations
    in the real world also have to be part of an MLOps solution, not just whether
    the technique has predictive power.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 后果已不再是理论上的问题。许多社交网络和大型科技公司正在积极改变他们基于机器学习的系统的方法。这些更新包括暂停使用面部识别系统，更加密切地评估推荐引擎的结果。在现实世界中，伦理考量也必须成为
    MLOps 解决方案的一部分，不仅仅是技术是否具有预测能力。
- en: Already some solutions to the problem of echo chambers appear—for example, the
    *IEEE Spectrum* in the article [“Smart Algorithm Bursts Social Networks *Filter
    Bubbles*”](https://oreil.ly/HD0w5). They go on to say, “one team of researchers
    in Finland and Denmark has a different vision for how social media platforms could
    work. They developed a new algorithm that increases the diversity of exposure
    on social networks, while still ensuring that content is widely shared.”
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 已经出现了一些解决信息茧房问题的方法，例如 *IEEE Spectrum* 文章 ["智能算法冲破社交网络的“过滤泡泡”"](https://oreil.ly/HD0w5)
    中提到的。他们继续说，“芬兰和丹麦的一个研究团队对社交媒体平台的工作方式有了不同的愿景。他们开发了一种新算法，增加社交网络上的暴露多样性，同时确保内容广泛分享。”
- en: This situation is where ethics come into play. If a company or machine learning
    engineer is 100% focused on increasing engagement and profit, they may not want
    to lose 10% of their profit to “save the world.” This ethical dilemma is a classic
    case study in externalities. A nuclear power facility might deliver tremendous
    energy benefits, but if they dump the nuclear waste into the ocean, other innocent
    victims pay the price yet reap no reward.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 这种情况涉及到伦理问题。如果一家公司或机器学习工程师完全专注于提高用户参与度和利润，他们可能不愿意因为“拯救世界”而损失10%的利润。这种伦理困境是外部性的一个经典案例研究。核能发电设施可能提供巨大的能源利益，但如果他们将核废料倾倒进海洋，其他无辜的受害者将为此付出代价却无法获得任何回报。
- en: Lack of Operational Excellence
  id: totrans-77
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 缺乏运营卓越
- en: Another antipattern of machine learning engineering is the inability to maintain
    a machine learning model effectively. A good way to reason about this situation
    is to consider building a wood bookshelf versus growing a fig tree. If you make
    a bookshelf, you will probably never modify it again; once designed, that is the
    end of the project. On the other hand, a fig tree is part of an open system. It
    needs water, sun, soil, nutrients, wind, trimming of branches, and protection
    from insects and disease. The fig tree adapts to the environment over time but
    needs oversight from the person who wants to enjoy the figs later. In other words,
    the fig tree needs maintenance to produce high-quality fruit. A machine learning
    system, like any software system, is never finished like a bookshelf. Instead,
    it requires nurturing like a fig tree.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个机器学习工程的反模式是无法有效地维护机器学习模型。理解这种情况的一个好方法是考虑建造木制书架与种植无花果树之间的区别。如果你制造一本书架，你可能永远不会再修改它；一旦设计完成，这个项目就结束了。另一方面，无花果树是开放系统的一部分。它需要水、阳光、土壤、营养物质、风、修剪树枝以及对抗昆虫和疾病的保护。无花果树随着时间适应环境，但需要有人进行监督，以便稍后享用果实。换句话说，无花果树需要维护才能产生高质量的果实。机器学习系统，如任何软件系统一样，永远不像书架那样完工。相反，它需要像养护无花果树一样持续养护。
- en: Next, let’s imagine a company that predicts credit limits for each new furniture
    store customer. Let’s say an initial model was developed in January 2019\. Since
    then, a lot has changed. There could be substantial [data drift](https://oreil.ly/TvAng)
    from the features used to create the model. We know that many retail stores in
    2020–2021 went out of business, and the mall business model is under serious threat.
    COVID-19 accelerated a declining trend for physical retail, among other updates
    in the underlying data. As a result, the data “drifted,” i.e., purchase patterns
    are widely different post-COVID-19, and the original static machine learning model
    may not work as intended.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，让我们想象一家公司为每位新家具店顾客预测信用额度。假设初始模型是在2019年1月开发的。此后，发生了很多变化。使用于创建模型的特征可能存在显著的[数据漂移](https://oreil.ly/TvAng)。我们知道，2020年至2021年间许多零售店关闭，购物中心的商业模式面临严重威胁。COVID-19加速了实体零售的下滑趋势，此外，底层数据也发生了其他更新。因此，数据“漂移”，即COVID-19后的购买模式大相径庭，原始静态机器学习模型可能无法按预期工作。
- en: A machine learning engineer would be wise to account for constant retraining
    of the model (nurturing the fig tree) by setting alerts on the data changes when
    a data drift threshold occurs. Additionally, business metric monitoring could
    send an alert if late payments exceed a threshold. For example, let’s imagine
    that typically a company selling furniture has 5% of customers that pay 30 days
    late on their credit. If suddenly 10% of the customers pay 30 days late, then
    the underlying ML model may need an update.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 一个机器学习工程师明智的做法是通过在数据发生变化时设定警报来持续重新训练模型（养护无花果树）。此外，业务指标监控可以在逾期付款超过阈值时发出警报。例如，假设一家销售家具的公司通常有5%的客户在其信用上逾期30天。如果突然有10%的客户逾期30天支付，则底层ML模型可能需要更新。
- en: The concept of alerts and monitoring for machine learning should not be a surprise
    to traditional software engineers. For example, we monitor CPU load on individual
    servers, latency for mobile users, and other key performance indicators. With
    machine learning operations, the same concept applies.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 对于机器学习的警报和监控概念对传统软件工程师而言并不奇怪。例如，我们监控单个服务器的CPU负载，移动用户的延迟以及其他关键性能指标。在机器学习操作中，同样的概念适用。
- en: Focus on Prediction Accuracy Versus the Big Picture
  id: totrans-82
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 焦点应放在预测准确性与整体大局之间。
- en: As discussed earlier in the chapter, even world-class practitioners can sometimes
    focus on the technique at the Big Picture’s expense. But, like the “perfect armbar,”
    which doesn’t quite work in a different situation, a model can be just as brittle.
    A great example of the tug of war is the Nate Silver versus Nassim Taleb debate.
    Issac Faber [has an excellent breakdown of the critical points](https://oreil.ly/0sQhq)
    in a Medium article. Isaac points out that not all models are perfect replicas
    of the real world because they cannot tease out the uncertainty of what we do
    not know, i.e., immeasurable risk. The debate between Nate Silver versus Nassim
    Taleb comes down to whether it is possible to model elections or whether it is
    an illusion to think we can model them. The election events of 2020 do seem to
    put points in favor of Nassim Taleb.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 正如本章前面讨论的那样，即使是世界一流的从业者有时也会因为关注大局而忽略技术细节。但就像“完美的肩臂锁”在不同情况下可能不起作用一样，模型也可能同样脆弱。一场很好的拉锯战的例子是纳特·西尔弗与纳西姆·塔勒布的辩论。[艾萨克·费伯在Medium文章中详细分析了关键要点](https://oreil.ly/0sQhq)。艾萨克指出，并非所有模型都是现实世界的完美复制品，因为它们无法剔除我们不知道的不确定性，即无法测量的风险。纳特·西尔弗与纳西姆·塔勒布之间的辩论归结为，是否可能对选举进行建模，或者认为我们可以对其进行建模是一种幻觉。2020年的选举事件似乎支持纳西姆·塔勒布的观点。
- en: The black-belt Jacob says the same thing when he points out that a Kata is a
    simplified version of a practice technique. The complexity of the real world and
    the training exercise is in inherent conflict. The model or technique may be flawless,
    but the real world may not care. For example, in the case of the 2020 presidential
    election, even the best modeler didn’t anticipate the probability of an insurrection
    or state officials pressured to throw out ballots. As Issac describes this problem,
    it is the difference between aleatory and epistemic uncertainty. The aleatory
    risk you can measure, say, the probability of heads or tails, but the epistemic
    risk you cannot, like an insurrection that could overturn a presidential election.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 黑带雅各布在指出Kata是实践技术的简化版本时也表达了同样的看法。现实世界的复杂性与训练练习之间存在固有的冲突。模型或技术可能是完美无缺的，但现实世界可能并不在乎。例如，在2020年总统选举中，即使是最好的建模者也没有预料到发生叛乱或州官员被迫作废选票的可能性。正如艾萨克描述的那样，这是随机和认识不确定性之间的差异。你可以测量随机风险，比如抛硬币的概率，但你无法测量认识风险，比如可能推翻总统选举的叛乱。
- en: Dr. Steven Koonin, whom I worked for at Caltech for several years, says something
    similar in his book about climate science. Just like election predictions, nutritional
    science, and other complex systems, the topic of climate science is instantly
    polarizing. In the book, *Unsettled* (BenBella Books) Koonin says, “Not only can
    we be fooled by failing to take a ‘big picture view of climate over time, but
    we can also be fooled by failing to take a big picture view of the planet.” Further,
    he goes on to say, “Projections of future climate and weather events rely on models
    demonstrably unfit for the purpose.” Whether you believe his statement or not,
    it is worth considering the complexity of real-world modeling of a complex system
    and what can go wrong.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 我在加州理工学院与之共事多年的史蒂文·库宁博士在他关于气候科学的书中也表达了类似的观点。就像选举预测、营养科学和其他复杂系统一样，气候科学的话题也是立即引起分歧的。在他的书《不稳定》（BenBella
    Books）中，库宁说，“我们不仅可能因为未能对气候长期大局进行全面的视角而受骗，还可能因为未能对地球进行全面的视角而受骗。”此外，他继续说，“未来气候和天气事件的预测依赖于明显不适合此目的的模型。”无论你是否相信他的说法，都值得考虑复杂系统现实建模以及可能出现的问题。
- en: A good summary of this dilemma is to be cautious about the confidence in a prediction
    or technique. One of the scariest and most talented grapplers I trained with,
    Dave Terrell, who fought for the UFC championship, told me, don’t ever get in
    a fight with multiple opponents. The more skill and “skin in the game” a practitioner
    has, the more they become aware of the epistemic risk. Why risk your life in a
    street fight with multiple people even if you are a world-class martial artist?
    Likewise, why be more confident than you should when you predict an election,
    stock prices, or natural systems?
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个困境的一个很好的总结是要对预测或技术的信心保持谨慎。我曾与之一起训练过的一位最可怕和最有才华的擒拿手，戴夫·特雷尔，他曾为UFC冠军而战，告诉我，永远不要与多个对手交战。从业者拥有的技能越多，越能意识到认识风险的存在。即使你是世界一流的武术家，为什么要在街头与多人对抗中冒险生命？同样地，即使你预测选举、股票价格或自然系统，为什么要比你应有的更自信？
- en: In practice, the best way to approach this problem in production is to limit
    the technique’s complexity and assume a lower knowledge of epistemic uncertainty.
    This takeaway could mean a traditional machine learning high explainability is
    better than a complex deep learning model with marginally better accuracy.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 在实践中，解决生产中的这个问题的最佳方法是限制技术的复杂性，并假设对认知不确定性的了解较低。这个要点可能意味着传统的机器学习高可解释性比稍微准确率更高的复杂深度学习模型更好。
- en: Final Recommendations to Implement MLOps
  id: totrans-88
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 实施MLOps的最终建议
- en: 'Before we wrap up, we want to walk you through some tips for implementing MLOps
    in your organization. First, here are a set of final, global recommendations:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们结束之前，我们想带领您了解一些在组织中实施MLOps的技巧。首先，以下是一组最终的全球建议：
- en: Start with small wins.
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从小胜利开始。
- en: Use the cloud, don’t fight the cloud.
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用云，不要与云对抗。
- en: Get you and your team certified on a cloud platform and an ML specialization.
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使您和您的团队在云平台和ML专业上获得认证。
- en: Automate from the start of a project. An excellent initial automation step is
    the continuous integration of your project. Another way of putting this is that
    “if it isn’t automated, it is broken.”
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从项目开始就自动化。优秀的初始自动化步骤是持续集成您的项目。另一种说法是，“如果不自动化，就是出了问题。”
- en: Practice Kaizen, i.e., continuous improvement with your pipeline. This method
    improves the software quality, the data quality, the model quality, and the customer
    feedback.
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实践改善，即通过您的流程进行持续改进。这种方法改善了软件质量、数据质量、模型质量和客户反馈。
- en: When dealing with large teams or big data, focus on using platform technology
    such as AWS SageMaker, Databricks, Amazon EMR, or Azure ML Studio. Let the platform
    do the heavy lifting for your team.
  id: totrans-95
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在处理大团队或大数据时，专注于使用平台技术，如AWS SageMaker、Databricks、Amazon EMR或Azure ML Studio。让平台为您的团队减轻负担。
- en: Don’t focus only on the complexity of techniques, i.e., deep learning versus
    solving the problem with any tool that works.
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不要只关注技术复杂性，即深度学习与使用任何有效工具解决问题的对比。
- en: Take data governance and cybersecurity seriously. One way to accomplish this
    is by using enterprise support for your platform and having regular audits of
    your architecture and practices.
  id: totrans-97
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 认真对待数据治理和网络安全。实现这一目标的一种方法是利用平台的企业支持，并定期审核您的架构和实践。
- en: 'Finally, there are three laws of automation to consider when thinking about
    MLOps:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，在考虑MLOps时，有三个自动化法则需要考虑：
- en: Any task that talks about being automated will eventually be automated.
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果任务是关于自动化的，最终都会被自动化。
- en: If it isn’t automated, it’s broken.
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果没有自动化，就会出问题。
- en: If a human is doing it, a machine eventually will do it better.
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果人类在做，机器最终会做得更好。
- en: Now, let’s dig into some tips for dealing with security concerns.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们深入探讨一些处理安全问题的技巧。
- en: Data Governance and Cybersecurity
  id: totrans-103
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据治理和网络安全
- en: 'There are two seemingly conflicting problems in MLOps: increased cybersecurity
    concerns and lack of machine learning in production. On the one hand, too many
    rules, and nothing gets done. On the other hand, ransom attacks on critical infrastructure
    are increasing, and organizations would be wise to pay attention to how they govern
    their data resources.'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: MLOps中存在两个看似矛盾的问题：增加的网络安全问题和生产中缺乏机器学习。一方面，规则太多，什么也做不了。另一方面，对关键基础设施的勒索攻击正在增加，组织应着眼于如何管理其数据资源。
- en: 'One way to address both issues simultaneously is to have a checklist of best
    practices. Here is a partial list of best practices for data governance that will
    improve MLOps productivity and cybersecurity:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 同时解决这两个问题的一种方法是拥有最佳实践的清单。以下是改进MLOps生产力和网络安全性的数据治理的部分最佳实践清单：
- en: Use PLP (Principle of Least Privilege).
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用最小特权原则（PLP）。
- en: Encrypt data at rest and in transit.
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对数据进行静态和传输加密。
- en: Assume systems that are not automated are insecure.
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 假设未自动化的系统是不安全的。
- en: Use cloud platforms since they have a shared security model.
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用云平台，因为它们具有共享的安全模型。
- en: Use enterprise support and engage in quarterly architecture and security audits.
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用企业支持并参与季度架构和安全审计。
- en: Train staff on platforms used by getting them certified.
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 培训员工使用的平台，并使他们获得认证。
- en: Engage company in quarterly and yearly training on new technology and best practices.
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 公司参与季度和年度的新技术和最佳实践培训。
- en: Create a healthy company culture with standards of excellence, competent employees,
    and principled leadership.
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建一个健康的公司文化，具备卓越标准、胜任的员工和有原则的领导。
- en: Next, let’s summarize some MLOps Design Patterns that may be useful to you and
    your organization.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，让我们总结一些对您和您的组织可能有用的MLOps设计模式。
- en: MLOps Design Patterns
  id: totrans-115
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: MLOps设计模式
- en: 'The following examples reflect a partial list of recommended MLOps Design Patterns:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 以下示例展示了一部分推荐的MLOps设计模式列表：
- en: CaaS
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: CaaS
- en: Container as a service (CaaS) is a helpful pattern for MLOps because it allows
    developers to work on an ML microservice on their desktop or in a cloud editor
    and then shares it with other developers or the public via a `docker pull` command.
    Further, many cloud platforms offer high-level PaaS (platform as a service) solutions
    to deploy containerized projects.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 容器即服务（CaaS）对MLOps非常有帮助，因为它允许开发人员在他们的桌面或云编辑器上工作在ML微服务上，然后通过`docker pull`命令与其他开发人员或公众共享。此外，许多云平台提供高级PaaS（平台即服务）解决方案来部署容器化项目。
- en: MLOps Platform
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: MLOps平台
- en: All cloud providers have deeply integrated MLOps platforms. AWS has AWS SageMaker,
    Azure has Azure ML Studio, and Google has Vertex AI. In cases where a large team,
    a large project, big data, or all of the above come into play, using the MLOps
    platform on the cloud you are using will save you a tremendous amount of time
    in the building, deploying, and maintaining of your ML application.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 所有云服务提供商都深度整合了MLOps平台。AWS拥有AWS SageMaker，Azure拥有Azure ML Studio，Google拥有Vertex
    AI。在团队庞大、项目庞大、大数据或以上因素同时存在的情况下，使用所用云端的MLOps平台将极大地节省构建、部署和维护ML应用程序的时间。
- en: Serverless
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 无服务器
- en: Serverless technology like AWS Lambda is ideal for the rapid development of
    ML microservices. These microservices can call into cloud AI APIs to do NLP, computer
    vision, or other tasks or use a pretrained model you developed yourself or one
    that you downloaded.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: AWS Lambda等无服务器技术非常适合快速开发ML微服务。这些微服务可以调用云AI API来进行自然语言处理、计算机视觉或其他任务，或使用您自己开发的预训练模型或下载的模型。
- en: Spark-Centric
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 以Spark为中心
- en: Many organizations dealing with big data already have experience using Spark.
    In this situation, it may make sense to use the MLOps capabilities of the managed
    Spark platform Databricks or managed Spark via the cloud platform, such as AWS
    EMR.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 许多处理大数据的组织已经具有使用Spark的经验。在这种情况下，使用由Databricks管理的Spark平台或通过云平台管理的Spark，如AWS EMR的MLOps能力可能是有意义的。
- en: Kubernetes-Centric
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: Kubernetes中心化
- en: Kubernetes is a “cloud in a box.” If your organization is already using it,
    it may make sense to use the Kubernetes ML-focused technology like mlflow.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: Kubernetes是一个“云中的盒子”。如果您的组织已经在使用它，使用像mlflow这样的基于Kubernetes的ML技术可能是有意义的。
- en: In addition to these recommendations, many additional resources in [Appendix B](app02.xhtml#cloud-certification)
    discuss topics ranging from data governance to cloud certification.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 除了这些建议外，附录B中的许多额外资源讨论了从数据治理到云认证的主题。
- en: Conclusion
  id: totrans-128
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 结论
- en: 'This book originally came about from a discussion I had with Tim O’Reilly and
    Mike Loukides at Foo Camp around making ML go 10X faster. The consensus from the
    group was, yes, it can go 10X faster! Matt Ridley’s book *How Innovation Works:
    And Why It Flourishes in Freedom* (Harper) illustrates that the nonintuitive answer
    is that innovation is a recombination of ideas with better execution. A current
    colleague and former professor, Andrew Hargadon, first introduced me to these
    ideas when I was an MBA student at UC Davis. In his book *How Breakthroughs Happen*
    (Harvard Business Review Press) Andrew mentions that it is the network effect
    and the recombination of ideas that matters.'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: '本书最初源于我在Foo Camp与Tim O’Reilly和Mike Loukides讨论如何使ML速度提升10倍的讨论。小组的共识是，是的，可以实现10倍速度提升！马特·里德利的书《How
    Innovation Works: And Why It Flourishes in Freedom》（Harper）阐明了一个非直观的答案，即创新是通过更好的执行重新组合想法。我的一位现任同事和前任教授安德鲁·哈加顿，在我在加州大学戴维斯分校攻读MBA期间首次向我介绍了这些想法。在他的书《How
    Breakthroughs Happen》（哈佛商业评论出版社）中，安德鲁提到，网络效应和想法的重新组合是至关重要的。'
- en: For MLOps, this means that the operational excellence of existing ideas is the
    secret sauce. Companies that want to solve real problems in machine learning and
    solve these problems quickly can innovate through execution. The world needs this
    innovation to help us save more lives through preventive medicine like automated
    higher accuracy cancer screenings, self-driving cars, and clean energy systems
    that adapt to the environment.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 对于MLOps来说，这意味着现有想法的运营卓越是成功的秘诀。希望通过执行快速解决机器学习中的实际问题并迅速解决这些问题的公司可以通过执行创新。世界需要这种创新，以帮助我们通过预防医学如自动高准确率癌症筛查、自动驾驶汽车和适应环境的清洁能源系统来拯救更多生命。
- en: Nothing should be “off the table” to increase operational excellence. If AutoML
    speeds up rapid prototyping, then use it. If cloud computing increases the velocity
    of machine learning model deployment, then implement it. As recent events have
    shown us, with the COVID-19 pandemic and the resulting breakthrough technology
    innovations like the CRISPR technology and COVID-19 vaccine, we can do incredible
    things with the proper sense of urgency. MLOps adds rigor to this urgency and
    allows us to help save the world, one ML model at a time.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 什么也不应该“被排除在外”以提升运营卓越。如果自动机器学习（AutoML）加速了快速原型设计，那就使用它。如果云计算增加了机器学习模型部署的速度，那就实施它。正如最近的事件向我们展示的那样，通过COVID-19大流行及其带来的技术突破，比如CRISPR技术和COVID-19疫苗，我们可以在适当的紧迫感下做出不可思议的事情。MLOps为这种紧迫感增添了严谨性，并允许我们逐个机器学习模型地帮助拯救世界。
- en: Exercises
  id: totrans-132
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 练习
- en: Build a machine learning application as quickly as possible that is both continuously
    trained and continuously deployed.
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 尽快构建一个连续训练和连续部署的机器学习应用程序。
- en: Deploy a machine learning model using the Kubernetes stack.
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Kubernetes堆栈部署一个机器学习模型。
- en: Deploy the same machine learning model using continuous delivery with AWS, Azure,
    and GCP.
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用AWS、Azure和GCP实现连续交付部署相同的机器学习模型。
- en: Create an automated security scan of the containers for a machine learning project
    using a cloud native build system.
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用云原生构建系统为机器学习项目创建自动化安全容器扫描。
- en: Train a model using a cloud-based AutoML system and using a local AutoML system
    like Create ML or Ludwig.
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用基于云的AutoML系统和像Create ML或Ludwig这样的本地AutoML系统训练模型。
- en: Critical Thinking Discussion Questions
  id: totrans-138
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 批判性思维讨论问题
- en: How could you build a recommendation engine that didn’t have as many negative
    externalities as current social media recommendation engines? What would you change,
    and how?
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您如何构建一个推荐引擎，其负面外部性不如当前社交媒体推荐引擎那么多？您会做出哪些改变，以及如何做？
- en: What could be done to improve the accuracy and interpretability of modeling
    complex systems like nutrition, climate, and elections?
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有什么方法可以提高对于建模复杂系统（如营养、气候和选举）的准确性和可解释性？
- en: How could operational excellence be the secret ingredient for a company wanting
    to be a machine learning–related technology leader?
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 运营卓越如何成为一家希望成为与机器学习相关的技术领导者的公司的秘密武器？
- en: If operational excellence is a crucial consideration for MLOps, what are your
    organization’s hiring criteria to identify the right talent?
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果运营卓越对于MLOps至关重要，那么您的组织如何确定正确的人才的招聘标准？
- en: Explain the role of operational excellence in machine learning concerning enterprise
    support for cloud computing? Does it matter, and why?
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 解释在机器学习中企业对云计算的支持中运营卓越的角色？这是否重要，为什么？
