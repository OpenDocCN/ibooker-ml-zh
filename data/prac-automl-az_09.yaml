- en: Chapter 6\. Classification and Regression
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第六章。分类和回归
- en: A key ingredient for successful machine learning implementations (based on discussions
    with many data scientists, machine learning engineers, and product managers) is
    being able to map the business problem and the desired outcome to the appropriate
    machine learning problem (or having a frank conversation that machine learning
    will not solve the problem!). *Classification* and *regression* are two common
    machine learning techniques that are used.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 成功实施机器学习的关键因素之一（基于与许多数据科学家、机器学习工程师和产品经理的讨论）是能够将业务问题和期望的结果映射到适当的机器学习问题上（或者进行坦率的对话，说明机器学习无法解决问题！）。*分类*和*回归*是常用的两种机器学习技术。
- en: In this chapter, we cover the basics of classification and regression and show
    you how to map a business use case to a classification or regression problem.
    You’ll learn how to use Microsoft Azure Machine Learning—specifically, automated
    ML—to automatically select the best classification or regression models for your
    specific use case.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们涵盖了分类和回归的基础知识，并展示了如何将业务用例映射到分类或回归问题。您将学习如何使用Microsoft Azure机器学习——特别是自动化ML——自动选择适合您特定用例的最佳分类或回归模型。
- en: Tip
  id: totrans-3
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 提示
- en: '**Need to Get Started with Azure Machine Learning?**'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '**需要开始使用Azure机器学习？**'
- en: If you’re getting started with Azure Machine Learning, refer to [Chapter 3](ch03.html#getting_started_with_microsoft_azure_mac)
    to understand the basic concepts before diving into this chapter.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您刚开始使用Azure机器学习，请参考[第三章](ch03.html#getting_started_with_microsoft_azure_mac)了解基本概念，然后再深入本章内容。
- en: What Is Classification and Regression?
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 什么是分类和回归？
- en: In supervised learning, you have a set of independent features, X, and a target
    feature, Y. The machine learning task is to map from X → Y. Both classification
    and regression are supervised learning, with a requirement on the availability
    of labeled data.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 在监督学习中，您有一组独立特征X和一个目标特征Y。机器学习的任务是从X → Y进行映射。分类和回归都是监督学习，要求有标记数据的可用性。
- en: To train a high-quality model that performs well for testing data and for generalizing
    new unseen data, examples need to be sufficiently representative of the test data.
    One underlying assumption for many supervised learning algorithms is that the
    data distribution of training examples is identical to that of the test examples
    (including unseen examples).
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 要训练一个在测试数据和泛化到新的未见数据时表现良好的高质量模型，示例需要充分代表测试数据。许多监督学习算法的一个基本假设是，训练示例的数据分布与测试示例的数据分布相同（包括未见示例）。
- en: In many real-world problems, this is often untrue. Either your data has very
    few objects with the target feature that you want to predict (known as the *class
    imbalance*, or the *minority class problem*), or it isn’t of good quality. In
    some situations, you might not even have labeled data! Over the years, the machine
    learning community has invented clever ways to deal with each of these problems
    (e.g., using the Synthetic Minority Oversampling Technique, or SMOTE, to deal
    with class imbalance), but it’s beyond the scope of this book to go into detail
    about them.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 在许多实际问题中，这通常是不正确的。你的数据可能要么具有你想要预测的目标特征的极少数对象（称为*类不平衡*或*少数类问题*），要么质量不佳。在某些情况下，你甚至可能没有标记数据！多年来，机器学习社区发明了处理这些问题的聪明方法（例如使用合成少数过采样技术，或SMOTE，来处理类不平衡），但详细讨论这些方法超出了本书的范围。
- en: 'When Y is a discrete feature, and you’re trying to predict the class/label,
    you are dealing with a *classification* problem. Classification helps predict
    which category (or class) an object belongs to. When classification is used for
    data with two distinct classes, we often refer to it as *binary classification*.
    If there are more than two distinct classes, it is a *multiclass classification*
    problem. For example, predicting whether a person is a good or bad credit risk
    is a binary classification problem (because there are two distinct classes: good
    or bad). Predicting a book category (e.g., fairytale, cookbook, biography, travel,
    and so on) is a multiclass classification problem.'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 当Y是一个离散特征，并且您试图预测类别/标签时，您正在处理一个*分类*问题。分类有助于预测对象属于哪个类别（或类）。当分类用于具有两个不同类别的数据时，我们通常称之为*二元分类*。如果有超过两个不同类别，则是*多类分类*问题。例如，预测一个人是好还是坏的信用风险是一个二元分类问题（因为有两个不同的类别：好或坏）。预测书籍类别（例如童话、烹饪书、传记、旅行等）是一个多类分类问题。
- en: When Y is a continuous feature that you are trying to predict, you are dealing
    with a *regression* problem. Regression helps to predict a continuous value. For
    example, in manufacturing’s predictive maintenance scenarios, regression models
    are used to predict the lifespan for systems and equipment. In health care, regression
    is used to predict health-care costs, length of hospital stays for patients, and
    more. [Figure 6-1](#training_a_classification_solidus_regres) shows a typical
    data science process for training and evaluating machine learning models. The
    same workflow applies to both classification and regression problems.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 当Y是您试图预测的连续特征时，您正在处理一个*回归*问题。回归有助于预测连续值。例如，在制造业的预测性维护场景中，回归模型用于预测系统和设备的寿命。在医疗保健中，回归用于预测医疗保健成本、患者住院时间等。[图
    6-1](#training_a_classification_solidus_regres)展示了训练和评估机器学习模型的典型数据科学流程。该工作流程适用于分类和回归问题。
- en: '![paml 0601](assets/paml_0601.png)'
  id: totrans-12
  prefs: []
  type: TYPE_IMG
  zh: '![paml 0601](assets/paml_0601.png)'
- en: Figure 6-1\. Training a classification/regression model
  id: totrans-13
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 6-1\. 训练分类/回归模型
- en: Data is first split into training and testing data. The training data is used
    as inputs to a classification/regression algorithm. A machine learning model is
    produced once training completes, after which it’s The evaluated using the test
    data. As part of model evaluation, you’ll compute different types of metrics (e.g.,
    precision, accuracy, AUC, F1-score, and so on), which helps you determine its
    quality.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 首先将数据分为训练数据和测试数据。训练数据作为分类/回归算法的输入。一旦完成训练，将生成一个机器学习模型，随后使用测试数据进行评估。作为模型评估的一部分，您将计算不同类型的指标（例如，精确度，准确度，AUC，F1-score等），这有助于确定其质量。
- en: Let’s illustrate this with an example on credit-risk scoring. In financial services,
    credit-risk scoring enables a bank to make credit decisions for customers. The
    German Credit Risk dataset consists of 1,000 rows ([Table 6-1](#german_credit_risk_dataset)
    shows a subset of the dataset). Each row uses a set of features (or attributes,
    or properties) to describe a person. The last column is the class/label (i.e.,
    Credit Risk), which provides information on whether the person is a credit risk.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们通过信用风险评分的示例来说明这一点。在金融服务中，信用风险评分使银行能够为客户做出信贷决策。德国信用风险数据集包含1,000行（[表 6-1](#german_credit_risk_dataset)显示了数据集的一个子集）。每行使用一组特征（或属性）来描述一个人。最后一列是类/标签（即信用风险），提供有关该人是否存在信用风险的信息。
- en: Note
  id: totrans-16
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注
- en: The German Credit Risk dataset is available in the [UCI Machine Learning Repository](http://bit.ly/2CxvDet).
    The dataset was contributed to the machine learning community in 1994 by Professor
    Hans Hofmann and consists of 20 features (7 numerical, 13 categorical), and one
    credit risk label.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 德国信用风险数据集可以在[UCI机器学习库](http://bit.ly/2CxvDet)中找到。该数据集由汉斯·霍夫曼教授于1994年贡献给机器学习社区，包含20个特征（7个数值特征，13个分类特征）和一个信用风险标签。
- en: 'Download the file *german.data* from the UCI Machine Learning Repository:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 从UCI机器学习库下载文件*german.data*：
- en: '[PRE0]'
  id: totrans-19
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'After you download the data, observe that in each row, the first few columns
    (e.g., existing account status, duration, credit history, foreign worker) describe
    different personal attributes. In [Table 6-1](#german_credit_risk_dataset), you
    can see that the first column shows the account status for the person’s checking
    account. A11 through A13 denote the amount available in the checking account (amounts
    are in DM, Deutsche Marks, the German currency until 2002). A14 indicates that
    the person has no checking account. For illustration purposes, we omitted many
    features. The last column shows the credit risk: a value of 1 indicates no credit
    risk, and 2 indicates a credit risk.'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 当您下载数据后，请注意每行中的前几列（例如，现有账户状态、持续时间、信用历史、外籍工人）描述了不同的个人属性。在[表 6-1](#german_credit_risk_dataset)中，您可以看到第一列显示了个人支票账户的账户状态。A11到A13表示支票账户中的可用金额（金额以德国马克（DM）计算，即2002年前的德国货币）。A14表示该人没有支票账户。出于说明目的，我们省略了许多特征。最后一列显示了信用风险：值为1表示没有信用风险，2表示有信用风险。
- en: Table 6-1\. German Credit Risk dataset
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 表 6-1\. 德国信用风险数据集
- en: '| Existing account status | Duration (months) | Credit history | … | Foreign
    worker | Credit risk |'
  id: totrans-22
  prefs: []
  type: TYPE_TB
  zh: '| 现有账户状态 | 持续时间（月） | 信用历史 | … | 外籍工人 | 信用风险 |'
- en: '| --- | --- | --- | --- | --- | --- |'
  id: totrans-23
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- | --- | --- |'
- en: '| A11 | 6 | A34 | … | Yes | 1 |'
  id: totrans-24
  prefs: []
  type: TYPE_TB
  zh: '| A11 | 6 | A34 | … | Yes | 1 |'
- en: '| A12 | 48 | A32 | … | No | 1 |'
  id: totrans-25
  prefs: []
  type: TYPE_TB
  zh: '| A12 | 48 | A32 | … | No | 1 |'
- en: '| A14 | 12 | A34 | … | No | 2 |'
  id: totrans-26
  prefs: []
  type: TYPE_TB
  zh: '| A14 | 12 | A34 | … | No | 2 |'
- en: '| A11 | 42 | A32 | … | Yes | 1 |'
  id: totrans-27
  prefs: []
  type: TYPE_TB
  zh: '| A11 | 42 | A32 | … | Yes | 1 |'
- en: Before we dive deeper into the German Credit Risk dataset, let’s review classification
    and regression algorithms.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们深入研究德国信用风险数据集之前，让我们回顾一下分类和回归算法。
- en: Classification and Regression Algorithms
  id: totrans-29
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 分类和回归算法
- en: A rich set of classification and regression algorithms has been developed over
    the years by the machine learning community. Commonly used classification algorithms
    include the naïve Bayes classifier, support vector machines (SVMs), *k*-nearest
    neighbor, decision tree, and random forest. For regression, decision trees, elastic
    nets, LARS Lasso, stochastic gradient descent (SGD), and SVMs, are commonly used.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 机器学习社区多年来已经开发了丰富的分类和回归算法。常用的分类算法包括朴素贝叶斯分类器、支持向量机（SVM）、*k*-最近邻、决策树和随机森林。对于回归，常用的有决策树、弹性网络、LARS
    Lasso、随机梯度下降（SGD）和支持向量机（SVM）。
- en: 'If you’re asking which classification/regression algorithm should I be using?,
    the answer is: it depends. Often, a data scientist tries different algorithms
    (depending on the problem, the dataset size, requirements for explainable models,
    speed of the algorithms, and more). The trade-off is often between speed, model
    evaluation metrics (e.g., accuracy), and explainable results.'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您问我应该使用哪种分类/回归算法？答案是：这取决于。通常，数据科学家会尝试不同的算法（取决于问题、数据集大小、可解释模型的要求、算法速度等）。往往需要在速度、模型评估指标（例如准确性）和可解释结果之间权衡。
- en: For example, if you’re looking at the computational speed at which the initial
    solution arrives, you might consider decision trees (or any tree-based variant)
    or simple linear regression approaches. However, if you’re optimizing for accuracy
    (and other metrics), you might use random forests, SVMs, or gradient boosting
    trees. Often, the best result is an ensemble of different classification/regression
    models.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，如果您关注初始解决方案到达的计算速度，您可能会考虑决策树（或任何基于树的变体）或简单的线性回归方法。然而，如果您优化精度（和其他指标），您可能会使用随机森林、支持向量机（SVM）或梯度提升树。通常，最佳结果是不同分类/回归模型的集成。
- en: Tip
  id: totrans-33
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: Tip
- en: For a deeper dive into how each classification algorithm works, refer to [Professor
    Tom Mitchell’s Machine Learning course](http://bit.ly/2Tqiqtx), which provides
    a fantastic discussion on the different machine learning algorithms.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 欲深入了解每种分类算法的工作原理，请参考[Tom Mitchell教授的机器学习课程](http://bit.ly/2Tqiqtx)，该课程详细讨论了不同的机器学习算法。
- en: New to machine learning? Refer to [this Microsoft cheat sheet](http://bit.ly/2YhnjJ2)
    for the different classification algorithms and the use cases in which they can
    be applied.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 机器学习新手？请参考[这张微软备忘单](http://bit.ly/2YhnjJ2)，了解不同分类算法及其适用场景。
- en: '[Figure 6-2](#decision_tree_for_the_german_credit_risk) shows an example of
    a possible decision tree that is trained using the German Credit Risk dataset.
    You will notice that the tree starts with a split attribute–account status. If
    the values for account status are A13, A14, the person doesn’t present a credit
    risk. The tree further chooses other split attributes (duration and credit history)
    and uses this to further determine whether a person is a credit risk.'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 6-2](#decision_tree_for_the_german_credit_risk)展示了使用德国信用风险数据集训练的可能决策树示例。您会注意到树从一个分割属性开始——账户状态。如果账户状态的值为A13、A14，则该人不具有信用风险。树进一步选择其他分割属性（持续时间和信用历史），并使用这些属性进一步确定一个人是否具有信用风险。'
- en: '![paml 0602](assets/paml_0602.png)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![paml 0602](assets/paml_0602.png)'
- en: Figure 6-2\. Decision tree for the German Credit Risk dataset
  id: totrans-38
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 6-2\. 德国信用风险数据集的决策树
- en: Each of these classification algorithms has hyperparameters that need to be
    tuned. Also, the data distribution, dimensionality of data, sparseness of data,
    and whether the data is linearly separable matter. As data scientists mature in
    their practice, they build their toolboxes and knowledge of the algorithms to
    use (based on familiarity with how the algorithms work, and how to tune the hyperparameters).
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 每个这些分类算法都有需要调整的超参数。此外，数据分布、数据的维度、数据的稀疏性以及数据是否线性可分都很重要。随着数据科学家在实践中的成熟，他们会建立自己的工具箱，并掌握使用的算法（基于对算法工作原理的熟悉程度和如何调整超参数）。
- en: If you are interested in experimenting with different classification algorithms
    and datasets, `scikit-learn` provides a rich library of various classification
    algorithms and is a good Python machine learning library to get started with.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您有兴趣尝试不同的分类算法和数据集，`scikit-learn`提供了丰富的各种分类算法库，是一个很好的Python机器学习库入门选择。
- en: Using Automated ML for Classification and Regression
  id: totrans-41
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用自动 ML 进行分类和回归
- en: Let’s begin to get our hands dirty with a classification problem. To jumpstart
    your learning of using automated ML for classification of credit risks using the
    German Credit Risk dataset, you can use the notebook provided on GitHub and run
    them using [Microsoft Azure Notebooks](https://notebooks.azure.com/).
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们开始处理一个分类问题。为了加速您学习如何使用自动 ML 对德国信用风险数据集进行信用风险分类，您可以使用 GitHub 上提供的笔记本，并在 [Microsoft
    Azure 笔记本](https://notebooks.azure.com/) 上运行它们。
- en: Though automated ML seems almost magical (i.e., given a dataset, perform some
    auto feature engineering, enumerate through different types of models, and select
    the best model), having the right input data will help significantly improve the
    quality of the models.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管自动 ML 看起来几乎像是魔法（即给定数据集，执行一些自动特征工程，枚举不同类型的模型，并选择最佳模型），但拥有正确的输入数据将显著提高模型的质量。
- en: Tip
  id: totrans-44
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 提示
- en: The sample notebook for using automated ML with Azure Machine Learning to train
    a credit risk model is available at [*https://bit.ly/2m3xlyP*](https://bit.ly/2m3xlyP).
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 Azure 机器学习进行训练信用风险模型的自动 ML 示例笔记本可在 [*https://bit.ly/2m3xlyP*](https://bit.ly/2m3xlyP)
    获取。
- en: A rich set of classification and regression algorithms is supported when using
    automated ML, as shown in [Table 6-2](#classification_and_regression_algori).
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用自动 ML 时支持丰富的分类和回归算法，如 [表 6-2](#classification_and_regression_algori) 所示。
- en: Table 6-2\. Classification and regression algorithms supported by automated
    ML in Azure Machine Learning
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 表 6-2\. Azure 机器学习中自动 ML 支持的分类和回归算法
- en: '| Type of algorithm | Classification | Regression |'
  id: totrans-48
  prefs: []
  type: TYPE_TB
  zh: '| 算法类型 | 分类 | 回归 |'
- en: '| --- | --- | --- |'
  id: totrans-49
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| C-SVC | ✓ |  |'
  id: totrans-50
  prefs: []
  type: TYPE_TB
  zh: '| C-SVC | ✓ |  |'
- en: '| Decision tree | ✓ | ✓ |'
  id: totrans-51
  prefs: []
  type: TYPE_TB
  zh: '| 决策树 | ✓ | ✓ |'
- en: '| Elastic net |  | ✓ |'
  id: totrans-52
  prefs: []
  type: TYPE_TB
  zh: '| 弹性网络 |  | ✓ |'
- en: '| Extremely randomized trees | ✓ | ✓ |'
  id: totrans-53
  prefs: []
  type: TYPE_TB
  zh: '| 极端随机森林 | ✓ | ✓ |'
- en: '| Gradient boosting | ✓ | ✓ |'
  id: totrans-54
  prefs: []
  type: TYPE_TB
  zh: '| 梯度提升 | ✓ | ✓ |'
- en: '| *k*-nearest neighbors | ✓ | ✓ |'
  id: totrans-55
  prefs: []
  type: TYPE_TB
  zh: '| *k*-最近邻 | ✓ | ✓ |'
- en: '| LARS Lasso |  | ✓ |'
  id: totrans-56
  prefs: []
  type: TYPE_TB
  zh: '| LARS Lasso |  | ✓ |'
- en: '| Light GBM | ✓ | ✓ |'
  id: totrans-57
  prefs: []
  type: TYPE_TB
  zh: '| Light GBM | ✓ | ✓ |'
- en: '| Linear SVC | ✓ |  |'
  id: totrans-58
  prefs: []
  type: TYPE_TB
  zh: '| 线性 SVC | ✓ |  |'
- en: '| Logistic regression | ✓ |  |'
  id: totrans-59
  prefs: []
  type: TYPE_TB
  zh: '| 逻辑回归 | ✓ |  |'
- en: '| Naïve Bayes | ✓ |  |'
  id: totrans-60
  prefs: []
  type: TYPE_TB
  zh: '| 朴素贝叶斯 | ✓ |  |'
- en: '| Random forest | ✓ | ✓ |'
  id: totrans-61
  prefs: []
  type: TYPE_TB
  zh: '| 随机森林 | ✓ | ✓ |'
- en: '| SGD | ✓ | ✓ |'
  id: totrans-62
  prefs: []
  type: TYPE_TB
  zh: '| SGD | ✓ | ✓ |'
- en: Note
  id: totrans-63
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: To get the updated list of classification algorithms supported by automated
    ML, and to understand details about how each algorithm works, refer to this [Microsoft
    documentation](http://bit.ly/2TXdUYN).
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 要获取自动 ML 支持的分类算法的更新列表，并了解每种算法的详细信息，请参阅此 [Microsoft 文档](http://bit.ly/2TXdUYN)。
- en: Setting up the Azure Machine Learning workspace
  id: totrans-65
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设置 Azure 机器学习工作区
- en: 'Previously, you learned how to set up your Azure Machine Learning workspace
    and prepared the configuration file with the subscription ID, resource group,
    and workspace name. Use the following code to set up that configuration file:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 在此之前，您已经学会了如何设置 Azure 机器学习工作区，并准备了配置文件，其中包括订阅 ID、资源组和工作区名称。使用以下代码来设置配置文件：
- en: '[PRE1]'
  id: totrans-67
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: When using Azure Notebooks, the *config.json* file should be stored in the same
    folder or in the *aml_config* folder, as shown in [Figure 6-3](#getting_started_with_running_the_azure).
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用 Azure 笔记本时，*config.json* 文件应存储在相同的文件夹或 *aml_config* 文件夹中，如 [图 6-3](#getting_started_with_running_the_azure)
    所示。
- en: '![paml 0603](assets/paml_0603.png)'
  id: totrans-69
  prefs: []
  type: TYPE_IMG
  zh: '![paml 0603](assets/paml_0603.png)'
- en: Figure 6-3\. Getting started with running Azure Notebooks
  id: totrans-70
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 6-3\. 开始运行 Azure 笔记本
- en: 'After you’ve uploaded these files to Azure Notebooks or your own local Jupyter
    Notebook environment, you are ready to get started. Let’s begin by importing the
    relevant Python packages that you will use in this exercise:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 将这些文件上传到 Azure 笔记本或您自己的本地 Jupyter Notebook 环境后，您就可以开始了。让我们首先导入您在此练习中将要使用的相关
    Python 包：
- en: '[PRE2]'
  id: totrans-72
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Next, import the Azure Machine Learning SDK (`azureml-sdk`):'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，导入 Azure 机器学习 SDK (`azureml-sdk`)：
- en: '[PRE3]'
  id: totrans-74
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: After you’ve imported the relevant Python packages, you will create the Azure
    Machine Learning workspace using the values from *config.json*.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 导入相关的 Python 包后，使用 *config.json* 中的值创建 Azure 机器学习工作区。
- en: '`Workspace.from_config()` reads the *config.json* file, which is either stored
    in either the same folder as the notebook or *aml_config/config.json*. As discussed
    in earlier chapters, the workspace object stores information about the Azure subscription,
    and information about various resources used. After you create it, it also creates
    a cloud resource that monitors and tracks the model runs:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: '`Workspace.from_config()` 读取 *config.json* 文件，该文件存储在笔记本所在文件夹或 *aml_config/config.json*
    中。正如前面章节中讨论的那样，工作区对象存储有关 Azure 订阅的信息，以及使用的各种资源信息。创建后，它还会创建一个监视和跟踪模型运行的云资源：'
- en: '[PRE4]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: After you run the Python code, you will see the output shown in [Figure 6-4](#preparing_the_azure_machine_learning_wor),
    which provides information about the version of the Azure Machine Learning SDK,
    the Azure subscription ID, and the name and location of the Azure Machine Learning
    workspace that’s been created.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 在运行 Python 代码后，您将看到 [图 6-4](#preparing_the_azure_machine_learning_wor) 中显示的输出，该输出提供了
    Azure 机器学习 SDK 的版本信息、Azure 订阅 ID、以及创建的 Azure 机器学习工作区的名称和位置信息。
- en: '![paml 0604](assets/paml_0604.png)'
  id: totrans-79
  prefs: []
  type: TYPE_IMG
  zh: '![paml 0604](assets/paml_0604.png)'
- en: Figure 6-4\. Preparing the Azure Machine Learning workspace
  id: totrans-80
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 6-4\. 准备 Azure 机器学习工作区
- en: 'If this is the first time you are running the code in Azure Notebooks, you
    might see the following warning message:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 如果这是您在 Azure 笔记本中第一次运行代码，您可能会看到以下警告消息：
- en: '[PRE5]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: To authenticate with Azure, click [*https://microsoft.com/devicelogin*](https://microsoft.com/devicelogin)
    and enter the authentication code that is provided. After you have logged in using
    a valid credential, you can rerun the cell, and you will be authenticated.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用 Azure 进行身份验证，请点击 [*https://microsoft.com/devicelogin*](https://microsoft.com/devicelogin)
    并输入提供的身份验证代码。使用有效凭据登录后，您可以重新运行单元格，您将得到身份验证。
- en: To run the code as part of an unattended operation, you’ll need to set up an
    Azure Service Principal and use that to log in programmatically. To learn more
    about how to authenticate with Azure Machine Learning, visit this [GitHub repository](http://bit.ly/2CEBxdM).
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 要作为无人操作的一部分运行代码，您需要设置 Azure 服务主体，并使用该服务主体进行程序化登录。要了解如何与 Azure 机器学习进行身份验证的更多信息，请访问这个
    [GitHub 仓库](http://bit.ly/2CEBxdM)。
- en: Next, after you’ve created the Azure Machine Learning workspace, you need to
    create the experiment object that will be used for this exercise. In the code
    that follows, notice that we pass the reference to the workspace object that we
    created earlier when creating the experiment. We also specify a project folder
    to contain the list of files that will be created, as shown in [Figure 6-5](#creating_the_experiment_and_specifying).
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，在创建 Azure 机器学习工作区之后，您需要创建用于此练习的实验对象。在随后的代码中，请注意我们在创建实验时传递了之前创建的工作区对象的引用。我们还指定了一个项目文件夹来包含将要创建的文件列表，如
    [图 6-5](#creating_the_experiment_and_specifying) 所示。
- en: '[PRE6]'
  id: totrans-86
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '![paml 0605](assets/paml_0605.png)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
  zh: '![paml 0605](assets/paml_0605.png)'
- en: Figure 6-5\. Creating the experiment and specifying the project folder
  id: totrans-88
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 6-5\. 创建实验并指定项目文件夹
- en: Data preparation
  id: totrans-89
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 数据准备
- en: For this exercise, we’re using data from the [UCI Machine Learning Repository](http://bit.ly/2Opc38V),
    which contains a rich collection of datasets for both classification and regression
    problems. Another good repository of open machine learning datasets is [OpenML.org](http://bit.ly/2HGjHLE).
    The German Credit Risk dataset is available in both dataset repositories.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 对于此练习，我们使用来自 [UCI 机器学习库](http://bit.ly/2Opc38V) 的数据，该库包含用于分类和回归问题的丰富数据集集合。另一个开放机器学习数据集的良好资源是
    [OpenML.org](http://bit.ly/2HGjHLE)。德国信用风险数据集在这两个数据集仓库中都可以找到。
- en: 'Because the *german.data* file from the UCI Machine Learning Repository does
    not contain a header row, we first define the names of each of the columns. This
    helps us reference the column names as we work with the dataset. After the following
    code is executed, you’ll see the first five rows of the dataset shown in [Figure 6-6](#specifying_the_name_of_the_columns_and),
    in which each row has 21 columns, with the last column being the label column,
    named Status:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 因为 UCI 机器学习库中的 *german.data* 文件不包含标题行，我们首先定义每个列的名称。这帮助我们在处理数据集时引用列名。执行以下代码后，您将在
    [图 6-6](#specifying_the_name_of_the_columns_and) 中看到数据集的前五行，每行包含 21 列，最后一列是名为
    Status 的标签列：
- en: '[PRE7]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '![paml 0606](assets/paml_0606.png)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![paml 0606](assets/paml_0606.png)'
- en: Figure 6-6\. Specifying the name of the columns and loading the data
  id: totrans-94
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 6-6\. 指定列名并加载数据
- en: 'The Status column is the class that we are trying to build a model for predicting.
    Let’s look at the number of unique values for the Status column. The values in
    the status column are 1 and 2; 1 denotes good credit, and 2 denotes bad credit.
    To make it easier to read, we subtract 1 from the values so that we use a value
    of 0 to represent good credit, and 1 to represent that the person has bad credit:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: Status 列是我们试图建立模型来预测的类。让我们看看 Status 列的唯一值数量。状态列中的值为 1 和 2；1 表示良好的信用，2 表示不良的信用。为了方便阅读，我们从这些值中减去
    1，这样我们就使用值 0 来表示良好的信用，使用值 1 来表示此人有不良信用：
- en: '[PRE8]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'In addition, we also separated out the column with the target feature:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，我们还将带有目标特征的列分离出来：
- en: '[PRE9]'
  id: totrans-98
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'We are now ready to split the data into train and test data. In this exercise,
    we do a 70/30 split (i.e., 70% of the data for training, and the remainder for
    testing). In the following code, you can see that we pass in the reference for
    the target column, as well, when we call `train_test_split`:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们准备将数据拆分为训练数据和测试数据。在这个练习中，我们进行 70/30 的拆分（即 70% 的数据用于训练，剩余的用于测试）。在下面的代码中，您可以看到当我们调用
    `train_test_split` 时，我们还传入了目标列的引用 `target column`：
- en: '[PRE10]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: After you have split the data into train and test data, you should double-check
    both DataFrames—`X_train` and `X_test`.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 将数据分割为训练数据和测试数据之后，请仔细检查两个 DataFrame — `X_train` 和 `X_test`。
- en: Both DataFrames should have 20 columns, as shown in [Figure 6-7](#information_about_dataframe_x_underscore).
    Because `train_test_split` returns the training and testing label columns as Pandas
    Series (denoted by `y_train`, and `y_test`), we can convert both of these objects
    to either ndArray or DataFrame. This will be used as one of the inputs to the
    `AutoMLConfig` object that will be created.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 如 [图 6-7](#information_about_dataframe_x_underscore) 所示，两个 DataFrame 应该有 20
    列。因为 `train_test_split` 返回 Pandas Series 作为训练和测试标签列（由 `y_train` 和 `y_test` 表示），我们可以将这两个对象转换为
    ndArray 或 DataFrame 之一。这将作为将要创建的 `AutoMLConfig` 对象的输入之一。
- en: '![paml 0607](assets/paml_0607.png)'
  id: totrans-103
  prefs: []
  type: TYPE_IMG
  zh: '![paml 0607](assets/paml_0607.png)'
- en: Figure 6-7\. Information about DataFrame X_test
  id: totrans-104
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 6-7\. 有关 DataFrame X_test 的信息
- en: Using automated ML to train the model
  id: totrans-105
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用自动 ML 训练模型
- en: We are ready to use automated ML to train the classification model for the German
    Credit Risk problem.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已准备好使用自动 ML 来训练德国信用风险问题的分类模型。
- en: 'But before we do that, let’s look at the metrics available for tuning when
    using automated ML, by using the function `get_primary_metrics()`. [Figure 6-8](#metrics_used_for_classification_models)
    shows the output. You’ll see that the common classification metrics are supported.
    These include accuracy, precision, AUC, and the weighted precision scores:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 但在此之前，让我们看看在使用自动 ML 时用于调整的可用指标，通过使用函数 `get_primary_metrics()`。[图 6-8](#metrics_used_for_classification_models)
    显示了输出结果。您将看到支持的常见分类指标，包括准确率、精确度、AUC 和加权精确度分数：
- en: '[PRE11]'
  id: totrans-108
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '![paml 0608](assets/paml_0608.png)'
  id: totrans-109
  prefs: []
  type: TYPE_IMG
  zh: '![paml 0608](assets/paml_0608.png)'
- en: Figure 6-8\. Metrics used for classification models
  id: totrans-110
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 6-8\. 用于分类模型的指标
- en: 'Let’s define the common automated ML settings used in multiple experiments:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们定义在多个实验中使用的常见自动 ML 设置：
- en: '[PRE12]'
  id: totrans-112
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Next, we create the `AutoMLConfig` object that specifies the automated ML settings
    and the training data (including the label column `y_train`). We specify the number
    of cross-validations to be performed as `5`:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们创建 `AutoMLConfig` 对象，指定自动 ML 设置和训练数据（包括标签列 `y_train`）。我们指定要执行的交叉验证次数为
    `5`：
- en: '[PRE13]'
  id: totrans-114
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Tip
  id: totrans-115
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 提示
- en: When creating the `AutoMLConfig` object, you will notice that in this example,
    we specify the task as `classification`. If you are using automated ML for automatically
    selecting the best regression models, you should specify the task as `regression`.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 在创建 `AutoMLConfig` 对象时，您会注意到在本例中，我们将任务指定为 `classification`。如果您正在使用自动 ML 自动选择最佳回归模型，则应将任务指定为
    `regression`。
- en: To find out about the various knobs that you can use when creating the `AutoMLConfig`
    object, refer to [*https://bit.ly/2lZWXwo*](https://bit.ly/2lZWXwo). You can use
    `whitelist_models` to specify a list of algorithms to be used when searching for
    the best model with automated ML. You can also specify the list of models that
    are ignored in the experiment iteration by using `blacklist_models`.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 要了解在创建 `AutoMLConfig` 对象时可以使用的各种设置，请参阅 [*https://bit.ly/2lZWXwo*](https://bit.ly/2lZWXwo)。您可以使用
    `whitelist_models` 指定在自动 ML 中搜索最佳模型时要使用的算法列表。您还可以使用 `blacklist_models` 指定在实验迭代中忽略的模型列表。
- en: 'After you’ve created the `AutoMLConfig` object, you are ready to submit the
    experiment, as follows:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 创建了 `AutoMLConfig` 对象之后，您就可以提交实验了，如下所示：
- en: '[PRE14]'
  id: totrans-119
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: When the experiment has been submitted, automated ML will run and evaluate several
    iterations. Each iteration will use different classification algorithms as well
    as auto-featurization techniques, and show you the evaluation metrics. The best
    iteration score will also be shown. [Figure 6-9](#output_from_submitting_the_automated_ml)
    shows the output from the 30 iterations that are evaluated.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 当实验提交后，自动化 ML 将运行并评估多个迭代。每个迭代将使用不同的分类算法以及自动特征化技术，并向您显示评估指标。最佳迭代分数也将显示出来。 [图
    6-9](#output_from_submitting_the_automated_ml) 显示了评估的 30 次迭代的输出。
- en: Notice that iteration 14, which uses logistic regression, achieved the best
    model score of 0.7727 initially. And in iteration 30 (the last one), an ensemble
    was used, which improved the best model score from 0.7727 to 0.7916\. You will
    also see the explanation for each column shown in the experiment output (e.g.,
    SAMPLING %, DURATION, METRIC, BEST).
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 注意到第 14 次迭代使用逻辑回归，最初达到了 0.7727 的最佳模型得分。而在第 30 次迭代（最后一次），使用了集成学习，将最佳模型得分从 0.7727
    提升到了 0.7916\. 您还将看到实验输出中每列的解释（例如，抽样百分比，持续时间，指标，最佳值）。
- en: 'When the experiment has completed successfully, you can view the details of
    the run in the Azure portal:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 当实验成功完成时，您可以在 Azure 门户中查看运行的详细信息：
- en: '[PRE15]'
  id: totrans-123
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Or by using the automated ML Jupyter Notebook widgets:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 或者通过使用自动化 ML Jupyter Notebook 小部件：
- en: '[PRE16]'
  id: totrans-125
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: Tip
  id: totrans-126
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 提示
- en: If you have not installed the Python package for the widget, you can also pip
    install `azureml-widgets`.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 如果尚未安装用于小部件的 Python 包，您也可以使用 `pip install azureml-widgets` 进行安装。
- en: '![paml 0609](assets/paml_0609.png)'
  id: totrans-128
  prefs: []
  type: TYPE_IMG
  zh: '![paml 0609](assets/paml_0609.png)'
- en: Figure 6-9\. Output from submitting the automated ML classification experiment
  id: totrans-129
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 6-9\. 从提交的自动化 ML 分类实验中输出
- en: As shown in [Figure 6-10](#getting_information_about_local_undersco), if you
    click Link to Azure Portal, you will see the details from the latest run that
    you have completed. You can also deep dive into the logs that are created from
    running the experiments.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 如 [图 6-10](#getting_information_about_local_undersco) 所示，如果单击“链接到 Azure 门户”，您将看到您完成的最新运行的详细信息。您还可以深入了解运行实验时生成的日志。
- en: '![paml 0610](assets/paml_0610.png)'
  id: totrans-131
  prefs: []
  type: TYPE_IMG
  zh: '![paml 0610](assets/paml_0610.png)'
- en: Figure 6-10\. Getting information about local_run
  id: totrans-132
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 6-10\. 获取有关 local_run 的信息
- en: '[Figure 6-11](#azure_portalmdetails_for_a_run_of_an_exp) shows the details
    for the run, with run number 347\. From the chart, you can see the performance
    of a model in each iteration of the run.'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 6-11](#azure_portalmdetails_for_a_run_of_an_exp) 显示了运行的详细信息，运行编号为 347\.
    从图表中可以看出模型在每次迭代中的性能。'
- en: '![paml 0611](assets/paml_0611.png)'
  id: totrans-134
  prefs: []
  type: TYPE_IMG
  zh: '![paml 0611](assets/paml_0611.png)'
- en: Figure 6-11\. Azure portal—details for a run of an experiment
  id: totrans-135
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 6-11\. Azure 门户 - 实验运行的详细信息
- en: Once you install the widgets, you’re ready to see the run details directly in
    Azure Notebooks.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 安装完小部件后，您可以直接在 Azure Notebooks 中查看运行详细信息。
- en: '[Figure 6-12](#using_the_automated_ml_jupyter_notebook) shows the output from
    `RunDetails(local_run).show()`. You can also click each iteration to view more
    details. For example, if you click the last iteration (shown as the first row)
    for Ensemble, you will see detailed charts that capture the precision-recall,
    multiclass ROC, lift curve, gains curve, and calibration curve for the iteration.
    The confusion matrix is also shown.'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 6-12](#using_the_automated_ml_jupyter_notebook) 显示了从 `RunDetails(local_run).show()`
    输出的结果。您还可以单击每个迭代以查看更多详细信息。例如，如果单击集成学习的最后一次迭代（显示为第一行），您将看到详细的图表，捕获了该迭代的精确-召回率，多类
    ROC 曲线，提升曲线，增益曲线和校准曲线。还显示了混淆矩阵。'
- en: '![paml 0612](assets/paml_0612.png)'
  id: totrans-138
  prefs: []
  type: TYPE_IMG
  zh: '![paml 0612](assets/paml_0612.png)'
- en: Figure 6-12\. Using automated ML Jupyter Notebook widgets
  id: totrans-139
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 6-12\. 使用自动化 ML Jupyter Notebook 小部件
- en: A subset of this view is shown in [Figure 6-13](#using_the_automated_ml_jupyter_noteb).
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 此视图的子集显示在 [图 6-13](#using_the_automated_ml_jupyter_noteb) 中。
- en: '![paml 0613](assets/paml_0613.png)'
  id: totrans-141
  prefs: []
  type: TYPE_IMG
  zh: '![paml 0613](assets/paml_0613.png)'
- en: Figure 6-13\. Using the automated ML Jupyter Notebook widgets to understand
    details about the run
  id: totrans-142
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 6-13\. 使用自动化 ML Jupyter Notebook 小部件了解运行的详细信息
- en: 'Instead of interactively clicking each iteration, you can tabulate the metrics
    for each iteration in a run by using `get_children()` (the output is shown in
    [Figure 6-14](#metrics_for_each_of_the_iterations_in)):'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 而不是交互式地点击每个迭代，您可以通过使用 `get_children()` 来制表每次运行中的指标（输出显示在 [图 6-14](#metrics_for_each_of_the_iterations_in)
    中）：
- en: '[PRE17]'
  id: totrans-144
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: '![paml 0614](assets/paml_0614.png)'
  id: totrans-145
  prefs: []
  type: TYPE_IMG
  zh: '![paml 0614](assets/paml_0614.png)'
- en: Figure 6-14\. Metrics for each iteration in a run
  id: totrans-146
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 6-14\. 每次运行中的指标
- en: Selecting and testing the best model from the experiment run
  id: totrans-147
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 选择并测试实验运行中的最佳模型
- en: 'To use the best model, you can use the `get_output()` function (the output
    is shown in [Figure 6-15](#information_about_the_best_run)):'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用最佳模型，您可以使用`get_output()`函数（输出显示在[图 6-15](#information_about_the_best_run)中）：
- en: '[PRE18]'
  id: totrans-149
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: '![paml 0615](assets/paml_0615.png)'
  id: totrans-150
  prefs: []
  type: TYPE_IMG
  zh: '![paml 0615](assets/paml_0615.png)'
- en: Figure 6-15\. Information about the best run
  id: totrans-151
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 6-15\. 最佳运行的信息
- en: 'Let’s test the model using the test data, and understand the classification
    metrics from the evaluation, as well as the area under the receiver operating
    characteristic curve (ROC AUC):'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们使用测试数据对模型进行测试，并理解评估中的分类指标，以及接收者操作特征曲线下面积（ROC AUC）：
- en: '[PRE19]'
  id: totrans-153
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: '[Figure 6-16](#classification_metrics_and_auc_for_the) shows the output from
    testing the model using the test data, and the relevant metrics: precision, recall,
    f1-score, and support for the model.'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: '[图 6-16](#classification_metrics_and_auc_for_the)显示了使用测试数据对模型进行测试的输出结果，以及相关的指标：精确率、召回率、F1
    分数和模型的支持度。'
- en: '![paml 0616](assets/paml_0616.png)'
  id: totrans-155
  prefs: []
  type: TYPE_IMG
  zh: '![paml 0616](assets/paml_0616.png)'
- en: Figure 6-16\. Classification metrics and AUC for the best model selected
  id: totrans-156
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 6-16\. 所选最佳模型的分类指标和AUC
- en: Conclusion
  id: totrans-157
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 结论
- en: In this chapter, you learned how to use automated ML with Azure Machine Learning
    to find the best classification models for predicting a person’s credit risk.
    You can also use the same approach for identifying the best regression models.
    After you’ve identified the best classification/regression models for a task,
    refer to [Chapter 5](ch05.html#deploying_automated_machine_learning_mod) to see
    how to deploy the machine learning models to various environments.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您学习了如何使用Azure机器学习的自动化ML来查找最佳的分类模型，以预测个人的信用风险。您也可以使用同样的方法来识别最佳的回归模型。一旦您确定了用于任务的最佳分类/回归模型，请参考[第5章](ch05.html#deploying_automated_machine_learning_mod)了解如何将机器学习模型部署到各种环境中。
