- en: Chapter 5\. AI-Powered Descriptive Analytics
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第五章。AI 动力描述性分析
- en: In this chapter, we will explore two use cases that illustrate how AI can help
    us perform descriptive analytics faster and provide a more intuitive and seamless
    way to interact with large datasets—even for nontechnical people. We will also
    see how the natural language capabilities of modern BI tools (in this example,
    Power BI) can take away some of the mundane tasks from us.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将探讨两个用例，展示 AI 如何帮助我们更快地执行描述性分析，并提供一种更直观和无缝互动大数据集的方式，即使是非技术人员也能轻松掌握。我们还将看到现代
    BI 工具（例如 Power BI）的自然语言能力如何为我们减少一些单调的任务。
- en: 'Use Case: Querying Data with Natural Language'
  id: totrans-2
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用案例：用自然语言查询数据
- en: 'The typical analytical thinking process of a business user often starts with
    a simple question, such as one of these:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 业务用户典型的分析思维过程通常从一个简单的问题开始，比如以下之一：
- en: How were my sales last month?
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 上个月我的销售额是多少？
- en: Did we sell more this year than last year?
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 今年我们比去年卖得更多了吗？
- en: What’s the top selling product?
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最畅销的产品是什么？
- en: These questions are mostly descriptive in nature. Users first need to understand
    the status quo before they can dive deeper into analysis or even anticipate future
    events.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 这些问题大多是描述性的。用户首先需要了解现状，然后才能深入分析甚至预测未来事件。
- en: The classic way to solve this problem would be for an analyst to create a set
    of static reports for the most common questions for specific business units or
    departments. However, it’s extremely difficult for business analysts or BI designers
    to anticipate all of the most common questions by using static reports or visualizations.
    Depending on which problem you look at and which people you ask, the exact area
    of interest can be fundamentally different. In organizations, this usually leads
    to long, exhaustive meetings with different stakeholders discussing which charts
    to display in a dashboard.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 解决这个问题的经典方法是，分析师为特定的业务单位或部门的最常见问题创建一组静态报告。然而，通过静态报告或可视化来预测所有最常见的问题对于业务分析师或 BI
    设计师来说是极其困难的。根据你关注的问题和询问的人员，感兴趣的确切领域可能有根本不同。在组织中，这通常会导致与不同利益相关者长时间而详尽地讨论在仪表板中显示哪些图表。
- en: This is where self-service BI systems typically come in, allowing individuals
    to create their own content. Instead of generating all the important dashboards
    and visualizations in advance, business users can slice and dice data themselves
    and create the visualizations they need.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是自助 BI 系统通常介入的地方，允许个人创建自己的内容。与事先生成所有重要的仪表板和可视化不同，业务用户可以自行切割和切块数据，并创建他们需要的可视化效果。
- en: However, self-service BI systems have their problems as well. First, it’s simply
    not possible to enable all possible thinking pathways through customizable drill-downs
    or additional dimensions. One issue often leads to another, and anticipating all
    the possible thinking pathways in the data model leads to complex data structures
    and unintuitive report builders—just to show some descriptive analytics from the
    past. And second, not all business users understand how to properly slice and
    dice data, leading to incorrect dashboards and flawed insights. Pulling together
    various metrics and dimensions into a custom dashboard still means a lot of friction
    for nontechnical users who are not trained data analysts.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，自助 BI 系统也存在问题。首先，通过可定制的逐级深入或额外维度不可能激活所有可能的思维路径。一个问题经常导致另一个问题，而在数据模型中预测所有可能的思维路径会导致复杂的数据结构和不直观的报告生成器——只是为了展示一些过去的描述性分析。其次，并非所有业务用户都了解如何正确地切割和切块数据，这导致不正确的仪表板和错误的洞察力。将各种度量和维度汇总到自定义仪表板中，对于未接受过培训的非技术用户来说仍然意味着很多摩擦。
- en: As a conclusion, none of the static and self-service approaches in BI systems
    are able to answer all possible questions from individuals, and individuals usually
    can’t always sift through the data themselves because it’s not one of their primary
    tasks. What business users want instead is to ask questions and have them answered.
    At this point, they would typically call a data analyst for help to solve the
    problem. Of course, this approach does not scale well, as organizations typically
    have more business users than data analysts. And even if you could afford to have
    a lot of analytical expertise in house, you don’t want to keep your analysts busy
    with repetitive, easy-to-solve tasks. Let’s now lay out the scenario for our example
    use case.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 总结一下，BI系统中的静态和自助式方法都无法回答个人提出的所有可能问题，而个人通常也不能总是自行筛选数据，因为这不是他们的主要任务之一。商业用户想要的是提出问题并得到答案。在这一点上，他们通常会寻求数据分析师的帮助来解决问题。当然，这种方法的可扩展性不强，因为组织通常拥有比数据分析师更多的业务用户。即使您能负担得起拥有大量分析专业知识，您也不希望让分析师忙于重复、易于解决的任务。现在让我们为我们的示例用例场景奠定情景基础。
- en: Problem Statement
  id: totrans-12
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 问题陈述
- en: We are looking at sales data in Power BI. Sales management has approached the
    BI team after recognizing a positive revenue trend and wants to get a deeper understanding
    of what’s currently going on. As BI analysts, we have been tasked to provide support
    to sales staff and help them get insights with regards to revenue development
    in their particular areas of interest. In the same sense of self-service BI, we
    want to provide “help for self-help” and enable salespeople to interact with the
    dataset seamlessly and without any technical friction.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 我们正在查看Power BI中的销售数据。销售管理人员在认识到积极的收入趋势后，已与BI团队接洽，并希望深入了解当前情况。作为BI分析师，我们被委托为销售人员提供支持，并帮助他们深入了解其特定关注领域的收入发展情况。在自助式BI的同样理念下，我们希望提供“自助式帮助”，并使销售人员能够无缝地与数据集互动，而无需任何技术障碍。
- en: Solution Overview
  id: totrans-14
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 解决方案概述
- en: Rather than team up business users with data analysts to get answers for simple
    descriptive statistics, a more efficient approach is to simply let users ask questions
    against the data by using natural language and have them answered automatically
    without any, or with very little, human assistance. Most people don’t even realize
    that they’ve been trained in this method for years (or for however long they have
    been using an internet search engine like Google).
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 与其让业务用户与数据分析师合作获取简单描述性统计的答案，更高效的方法是让用户通过自然语言提问来查询数据，并自动或几乎不需要人工干预地得到答案。大多数人甚至没有意识到，他们多年来（或者使用像Google这样的互联网搜索引擎多长时间以来），一直在接受这种方法的训练。
- en: 'For example, if a business user wants to compare sales figures for a certain
    country with the numbers from last year, they might want to shoot off a query
    such as this:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，如果业务用户想要比较某个国家的销售数字与去年的数据，他们可能想发出这样的查询：
- en: '`**Show me sales in the USA last year versus this year**`'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`**显示我去年和今年在美国的销售情况**`'
- en: In fact, AI-powered natural language features let users do just that. What is
    happening under the hood is that an AI-powered natural language model is interpreting
    the user input and tries to map it to available data in the dataset and come up
    with an appropriate visualization for it. The experience should be quick, interactive,
    and frictionless. [Figure 5-1](#natural_language_use_case_architecture) shows
    the conceptual architecture of our solution.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 实际上，由于AI驱动的自然语言功能，用户可以做到这一点。背后的原理是，AI驱动的自然语言模型解释用户输入，尝试将其映射到数据集中的可用数据，并为其提供适当的可视化效果。这一体验应该快速、互动且无摩擦。[图 5-1](#natural_language_use_case_architecture)展示了我们解决方案的概念架构。
- en: '![Natural language use case architecture](Images/apbi_0501.png)'
  id: totrans-19
  prefs: []
  type: TYPE_IMG
  zh: '![自然语言使用案例架构](Images/apbi_0501.png)'
- en: Figure 5-1\. Natural language use case architecture
  id: totrans-20
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 5-1\. 自然语言使用案例架构
- en: As you can see in [Figure 5-1](#natural_language_use_case_architecture), we
    are using Power BI as our BI tool and will leverage its built-in AI capabilities
    for our purposes. The analysis layer is therefore empty because we are not using
    any external analytical service. Everything is built into Power BI and happening
    in the user layer. Other BI tools such as Tableau offer similar functionalities,
    but the details might be different. In any case, choosing a good BI frontend for
    this task is key, since you cannot add NLP capabilities to BI software if it offers
    no native support (or add-ons that are offering this).
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 如您在 [Figure 5-1](#natural_language_use_case_architecture) 中所见，我们正在使用 Power BI
    作为我们的 BI 工具，并将利用其内置的 AI 能力来解决我们的问题。因此，分析层为空，因为我们没有使用任何外部分析服务。一切都内置于 Power BI 中并在用户层中发生。其他
    BI 工具，如 Tableau，提供类似的功能，但细节可能有所不同。无论如何，选择一个适合此任务的良好 BI 前端至关重要，因为如果它没有提供原生支持（或提供此类附加组件），则无法向
    BI 软件添加 NLP 能力。
- en: In Power BI, the NLP feature is called the *Q&A visual*. The Q&A visual lets
    you use natural language to explore your data in your own words. Q&A is interactive
    and can even be fun. It seems like a good candidate for our problem statement.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Power BI 中，NLP 功能被称为 *Q&A visual*。Q&A visual 允许您用自然语言探索数据，以您自己的话语进行探索。Q&A
    是交互式的，甚至可能很有趣。它似乎是我们问题陈述的一个很好的候选者。
- en: 'The Q&A visual can be dragged onto a report just like any other visual so the
    user can perform custom queries against the data. The Q&A visual can also be added
    as a button in the ribbon, independent from a report, and be integrated into dashboards.
    It works with the following data sources: imported data, live connection to Azure
    Analysis Services, and SQL Server Analysis Services (via a gateway) as well as
    Power BI datasets.'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 用户可以像将任何其他可视化对象拖放到报告中一样，将 Q&A visual 拖放到报告中，以便用户可以对数据执行自定义查询。Q&A visual 还可以作为一个按钮添加到功能区，与报告独立，并集成到仪表板中。它可以与以下数据源一起使用：导入的数据、连接到
    Azure Analysis Services 的实时连接，以及通过网关连接到 SQL Server Analysis Services 的 Power BI
    数据集。
- en: Power BI Walk-Through
  id: totrans-24
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Power BI 演示
- en: To follow along with this example, you will first need to download the *Sales
    & Marketing sample PBIX.pbix* file from the [book’s website](https://oreil.ly/jgjFu).
    The dataset contains various sales and marketing data from a fictitious manufacturing
    company.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 要按照本示例操作，您首先需要从[书籍网站](https://oreil.ly/jgjFu)下载名为 *Sales & Marketing sample
    PBIX.pbix* 的文件。该数据集包含来自一个虚构制造公司的各种销售和营销数据。
- en: The dataset comes pre-populated with some reports to keep track of the company’s
    market share, product volume, sales figures, and sentiment scores. For our case
    study, we assume that all manufacturers in this dataset belong to one holding
    group so that we can analyze the total revenue as a metric of interest. In return,
    we are not so interested in the individual manufacturers’ market share as highlighted
    in the original scenario. You can learn more about the dataset from the [Power
    BI website](https://oreil.ly/S6rOE).
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 数据集已经预先填充了一些报告，用于跟踪公司的市场份额、产品量、销售数据和情感分数。在我们的案例研究中，我们假设数据集中的所有制造商都属于同一控股集团，以便我们可以分析总收入作为一个关注指标。因此，我们对原始情景中突出显示的个别制造商的市场份额不太感兴趣。你可以从[Power
    BI 网站](https://oreil.ly/S6rOE)了解更多有关数据集的信息。
- en: Let’s start by opening Power BI Desktop. In the upper-left section of Power
    BI, choose File → Open report → Browse reports. Then, select the *Sales & Marketing
    sample PBIX.pbix* file from the folder where you downloaded it. You should see
    the intro screen of this report file ([Figure 5-2](#sample_power_bi_report)).
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从打开 Power BI Desktop 开始。在 Power BI 的左上部分，选择 文件 → 打开报告 → 浏览报告。然后，从您下载文件的文件夹中选择
    *Sales & Marketing sample PBIX.pbix* 文件。您应该能看到该报告文件的介绍界面（见 [Figure 5-2](#sample_power_bi_report)）。
- en: '![Sample Power BI report](Images/apbi_0502.png)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![Power BI 示例报告](Images/apbi_0502.png)'
- en: Figure 5-2\. Sample Power BI report
  id: totrans-29
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 5-2\. Power BI 示例报告
- en: For now, we won’t bother with the pre-written reports and dashboards. Our goal
    is to provide a high-level overview on sales data plus an ability for our users
    to query our data interactively.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们不会关心预先编写的报告和仪表板。我们的目标是提供销售数据的高级概述，以及使我们的用户能够与我们的数据进行交互查询。
- en: If this is the first time you’re using Power BI, I recommend spending four minutes
    reading the Microsoft article [“Tour the Report Editor in Power BI”](https://oreil.ly/2jBnn).
    It will familiarize you with the most basic terms and concepts, such as the Report
    canvas and the Filters, Visualizations, and the Fields panes.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 如果这是您第一次使用 Power BI，我建议您花四分钟阅读 Microsoft 文章 [“Tour the Report Editor in Power
    BI”](https://oreil.ly/2jBnn)。它会使您熟悉报告画布、过滤器、可视化和字段窗格等最基本的术语和概念。
- en: You first need to add a new blank page to the report by clicking the plus sign
    at the bottom of the screen. On an empty report page, open the Visualizations
    pane on the right. Select the Q&A visual icon from the Visualizations pane ([Figure 5-3](#qampersanda_visual_icon))
    and double-click to add it to the canvas.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，您需要通过点击屏幕底部的加号图标添加一个新的空白页面到报告中。在空白的报告页面上，打开右侧的可视化面板。从可视化面板中选择 Q&A 可视化图标（[图
    5-3](#qampersanda_visual_icon)），双击将其添加到画布上。
- en: '![Q&A visual icon](Images/apbi_0503.png)'
  id: totrans-33
  prefs: []
  type: TYPE_IMG
  zh: '![Q&A 可视化图标](Images/apbi_0503.png)'
- en: Figure 5-3\. Q&A visual icon
  id: totrans-34
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 5-3\. Q&A 可视化图标
- en: Drag the border so the visual fills the whole width of your report. Increase
    the height so that it covers roughly half of your Report canvas. Your report screen
    should now look similar to [Figure 5-4](#qampersanda_visual_default_screen).
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 拖动边框，使可视化填满整个报告的宽度。增加高度，以便大致覆盖报告画布的一半。您的报告屏幕现在应该看起来类似于 [图 5-4](#qampersanda_visual_default_screen)。
- en: '![Q&A visual default screen](Images/apbi_0504.png)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![Q&A 可视化默认屏幕](Images/apbi_0504.png)'
- en: Figure 5-4\. Q&A visual default screen
  id: totrans-37
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 5-4\. Q&A 可视化默认屏幕
- en: 'Now, let’s explore this visual in a bit more detail. The Q&A visual consists
    of four core components:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们更详细地探索这个可视化。Q&A 可视化包括四个核心组件：
- en: Text box (1)
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 文本框（1）
- en: This is where users type their questions or queries and where they will see
    autocomplete and autosuggest features.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 这是用户输入其问题或查询的地方，也是他们将看到自动完成和自动建议功能的地方。
- en: List of suggested questions (2)
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 推荐问题列表（2）
- en: This pre-populated list contains sample questions the user can run with a single
    click.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 这个预先填写的列表包含用户可以一键运行的示例问题。
- en: Convert icon (3)
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 转换图标（3）
- en: This converts the output from the Q&A tool into a standard Power BI visual.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 这将把 Q&A 工具的输出转换成标准的 Power BI 可视化。
- en: Q&A cog icon (4)
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: Q&A 齿轮图标（4）
- en: This opens a Settings menu that allows designers to configure the underlying
    natural language engine.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 这将打开一个设置菜单，允许设计人员配置底层的自然语言引擎。
- en: 'Let’s give this visual a try by selecting the first suggested question. Click
    the first sample expression: “top geo states by sum of score.” (If Power BI makes
    a different suggestion, just follow along with that.)'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们尝试这个可视化，选择第一个建议的问题。点击第一个示例表达式：“top geo states by sum of score.”（如果 Power
    BI 给出了不同的建议，请按照它的指示操作。）
- en: Power BI will respond with the visual that seems most appropriate for this analysis.
    In this case, it presents a map visual, showing the top states ([Figure 5-5](#qampersanda_map_output)).
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: Power BI 将会展示似乎最适合此分析的可视化。在这种情况下，它展示了一个地图可视化，显示了排名前的州（[图 5-5](#qampersanda_map_output)）。
- en: '![Q&A map output](Images/apbi_0505.png)'
  id: totrans-49
  prefs: []
  type: TYPE_IMG
  zh: '![Q&A 地图输出](Images/apbi_0505.png)'
- en: Figure 5-5\. Q&A map output
  id: totrans-50
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 5-5\. Q&A 地图输出
- en: 'We can change this to almost any other type of visual by making that part of
    our query. Try changing the text in the text box as follows: **`top geo states
    by sum of score as bar chart`**. This query will present a horizontal bar chart
    instead of a map ([Figure 5-6](#qampersanda_bar_chart_output)).'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过在查询中加入这部分来将其更改为几乎任何其他类型的可视化。尝试更改文本框中的文本如下：**`top geo states by sum of
    score as bar chart`**。这个查询将呈现一个水平条形图，而不是地图（[图 5-6](#qampersanda_bar_chart_output)）。
- en: '![Q&A bar chart output](Images/apbi_0506.png)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![Q&A 条形图输出](Images/apbi_0506.png)'
- en: Figure 5-6\. Q&A bar chart output
  id: totrans-53
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 5-6\. Q&A 条形图输出
- en: Now, let’s head back to the text box and explore how users would input questions
    here. The Q&A tool can answer a variety of queries, including but not limited
    to, those listed in [Table 5-1](#example_commands_for_the_power_bi_qampe).
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们回到文本框，探索用户如何在这里输入问题。Q&A 工具可以回答各种查询，包括但不限于 [表 5-1](#example_commands_for_the_power_bi_qampe)
    中列出的内容。
- en: 'Since we are interested in revenue trends, we want to create a simple line
    chart showing the total revenue over time, ideally broken down by year. To achieve
    this, let’s ask Power BI a simple query: **`Show me revenue over time`**.'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我们对收入趋势感兴趣，我们想要创建一个简单的折线图，显示随时间变化的总收入，最好按年份分解。为了实现这个目标，让我们向 Power BI 提出一个简单的查询：**`Show
    me revenue over time`**。
- en: Table 5-1\. Example commands for the Power BI Q&A visual
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 表 5-1\. Power BI Q&A 可视化示例命令
- en: '| Type | Example |'
  id: totrans-57
  prefs: []
  type: TYPE_TB
  zh: '| 类型 | 示例 |'
- en: '| --- | --- |'
  id: totrans-58
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| Ask natural questions | Which sales have the highest revenue? |'
  id: totrans-59
  prefs: []
  type: TYPE_TB
  zh: '| 提出自然问题 | 哪些销售额最高？ |'
- en: '| Relative date filtering | Sales in the last year |'
  id: totrans-60
  prefs: []
  type: TYPE_TB
  zh: '| 相对日期过滤 | 过去一年的销售 |'
- en: '| Filter by variables | Sales in the US |'
  id: totrans-61
  prefs: []
  type: TYPE_TB
  zh: '| 按变量筛选 | 美国的销售 |'
- en: '| Filter by conditions | Sales for product Category A or Category B |'
  id: totrans-62
  prefs: []
  type: TYPE_TB
  zh: '| 按条件筛选 | 产品类别 A 或类别 B 的销售 |'
- en: '| Show a specific visual | Sales by product as pie chart |'
  id: totrans-63
  prefs: []
  type: TYPE_TB
  zh: '| 显示特定可视化 | 按产品的销售饼状图 |'
- en: '| Show aggregations | Median sales by product |'
  id: totrans-64
  prefs: []
  type: TYPE_TB
  zh: '| 显示聚合 | 按产品的销售中位数 |'
- en: '| Sorting | Top 10 countries by sales ordered by country code |'
  id: totrans-65
  prefs: []
  type: TYPE_TB
  zh: '| 排序 | 按国家代码排序的销售前 10 个国家 |'
- en: '| Comparisons | Date by total sales versus total cost |'
  id: totrans-66
  prefs: []
  type: TYPE_TB
  zh: '| 比较 | 按日期的总销售与总成本 |'
- en: '| Time | Sales over time |'
  id: totrans-67
  prefs: []
  type: TYPE_TB
  zh: '| 时间 | 按时间的销售 |'
- en: The result we see in [Figure 5-7](#showing_revenue_over_time) isn’t quite what
    we expected. The output simply shows some dates from 1999\. What’s going on here?
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在 [图 5-7](#showing_revenue_over_time) 中看到的结果并不完全符合预期。输出只是显示了 1999 年的一些日期。这里发生了什么？
- en: '![Showing revenue over time](Images/apbi_0507.png)'
  id: totrans-69
  prefs: []
  type: TYPE_IMG
  zh: '![显示随时间变化的收入](Images/apbi_0507.png)'
- en: Figure 5-7\. Showing revenue over time
  id: totrans-70
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 5-7\. 显示随时间变化的收入
- en: 'We can find out more by looking at the text box, where Power BI helps us identify
    problematic phrases in our query. The red line below “revenue” tells us that Power
    BI could not interpret this variable. In fact, the underlining here follows a
    distinct color code:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 通过查看文本框，我们可以了解更多信息，Power BI 帮助我们识别查询中的问题短语。下面“revenue”下方的红线表明 Power BI 无法解释这个变量。实际上，这里的下划线遵循一种明显的颜色代码：
- en: A solid blue underline indicates that the system successfully matched the word
    to a field or value in the data model.
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 系统以实线蓝色下划线表示成功将单词与数据模型中的字段或值匹配。
- en: An orange underline indicates that the expression was matched with low confidence.
    This happens if the expression is ambiguous—for example, because multiple fields
    contain an expression like “sales.”
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 橙色下划线表示表达式的匹配信心较低。如果表达式不明确，例如多个字段包含“sales”表达式，则会发生这种情况。
- en: A red underline means that the Q&A tool could not match the word at all with
    anything in the data model.
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 红色下划线表示问答工具完全无法将单词与数据模型中的任何内容匹配。
- en: 'If you click an underlined word, you will see suggestions for how Power BI
    would solve the conflict. In the case of the “revenue” expression, Power BI can’t
    assign it to a measure. Let’s be more explicit and adjust the query as follows:
    **`Show me sum of revenue over time`**.'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 如果单击下划线的单词，您将看到 Power BI 如何解决冲突的建议。对于“revenue”表达式，Power BI 无法将其分配给一个度量单位。让我们更加明确地调整查询如下，“**`Show
    me sum of revenue over time`**”。
- en: As you can see, you have to be specific with the query if you rely on the default
    values. We’ll fix this later, but for now, let’s accept the suggestion and see
    what happens ([Figure 5-8](#showing_sum_of_revenue_over_time)).
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 正如您所见，如果依赖默认值，查询必须具体明确。我们稍后会修复这个问题，但现在让我们接受建议并看看会发生什么（[图 5-8](#showing_sum_of_revenue_over_time)）。
- en: '![Showing sum of revenue over time](Images/apbi_0508.png)'
  id: totrans-77
  prefs: []
  type: TYPE_IMG
  zh: '![显示随时间变化的收入总和](Images/apbi_0508.png)'
- en: Figure 5-8\. Showing sum of revenue over time
  id: totrans-78
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 5-8\. 显示随时间变化的收入总和
- en: This looks more like what we expect. Power BI shows a line chart listing the
    total revenue over time, split up by day. Although this is not bad, it is hard
    for us to see the big trends. So let’s be even more specific and ask, **`Show
    me sum of revenue over time by year`**.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 这看起来更符合我们的预期。Power BI 展示了一个折线图，按天列出了随时间变化的总收入。虽然这不错，但我们很难看到大趋势。因此，让我们更加具体地询问，“**`Show
    me sum of revenue over time by year`**”。
- en: The addition of `by year` indicates to Power BI that we are looking for a yearly
    aggregation. As a result, Power BI shows us a clean line chart, where we can instantly
    see that the revenue spiked in 2006 and then followed a negative trend afterward
    ([Figure 5-9](#showing_sum_of_revenue_over_time_by_yea)). Since 2010, the trend
    seems to be positive again.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 添加“by year”表明我们希望 Power BI 进行年度汇总。因此，Power BI 展示了一个清晰的折线图，我们可以立即看到 2006 年收入飙升，然后随后呈负增长趋势（[图 5-9](#showing_sum_of_revenue_over_time_by_yea)）。自
    2010 年以来，趋势似乎再次呈正向。
- en: '![Showing sum of revenue over time by year](Images/apbi_0509.png)'
  id: totrans-81
  prefs: []
  type: TYPE_IMG
  zh: '![显示按年度收入总和随时间变化](Images/apbi_0509.png)'
- en: Figure 5-9\. Showing sum of revenue over time by year
  id: totrans-82
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 5-9\. 显示按年度收入总和随时间变化
- en: Let’s say we want to keep this visual to provide a high-level overview about
    sales for our report consumers. By default, the query isn’t saved or persisted
    on the report. So if the report gets shared and opened by another user, they would
    see the empty Q&A visual with the initial suggestions, just as we did previously.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 假设我们想保留这个可视化图表，为我们的报告消费者提供一个高层概述销售情况。默认情况下，查询结果不会保存或持久化在报告中。因此，如果报告被共享并由另一个用户打开，他们会看到空的
    Q&A 可视化图表和最初的建议，就像我们之前所做的一样。
- en: If you want to share the output of the Q&A visual, you have to convert it into
    a static visual first. To do so, click the Convert visual icon, shown previously
    in [Figure 5-4](#qampersanda_visual_default_screen). Power BI will convert the
    Q&A visual into a plain line chart.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您想共享 Q&A 可视化的输出，您必须首先将其转换为静态可视化。要这样做，请点击转换可视化图标，在之前的 [图 5-4](#qampersanda_visual_default_screen)
    中显示。Power BI 将把 Q&A 可视化转换为简单的折线图。
- en: So far, we’ve created a static high-level visual. Now, we can work on adding
    a self-service area enabling business users to query the data with custom questions.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们已经创建了一个静态的高层可视化图表。现在，我们可以开始添加一个自助服务区域，使业务用户能够使用自定义问题查询数据。
- en: Resize the revenue visual horizontally to make a little more space below it.
    Choose Insert → Text Box to insert a headline on top of the visual, reading **`Self-Service
    Revenue Analysis`**. Rename this report sheet from “Page 1” to **`Total Revenue
    by Year`**.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 将收入可视化水平调整，以在其下方腾出更多空间。选择 插入 → 文本框，在可视化顶部插入一个标题，标题为 **`自助服务收入分析`**。将此报告工作表从“第1页”重命名为
    **`按年度总收入`**。
- en: Let’s add a second visual. Double-click the Q&A visual from the Visualizations
    pane so it appears below the total revenue line chart. Your report should now
    look similar to [Figure 5-10](#qampersanda_report_layout).
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们再添加一个可视化图表。从可视化面板中双击 Q&A 可视化，使其出现在按年度总收入线图下方。您的报告现在应该类似于 [图 5-10](#qampersanda_report_layout)。
- en: '![Q&A report layout](Images/apbi_0510.png)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![Q&A 报告布局](Images/apbi_0510.png)'
- en: Figure 5-10\. Q&A report layout
  id: totrans-89
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 5-10\. Q&A 报告布局
- en: To make the Q&A visual more helpful and more intuitive for business users, we
    want to adjust the default suggestions as well as the wording used inside the
    Q&A tool. Click the Q&A cog icon to the right of the text box to edit the settings
    of the Q&A visual. You will see various options. Over the next few paragraphs,
    I will walk you through several options that will be enough to customize the Q&A
    visual in a way that business users (and not just data analysts) can use it.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 要使 Q&A 可视化更有帮助和更直观地用于业务用户，我们还想调整 Q&A 工具内部使用的默认建议以及措辞。单击文本框右侧的 Q&A 齿轮图标以编辑 Q&A
    可视化设置。您将看到各种选项。在接下来的几段中，我将为您介绍一些选项，这些选项足以定制 Q&A 可视化，以便业务用户（而不仅仅是数据分析师）可以使用它。
- en: Let’s start with *field synonyms*, shown in [Figure 5-11](#field_synonyms_in_the_qampersanda_tool).
    In the Q&A tool, every *field* (e.g., a measure, dimension, or table) can have
    one or multiple synonyms. For example, let’s say your data model has the measure
    “sales” but you want your users to refer to this metric as “revenue.” In this
    case, “revenue” would be a field synonym for “sales.”
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 我们从 *字段同义词* 开始，如 [图 5-11](#field_synonyms_in_the_qampersanda_tool) 所示。在 Q&A
    工具中，每个 *字段*（例如，度量、维度或表）都可以具有一个或多个同义词。例如，假设您的数据模型有一个度量单位“销售”，但您希望用户将此指标称为“收入”。在这种情况下，“收入”就成为“销售”的字段同义词。
- en: Power BI will present you with a list of your data dimensions and allow you
    to add synonyms to the various fields in the business lingo that your users speak.
    For this example, open the SalesFact list, as shown in [Figure 5-11](#field_synonyms_in_the_qampersanda_tool).
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: Power BI 将向您显示数据维度列表，并允许您为用户所使用的各种业务术语为不同字段添加同义词。在此示例中，打开 SalesFact 列表，如 [图 5-11](#field_synonyms_in_the_qampersanda_tool)
    所示。
- en: '![Field synonyms in the Q&A tool](Images/apbi_0511.png)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![Q&A 工具中的字段同义词](Images/apbi_0511.png)'
- en: Figure 5-11\. Field synonyms in the Q&A tool
  id: totrans-94
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 5-11\. Q&A 工具中的字段同义词
- en: You will see all measures in this list along with autosuggestions for synonyms
    and a toggle button enabling you to choose whether this field should be included
    in the Q&A widget. Scroll down to Sum of Revenue. Click the Add button and include
    “total revenue” here as a synonym, as shown in [Figure 5-12](#qampersanda_field_synonyms).
    Also add “total of revenue,” “revenue,” “total income,” “total of sales,” and
    “total sales” to the synonyms. We could go through the other fields as well, but
    for now let’s end this exercise.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 您将在此列表中看到所有措施，以及同义词的自动建议和一个切换按钮，您可以选择是否将此字段包含在问答小部件中。向下滚动到“总收入”部分。点击“添加”按钮，在此处加入“总收入”作为同义词，如[图 5-12](#qampersanda_field_synonyms)所示。还将“总的收入”，“收入”，“总收入”，“总销售额”和“总销售”添加到同义词中。我们也可以浏览其他字段，但现在让我们结束这个练习。
- en: '![Q&A field synonyms](Images/apbi_0512.png)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![问答字段同义词](Images/apbi_0512.png)'
- en: Figure 5-12\. Q&A field synonyms
  id: totrans-97
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 5-12\. 问答字段同义词
- en: Click “Manage terms” in the left menu, and you will see a list of all the terms
    and definitions that were added to the Q&A visual ([Figure 5-13](#managing_terms)).
    This way, you can easily keep track of any changes you made and delete terms that
    are not appropriate.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 点击左侧菜单中的“管理术语”，您将看到添加到问答视觉中的所有术语和定义的列表（[图 5-13](#managing_terms)）。这样，您可以轻松跟踪您所做的任何更改，并删除不合适的术语。
- en: '![Managing terms](Images/apbi_0513.png)'
  id: totrans-99
  prefs: []
  type: TYPE_IMG
  zh: '![管理术语](Images/apbi_0513.png)'
- en: Figure 5-13\. Managing terms
  id: totrans-100
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 5-13\. 管理术语
- en: Head over to “Suggest questions” in the left menu now. This section allows you
    to edit the questions that are suggested to users by default, which you can see
    in [Figure 5-14](#suggesting_questions).
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，请转到左侧菜单中的“建议问题”。此部分允许您编辑系统默认向用户建议的问题，您可以在[图 5-14](#suggesting_questions)中看到。
- en: Let’s start with a revenue breakdown by region. Type in **`Show me revenue by
    region`**. This should yield a plot in the preview window ([Figure 5-14](#suggesting_questions)).
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从按地区进行收入细分开始。输入 **`显示按地区的收入`**。这将在预览窗口中生成一个图表（[图 5-14](#suggesting_questions)）。
- en: '![Suggesting questions](Images/apbi_0514.png)'
  id: totrans-103
  prefs: []
  type: TYPE_IMG
  zh: '![建议问题](Images/apbi_0514.png)'
- en: Figure 5-14\. Suggesting questions
  id: totrans-104
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 5-14\. 建议问题
- en: Fine, let’s add that to our suggestions by clicking the Add button.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 好的，让我们通过点击“添加”按钮将其添加到我们的建议中。
- en: Business users are usually very good at learning by example. To give users more
    intuition on how they can use the Q&A tool, let’s add a variation to the previous
    question. Business users should later be comfortable replacing things like “region”
    with “product” or whatever it is that is on their mind.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 业务用户通常很擅长通过示例学习。为了让用户更直观地了解如何使用问答工具，让我们对之前的问题添加一个变体。业务用户稍后应该可以舒适地用“产品”等替换“地区”等内容。
- en: 'Add the following suggestion: **`Show me revenue by region by year`**. This
    produces three line charts, which leads us to the idea of comparing data points.
    So let’s add an example of how business users can compare sales performance among
    products. Let’s add this slightly more complex suggested question: **`Show me
    revenue of Maximus UM-01 vs. Maximus UM-02 by year`**.'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 添加以下建议：**`显示按年度按地区的收入`**。这将生成三个折线图，引出了比较数据点的概念。因此，让我们添加一个更复杂的建议问题示例，展示业务用户如何比较产品销售表现。让我们添加这个略微复杂的建议问题：**`按年度比较
    Maximus UM-01 和 Maximus UM-02 的收入`**。
- en: This results in a very insightful chart, showing us that Maximus UM-01 had decreasing
    revenues since its peak in 2005, and the new product Maximus UM-02 seems to be
    slowly taking off after its initial release in 2007\. By 2012, the new product
    contributed more revenue than its predecessor, as you can see in [Figure 5-15](#qampersanda_revenue_comparison).
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 这产生了一个非常有见地的图表，显示我们 Maximus UM-01 自 2005 年达到峰值以来的收入下降，而新产品 Maximus UM-02 自 2007
    年初发布以来似乎在逐渐起飞。到 2012 年，新产品贡献的收入超过了其前身，正如您可以在[图 5-15](#qampersanda_revenue_comparison)中看到的那样。
- en: '![Q&A revenue comparison](Images/apbi_0515.png)'
  id: totrans-109
  prefs: []
  type: TYPE_IMG
  zh: '![问答收入比较](Images/apbi_0515.png)'
- en: Figure 5-15\. Q&A revenue comparison
  id: totrans-110
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 5-15\. 问答收入比较
- en: To organize the list of suggested questions, you can drag the questions into
    the order you want. Let’s move the simplest query to the first position and the
    most complex one to the last. Save the suggestions. Close the Q&A setup window.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 为了组织建议问题列表，您可以将问题拖动到您想要的顺序中。让我们将最简单的查询移动到第一个位置，最复杂的查询移动到最后一个位置。保存建议。关闭问答设置窗口。
- en: Taking a look again at our report, we can see that the three suggestions we
    just created now show up in the Q&A visual. Business users can start their data
    exploration by simply clicking a suggestion and then modifying the query as they
    like—for example, by replacing “region” with “geo state.” You can see the final
    example in [Figure 5-16](#final_report_with_qampersanda_visual).
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 再次查看我们的报告，我们可以看到我们刚刚创建的三个建议现在显示在Q&A可视化中。业务用户可以通过简单点击建议开始其数据探索，然后根据需要修改查询，例如将“地区”替换为“地理州”。您可以在[图5-16](#final_report_with_qampersanda_visual)中看到最终示例。
- en: '![Final report with Q&A visual](Images/apbi_0516.png)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '![带Q&A可视化的最终报告](Images/apbi_0516.png)'
- en: Figure 5-16\. Final report with Q&A visual
  id: totrans-114
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图5-16\. 带Q&A可视化的最终报告
- en: This basic setup would be sufficient enough for shipping an early prototype
    of this report to a sample of beta business users. You have the chance to collect
    valuable feedback, see whether it is accepted, and discover areas for improvement.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 这种基本设置已足以将此报告的早期原型交付给一些β版业务用户。您有机会收集宝贵的反馈意见，看看是否被接受，并发现需要改进的方面。
- en: To access the user query data, click the Q&A cog icon on the right side of the
    text box to access the tool’s settings. Here, you will find the menu option “Review
    questions.” This will list all queries submitted over the last 28 days so you
    can see exactly how people used your report and which synonyms, suggestions, or
    fields might be still missing. This is a great place to start iterating over your
    product and scaling it to more users. If you want to share this report, you will
    need a Power BI Pro or Premium license.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问用户查询数据，请单击文本框右侧的Q&A齿轮图标以访问工具设置。在这里，您将找到“查看问题”菜单选项。这将列出过去28天提交的所有查询，以便您可以准确查看人们如何使用您的报告以及可能仍然缺少的同义词、建议或字段。这是开始迭代产品并扩展到更多用户的绝佳地点。如果您想分享此报告，您需要Power
    BI Pro或Premium许可证。
- en: 'If you’d like to read more about how the Q&A tool and its administration work
    in detail, you might find the following resources useful from the Microsoft documentation:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您想详细了解Q&A工具及其管理工作的更多信息，您可能会发现来自Microsoft文档的以下资源有用：
- en: '[“Best Practices to Optimize Q&A in Power BI”](https://oreil.ly/DMRFN)'
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[“优化Power BI中Q&A的最佳实践”](https://oreil.ly/DMRFN)'
- en: '[“Intro to Q&A Tooling to Train Power BI Q&A”](https://oreil.ly/anFXF)'
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[“Q&A工具入门：训练Power BI Q&A”](https://oreil.ly/anFXF)'
- en: '[“Edit Q&A Linguistic Schema and Add Phrasings in Power BI Desktop”](https://oreil.ly/pSVXM)'
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[“编辑Power BI Desktop中的Q&A语言模式并添加短语”](https://oreil.ly/pSVXM)'
- en: 'Use Case: Summarizing Data with Natural Language'
  id: totrans-121
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用案例：用自然语言总结数据
- en: Business analysts often have to craft data stories to communicate insights to
    business stakeholders. While most of their time is typically spent on creating
    compelling visuals, the process of annotating with conclusions can be cumbersome
    and tedious. Too often, analysts therefore skip the step of adding verbal comments
    to their visuals since the charts speak for themselves, don’t they? No, in fact,
    many charts can be misinterpreted, especially when it comes to more complex visualizations.
    Let’s imagine the following scenario.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 业务分析师经常必须编制数据故事，以向业务利益相关者传达见解。尽管他们大部分时间通常花在创建引人注目的视觉上，但与结论进行注释的过程可能会很繁琐和乏味。因此，分析师经常跳过向他们的视觉添加口头评论的步骤，因为图表本身就能说话，不是吗？实际上，许多图表可能会被误解，尤其是在涉及更复杂的可视化时。让我们想象以下情景。
- en: Problem Statement
  id: totrans-123
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 问题说明
- en: 'Building off the visuals we created in [“Use Case: Querying Data with Natural
    Language”](#use_case_querying_data_with_natural_lan), we now want to add captions
    to assist nontechnical stakeholders in interpreting the data. We want to provide
    captions to make insights clear, but we don’t want to spend much time writing
    them out manually.'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 基于我们在[“使用案例：使用自然语言查询数据”](#use_case_querying_data_with_natural_lan)中创建的视觉效果，我们现在希望添加标题，以帮助非技术利益相关者解释数据。我们想提供标题以清晰地表达见解，但我们不想花费太多时间手动编写它们。
- en: Solution Overview
  id: totrans-125
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 解决方案概述
- en: Natural language capabilities let us use machines to not only analyze and interpret
    human language, but also generate text based on defined inputs. In this example,
    we can use AI technology to create captions or annotations for a given plot and
    its underlying data.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 自然语言处理技术使我们能够利用机器不仅分析和解释人类语言，还能根据定义的输入生成文本。在这个示例中，我们可以使用AI技术为给定的图表及其基础数据创建标题或注释。
- en: The annotations should address key takeaways, point out trends, and allow editing
    the language and format tailored to a specific audience. And they are a great
    way of making our reports more accessible to the visually impaired as well! [Figure 5-17](#smart_narrative_use_case_architecture)
    shows the high-level use case architecture.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 注释应包括关键要点，指出趋势，并允许根据特定受众编辑语言和格式。它们还是使我们的报告对视觉障碍者更易访问的绝佳方式！[图 5-17](#smart_narrative_use_case_architecture)
    展示了高级用例架构。
- en: '![Smart narrative use case architecture](Images/apbi_0517.png)'
  id: totrans-128
  prefs: []
  type: TYPE_IMG
  zh: '![智能叙述用例架构](Images/apbi_0517.png)'
- en: Figure 5-17\. Smart narrative use case architecture
  id: totrans-129
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 5-17\. 智能叙述用例架构
- en: 'Again, we are solely using built-in Power BI functionalities for this example.
    The feature in Power BI, called *smart narrative*, is available in both Power
    BI Desktop and Power BI Service for designers and developers. The feature is available
    for all license types and does not require a Pro or Premium license. We will explore
    how to use these autogenerated captions to generate a data story for the visuals
    we created in [“Use Case: Querying Data with Natural Language”](#use_case_querying_data_with_natural_lan).'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 再次强调，此示例仅使用内置的 Power BI 功能。Power BI 中名为 *智能叙述* 的功能适用于设计师和开发人员，无论是在 Power BI
    Desktop 还是 Power BI Service 中。该功能适用于所有许可类型，不需要 Pro 或 Premium 许可证。我们将探讨如何使用这些自动生成的标题为我们在
    [“用例：使用自然语言查询数据”](#use_case_querying_data_with_natural_lan) 中创建的可视化对象生成数据故事。
- en: Power BI Walk-Through
  id: totrans-131
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Power BI 演练
- en: 'Open *Sales & Marketing sample PBIX.pbix* from [“Use Case: Querying Data with
    Natural Language”](#use_case_querying_data_with_natural_lan). Create a new report
    page and call it Story.'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 打开 *Sales & Marketing sample PBIX.pbix* 文件，从 [“用例：使用自然语言查询数据”](#use_case_querying_data_with_natural_lan)
    中创建一个新的报告页面，并将其命名为 Story。
- en: 'We want to create the following four visualizations:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 我们希望创建以下四个可视化对象：
- en: Revenue by year
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 按年份收入
- en: Revenue by state
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 按州收入
- en: Revenue by segment
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 按部门收入
- en: Revenue by year and segment
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 按年份和部门收入
- en: 'You can use the Q&A tool to achieve this quickly: double-click the Q&A visual
    from the Visualizations pane, type the query from the preceding list, and then
    convert it into a standard visual. Repeat this process for each of the revenue
    breakdowns. Do you see how fast it is to create these visuals with the AI NLP
    capabilities in Power BI compared to the traditional approach of manually choosing
    a visual in combination with mapping data and filtering by hand?'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用 Q&A 工具快速实现这一点：从可视化面板双击 Q&A 可视化对象，输入前面列表中的查询，然后将其转换为标准可视化对象。对每个收入分解重复此过程。您能看到使用
    Power BI 的 AI NLP 功能与传统手动选择可视化对象、映射数据和手动筛选相比创建这些可视化对象有多快吗？
- en: Arrange the visuals on the page in a way that some space remains to the right
    for the narratives. Your page should look similar to [Figure 5-18](#sales_dashboard).
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 将页面上的可视化对象排列在右侧留有空间的方式。您的页面应类似于 [图 5-18](#sales_dashboard)。
- en: '![Sales dashboard](Images/apbi_0518.png)'
  id: totrans-140
  prefs: []
  type: TYPE_IMG
  zh: '![销售仪表盘](Images/apbi_0518.png)'
- en: Figure 5-18\. Sales dashboard
  id: totrans-141
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 5-18\. 销售仪表盘
- en: Open the Visualizations pane. You should see the “Smart narrative” icon ([Figure 5-19](#smart_narrative_visualization)).
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 打开可视化面板。你应该看到“智能叙述”图标（[图 5-19](#smart_narrative_visualization)）。
- en: Note
  id: totrans-143
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: If you don’t see the “Smart narrative” icon in the Visualization pane, you may
    be using an older version of Power BI and will need to turn on the smart narrative
    option. Choose File → Options and Settings → Options → Preview feature, and make
    sure the smart narrative visual is turned on.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 如果在可视化面板中看不到“智能叙述”图标，则可能是您正在使用的 Power BI 版本较旧，需要打开智能叙述选项。选择 文件 → 选项和设置 → 选项
    → 预览功能，并确保打开智能叙述可视化。
- en: '![Smart narrative visualization](Images/apbi_0519.png)'
  id: totrans-145
  prefs: []
  type: TYPE_IMG
  zh: '![智能叙述可视化](Images/apbi_0519.png)'
- en: Figure 5-19\. Smart narrative visualization
  id: totrans-146
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 5-19\. 智能叙述可视化
- en: Double-clicking the “Smart narrative” icon should add a text box to the right
    side of your page. Alternatively, you can drag and drop the visual to a place
    on the page you like. This text box will contain the description that Power BI
    suggests for all visualizations on the page. In our case, the description will
    look like the output in [Figure 5-20](#smart_narrative_output). If you click the
    text box, you will see the highlighted values that Power BI calculated here.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 双击“智能叙述”图标应在页面右侧添加一个文本框。或者，您可以将可视化对象拖放到页面上您喜欢的位置。此文本框将包含 Power BI 为页面上的所有可视化建议的描述。在我们的情况下，描述将看起来像
    [图 5-20](#smart_narrative_output) 中的输出。如果点击文本框，您将看到 Power BI 在此处计算的突出显示值。
- en: '![Smart narrative output](Images/apbi_0520.png)'
  id: totrans-148
  prefs: []
  type: TYPE_IMG
  zh: '![智能叙述输出](Images/apbi_0520.png)'
- en: Figure 5-20\. Smart narrative output
  id: totrans-149
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 5-20\. 智能叙述输出
- en: There are a couple of interesting things to note here. On the first line, you
    can see that Power BI recognized that the revenue trended down and calculated
    the percentage of the beginning and the end of the revenue time series (see [Figure 5-21](#smart_narrative_formatting)).
    It also suggests that the product segment Moderation accounted for 52.59% of the
    total revenue in 2014\. When you find that a statement is not relevant enough
    or even redundant, you can simply delete this line from the summary.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有几个有趣的事情需要注意。在第一行中，您可以看到 Power BI 认识到收入呈下降趋势，并计算了收入时间序列起始和结束的百分比（见[图 5-21](#smart_narrative_formatting)）。它还建议，产品细分“Moderation”在2014年占总收入的52.59%。当您发现某个陈述不够相关甚至是多余时，您可以简单地从摘要中删除此行。
- en: You can also explore the calculated values in more detail and apply formatting
    to them. For example, click the values that calculate the revenue figures. In
    the context menu, you can choose to display this value as a currency without any
    decimals after the comma.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以详细探索计算出的值，并对其应用格式。例如，单击计算出的收入数字。在上下文菜单中，您可以选择将该值显示为无小数点后的货币形式。
- en: '![Smart narrative formatting](Images/apbi_0521.png)'
  id: totrans-152
  prefs: []
  type: TYPE_IMG
  zh: '![智能叙述格式化](Images/apbi_0521.png)'
- en: Figure 5-21\. Smart narrative formatting
  id: totrans-153
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 5-21\. 智能叙述格式化
- en: Formatting the automated text output will make it more accessible to the reader
    and will look much nicer overall. When we look at the summary, however, we realize
    that no information was given about the regional sales breakdown. Maybe this information
    was not important enough to Power BI? To add these details manually, right-click
    the map plot that shows the sales figures by state and choose Summarize from the
    context menu. Power BI will add another text box that shows descriptions for just
    the plot that you selected. Again, you can delete or modify the descriptions as
    you like.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 格式化自动生成的文本输出将使读者更易理解，整体外观也会更加优雅。然而，当我们查看摘要时，我们意识到有关区域销售细分的信息并未提供。也许这些信息对 Power
    BI 来说并不重要？要手动添加这些详细信息，请右键单击显示按州销售数据的地图图表，并从上下文菜单中选择总结。Power BI 将添加另一个文本框，显示您仅选择的图表的描述。同样，您可以根据需要删除或修改这些描述。
- en: One important thing to note about the automated captions is that they are fully
    dynamic and respond to changes in the underlying graphs. To demonstrate this,
    let’s add a page filter to our dashboard to show only data from after 2010, as
    shown in [Figure 5-22](#smart_narrative_responds_to_global_filt). Open the Fields
    pane and then drag and drop the field Year to the “Filters on this page” option
    pane. Once you apply the filter, notice how the content of the text box changes.
    Power BI recognizes that the revenue trend is now going upward and updates the
    corresponding percentages accordingly.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 关于自动生成标题的一个重要说明是它们完全动态，并响应底层图表的变化。为了演示这一点，让我们向我们的仪表板添加一个页面过滤器，仅显示2010年之后的数据，如[图 5-22](#smart_narrative_responds_to_global_filt)所示。打开字段窗格，然后将“年份”字段拖放到“本页面上的过滤器”选项窗格中。一旦应用过滤器，请注意文本框内容的变化。Power
    BI 认识到收入趋势现在向上，并相应地更新相关的百分比。
- en: '![Smart narrative responds to global filtering and data changes](Images/apbi_0522.png)'
  id: totrans-156
  prefs: []
  type: TYPE_IMG
  zh: '![智能叙述响应全局过滤和数据变化](Images/apbi_0522.png)'
- en: Figure 5-22\. Smart narrative responds to global filtering and data changes
  id: totrans-157
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 5-22\. 智能叙述响应全局过滤和数据变化
- en: 'What is still missing is an explanation for one of the most important charts
    on this dashboard: the revenue breakdown by segment. You can clearly see that
    the segment Moderation is the only segment with a relevant positive trend—this
    is something that should be easy to recognize by the smart narrative tool, shouldn’t
    it? Right-click the plot and click Summarize. But what happens? Power BI just
    responds with a single line of text in the smart narrative box, which is very
    hard to interpret.'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 仍然缺少的是对仪表板上最重要的图表之一——按细分划分的收入详细说明。您可以清楚地看到，“Moderation”细分是唯一具有相关正向趋势的细分——这应该是智能叙述工具易于识别的内容，对吗？右键单击图表并点击总结。但结果如何？Power
    BI 只是在智能叙述框中响应一行文本，这非常难以解释。
- en: We have hit the boundaries of the smart narrative feature here. At the time
    of this writing, it is not possible to summarize very complex charts that have
    many categories or underlying trends. In addition, renaming dynamic values or
    editing automatically generated dynamic values is currently not supported, and
    summaries cannot be produced for visuals that contain on-the-fly calculations
    like complex measures or percentages.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在这里触及了智能叙述功能的边界。在撰写本文时，尚无法总结具有许多类别或潜在趋势的非常复杂的图表。此外，目前不支持重命名动态值或编辑自动生成的动态值，并且无法为包含即时计算（如复杂度量或百分比）的可视化生成摘要。
- en: Since the smart narrative feature was initially released only in 2021, it will
    be exciting to see which of these limitations are going to disappear. You can
    find more details about the smart narrative tool in the [Microsoft resource documentation](https://oreil.ly/F75ve).
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 由于智能叙述功能最初仅于 2021 年发布，我们将看到哪些限制会消失令人兴奋。您可以在[微软资源文档](https://oreil.ly/F75ve)中找到有关智能叙述工具的更多详细信息。
- en: 'For now, let’s just add the final conclusion for our dashboard by hand. Add
    a new line to the last text box and type **`Conclusion: Sales from product segment
    Moderation were the main reason for the positive revenue trend between 2011 and
    2014`**. Your final sales dashboard should now look similar to [Figure 5-23](#final_sales_dashboard_with_annotations).'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: '现在，让我们手动为仪表板添加最终结论。在最后一个文本框中添加一行新内容，输入 **`Conclusion: Sales from product segment
    Moderation were the main reason for the positive revenue trend between 2011 and
    2014`**。您的最终销售仪表板现在应该看起来类似于 [图 5-23](#final_sales_dashboard_with_annotations)。'
- en: While the smart narrative tool has many more customizations and configurations
    than this book could cover (for example, defining custom values by using the Q&A–style
    language queries), we will leave it like this. If you’d like to find out more
    about the smart narrative tool, check out the YouTube video tutorial [“How to
    Use Smart Narrative with Power BI”](https://oreil.ly/Z4UJU) from Microsoft.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管智能叙述工具具有比本书更多的自定义和配置选项（例如，通过使用 Q&A 风格的语言查询定义自定义值），我们将保持现状。如果您想了解更多关于智能叙述工具的信息，请查看微软的YouTube视频教程
    [“如何使用 Power BI 的智能叙述”](https://oreil.ly/Z4UJU)。
- en: '![Final sales dashboard with annotations](Images/apbi_0523.png)'
  id: totrans-163
  prefs: []
  type: TYPE_IMG
  zh: '![带有注释的最终销售仪表板](Images/apbi_0523.png)'
- en: Figure 5-23\. Final sales dashboard with annotations
  id: totrans-164
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 5-23\. 带有注释的最终销售仪表板
- en: You could now easily export this page to a PDF (File → Export → Export to PDF)
    or publish it to a Power BI server. While a detailed discussion of the various
    sharing and publishing features in Power BI would be beyond the scope of this
    book, I recommend reading the Microsoft documentation [“Ways to Collaborate and
    Share in Power BI”](https://oreil.ly/9z9A3) if you want to get started on this
    topic.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，您可以轻松地将此页面导出为 PDF（文件 → 导出 → 导出为 PDF）或将其发布到 Power BI 服务器。虽然详细讨论 Power BI 中各种共享和发布功能超出了本书的范围，但我建议阅读微软文档
    [“在 Power BI 中进行协作和共享的方式”](https://oreil.ly/9z9A3) 以便深入了解此主题的开始。
- en: For now, just save the report (File → Save), as we’re coming back to this example
    in the next chapter. You can retrieve the completed file that contains all exercises
    from this chapter by downloading *Sales & Marketing Sample_AI-Powered.pbix* from
    this [book’s website](https://oreil.ly/jgjFu).
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，只需保存报告（文件 → 保存），因为我们将在下一章回到此示例。您可以通过从[本书网站](https://oreil.ly/jgjFu)下载 *Sales
    & Marketing Sample_AI-Powered.pbix* 来获取包含本章所有练习的完成文件。
- en: Summary
  id: totrans-167
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, you have learned how to use the AI-powered natural language
    capabilities in the form of the Q&A tool in Power BI to create visualizations
    faster and give your users a better BI experience. You have also learned how to
    automate the annotation process of your visualizations and add descriptions on
    the fly using the smart narrative tool in Power BI.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您学习了如何利用 Power BI 中的基于人工智能的自然语言能力，通过 Q&A 工具更快地创建可视化，并为用户提供更好的BI体验。您还学习了如何使用
    Power BI 中的智能叙述工具自动化可视化的注释过程，并在运行时添加描述。
- en: In the next chapter, we will further explore our data and find out which factors
    affect the revenue trend. We will use AI-powered tools to reduce our time to insights
    and comb through the data automatically for interesting patterns.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将进一步探索我们的数据，并找出影响收入趋势的因素。我们将使用AI驱动的工具来减少我们获得洞察力的时间，并自动检查有趣模式的数据。
